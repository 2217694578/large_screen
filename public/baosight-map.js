/*!
 * baosight-map.js v1.2.2
 * (c) 2020-2023 Charlie Zhang
 * Released under the MIT License.
 */
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/config.js":
/*!***********************!*\
  !*** ./src/config.js ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nconst isDev = \"development\" === 'development';\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\n  /**\r\n   * Whether to suppress warnings\r\n   */\n  silent: false,\n  /**\r\n   * Service address\r\n   */\n  host: 'http://127.0.0.1',\n  port: isDev ? 7001 : 12580,\n  port2: isDev ? 7001 : 12581\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29uZmlnLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2Jhb3NpZ2h0LW1hcC8uL3NyYy9jb25maWcuanM/ZGI0OSJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBpc0RldiA9IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnXHJcblxyXG5leHBvcnQgZGVmYXVsdCB7XHJcbiAgLyoqXHJcbiAgICogV2hldGhlciB0byBzdXBwcmVzcyB3YXJuaW5nc1xyXG4gICAqL1xyXG4gIHNpbGVudDogZmFsc2UsXHJcbiAgLyoqXHJcbiAgICogU2VydmljZSBhZGRyZXNzXHJcbiAgICovXHJcbiAgaG9zdDogJ2h0dHA6Ly8xMjcuMC4wLjEnLFxyXG4gIHBvcnQ6IGlzRGV2ID8gNzAwMSA6IDEyNTgwLFxyXG4gIHBvcnQyOiBpc0RldiA/IDcwMDEgOiAxMjU4MVxyXG59XHJcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/config.js\n");

/***/ }),

/***/ "./src/core/base.js":
/*!**************************!*\
  !*** ./src/core/base.js ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   baseMixin: () => (/* binding */ baseMixin)\n/* harmony export */ });\n/* harmony import */ var _util__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../util */ \"./src/util/index.js\");\n\nfunction baseMixin(BSMap) {\n  // 加载地图图片\n  BSMap.prototype._load = function (src, width, height, callback) {\n    const bm = this;\n    bm.isTile = false;\n    if (typeof src === 'string') {\n      bm.map = new Image();\n      bm.map.src = src;\n    } else {\n      bm.map = src;\n    }\n    bm.mapWidth = width;\n    bm.mapHeight = height;\n    bm.map.onload = () => {\n      bm._initMapRect(bm.map.naturalWidth, bm.map.naturalHeight);\n      bm._drawMap(bm);\n      callback && callback();\n    };\n  };\n  BSMap.prototype.load = function (p1, p2, p3, p4) {\n    const bm = this;\n    let src, width, height, callback, zoom, center;\n    if (typeof p1 === 'object' && typeof p2 === 'function') {\n      src = p1.src;\n      width = p1.size[0];\n      height = p1.size[1];\n      zoom = p1.zoom || bm.zoom;\n      center = p1.center || bm.center;\n      callback = p2;\n    } else {\n      src = p1;\n      width = p2;\n      height = p3;\n      callback = p4;\n    }\n    bm.isTile = false;\n    if (typeof src === 'string') {\n      bm.map = new Image();\n      bm.map.src = src;\n    } else {\n      bm.map = src;\n    }\n    bm.mapWidth = width;\n    bm.mapHeight = height;\n    bm.zoom = zoom;\n    bm.center = center;\n    bm.map.onload = () => {\n      bm._initMapRect(bm.map.naturalWidth, bm.map.naturalHeight);\n      bm._drawMap(bm);\n      callback && callback();\n    };\n  };\n\n  // 监听地图缩放\n  BSMap.prototype.onZoom = function (callback) {\n    const bm = this;\n    if (callback && typeof callback === 'function') {\n      bm._updateZoom = callback;\n    }\n  };\n\n  // 加载瓦片地图\n  BSMap.prototype.loadTile = function (opts, callback) {\n    const bm = this;\n    const promises = (0,_util__WEBPACK_IMPORTED_MODULE_0__.initTileMap)(bm, opts);\n    Promise.all(promises).then(() => {\n      bm._drawMap();\n      if (callback && typeof callback === 'function') {\n        callback();\n      }\n    }).catch(err => {\n      console.error(err);\n    });\n  };\n\n  // 点击返回地图坐标\n  BSMap.prototype.onClickMap = function (callback) {\n    if (callback && typeof callback === 'function') {\n      BSMap.prototype._onClickMap = callback;\n    }\n  };\n  BSMap.prototype.onChangeCompany = function (callback) {\n    const bm = this;\n    if (callback && typeof callback === \"function\") {\n      bm._onChangeCompany = callback;\n    }\n  };\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29yZS9iYXNlLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2Jhb3NpZ2h0LW1hcC8uL3NyYy9jb3JlL2Jhc2UuanM/MGQ2MyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBpbml0VGlsZU1hcCB9IGZyb20gJy4uL3V0aWwnXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gYmFzZU1peGluKEJTTWFwKSB7XHJcbiAgLy8g5Yqg6L295Zyw5Zu+5Zu+54mHXHJcbiAgQlNNYXAucHJvdG90eXBlLl9sb2FkID0gZnVuY3Rpb24gKHNyYywgd2lkdGgsIGhlaWdodCwgY2FsbGJhY2spIHtcclxuICAgIGNvbnN0IGJtID0gdGhpc1xyXG5cclxuICAgIGJtLmlzVGlsZSA9IGZhbHNlXHJcblxyXG4gICAgaWYgKHR5cGVvZiBzcmMgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgIGJtLm1hcCA9IG5ldyBJbWFnZSgpXHJcbiAgICAgIGJtLm1hcC5zcmMgPSBzcmNcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGJtLm1hcCA9IHNyY1xyXG4gICAgfVxyXG5cclxuICAgIGJtLm1hcFdpZHRoID0gd2lkdGhcclxuICAgIGJtLm1hcEhlaWdodCA9IGhlaWdodFxyXG5cclxuICAgIGJtLm1hcC5vbmxvYWQgPSAoKSA9PiB7XHJcbiAgICAgIGJtLl9pbml0TWFwUmVjdChibS5tYXAubmF0dXJhbFdpZHRoLCBibS5tYXAubmF0dXJhbEhlaWdodClcclxuICAgICAgYm0uX2RyYXdNYXAoYm0pXHJcblxyXG4gICAgICBjYWxsYmFjayAmJiBjYWxsYmFjaygpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBCU01hcC5wcm90b3R5cGUubG9hZCA9IGZ1bmN0aW9uIChwMSwgcDIsIHAzLCBwNCkge1xyXG4gICAgY29uc3QgYm0gPSB0aGlzXHJcbiAgICBsZXQgc3JjLCB3aWR0aCwgaGVpZ2h0LCBjYWxsYmFjaywgem9vbSwgY2VudGVyXHJcblxyXG4gICAgaWYgKHR5cGVvZiBwMSA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIHAyID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgIHNyYyA9IHAxLnNyY1xyXG4gICAgICB3aWR0aCA9IHAxLnNpemVbMF1cclxuICAgICAgaGVpZ2h0ID0gcDEuc2l6ZVsxXVxyXG4gICAgICB6b29tID0gcDEuem9vbSB8fCBibS56b29tXHJcbiAgICAgIGNlbnRlciA9IHAxLmNlbnRlciB8fCBibS5jZW50ZXJcclxuICAgICAgY2FsbGJhY2sgPSBwMlxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgc3JjID0gcDFcclxuICAgICAgd2lkdGggPSBwMlxyXG4gICAgICBoZWlnaHQgPSBwM1xyXG4gICAgICBjYWxsYmFjayA9IHA0XHJcbiAgICB9XHJcblxyXG4gICAgYm0uaXNUaWxlID0gZmFsc2VcclxuXHJcbiAgICBpZiAodHlwZW9mIHNyYyA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgYm0ubWFwID0gbmV3IEltYWdlKClcclxuICAgICAgYm0ubWFwLnNyYyA9IHNyY1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgYm0ubWFwID0gc3JjXHJcbiAgICB9XHJcblxyXG4gICAgYm0ubWFwV2lkdGggPSB3aWR0aFxyXG4gICAgYm0ubWFwSGVpZ2h0ID0gaGVpZ2h0XHJcbiAgICBibS56b29tID0gem9vbVxyXG4gICAgYm0uY2VudGVyID0gY2VudGVyXHJcblxyXG4gICAgYm0ubWFwLm9ubG9hZCA9ICgpID0+IHtcclxuICAgICAgYm0uX2luaXRNYXBSZWN0KGJtLm1hcC5uYXR1cmFsV2lkdGgsIGJtLm1hcC5uYXR1cmFsSGVpZ2h0KVxyXG4gICAgICBibS5fZHJhd01hcChibSlcclxuXHJcbiAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKClcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIOebkeWQrOWcsOWbvue8qeaUvlxyXG4gIEJTTWFwLnByb3RvdHlwZS5vblpvb20gPSBmdW5jdGlvbihjYWxsYmFjaykge1xyXG4gICAgY29uc3QgYm0gPSB0aGlzXHJcblxyXG4gICAgaWYgKGNhbGxiYWNrICYmIHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICBibS5fdXBkYXRlWm9vbSA9IGNhbGxiYWNrXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyDliqDovb3nk6bniYflnLDlm75cclxuICBCU01hcC5wcm90b3R5cGUubG9hZFRpbGUgPSBmdW5jdGlvbiAob3B0cywgY2FsbGJhY2spIHtcclxuICAgIGNvbnN0IGJtID0gdGhpc1xyXG4gICAgY29uc3QgcHJvbWlzZXMgPSBpbml0VGlsZU1hcChibSwgb3B0cylcclxuXHJcbiAgICBQcm9taXNlLmFsbChwcm9taXNlcylcclxuICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgIGJtLl9kcmF3TWFwKClcclxuICAgICAgICBpZiAoY2FsbGJhY2sgJiYgdHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICBjYWxsYmFjaygpXHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goZXJyID0+IHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKGVycilcclxuICAgICAgfSlcclxuICB9XHJcblxyXG4gIC8vIOeCueWHu+i/lOWbnuWcsOWbvuWdkOagh1xyXG4gIEJTTWFwLnByb3RvdHlwZS5vbkNsaWNrTWFwID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XHJcbiAgICBpZiAoY2FsbGJhY2sgJiYgdHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgIEJTTWFwLnByb3RvdHlwZS5fb25DbGlja01hcCA9IGNhbGxiYWNrXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBCU01hcC5wcm90b3R5cGUub25DaGFuZ2VDb21wYW55ID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XHJcbiAgICBjb25zdCBibSA9IHRoaXNcclxuXHJcbiAgICBpZihjYWxsYmFjayAmJiB0eXBlb2YgY2FsbGJhY2sgPT09IFwiZnVuY3Rpb25cIil7XHJcbiAgICAgIGJtLl9vbkNoYW5nZUNvbXBhbnkgPSBjYWxsYmFjaztcclxuICAgIH1cclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/core/base.js\n");

/***/ }),

/***/ "./src/core/custom.js":
/*!****************************!*\
  !*** ./src/core/custom.js ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   customMixin: () => (/* binding */ customMixin),\n/* harmony export */   mergeOptions: () => (/* binding */ mergeOptions),\n/* harmony export */   processOptions: () => (/* binding */ processOptions)\n/* harmony export */ });\n/* harmony import */ var _util__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../util */ \"./src/util/index.js\");\n\nfunction customMixin(BSMap) {\n  BSMap.prototype.loadToolOptions = BSMap.prototype.updateToolOptions = function (option) {\n    const bm = this;\n    bm.companyList = processOptions(option, bm);\n    (0,_util__WEBPACK_IMPORTED_MODULE_0__.createTooltip)(bm);\n  };\n}\nconst companyOptions = {\n  center: [-1, -1],\n  zoom: 2\n};\nfunction processOptions(option, bm) {\n  let optionList = [];\n  if (Array.isArray(option)) {\n    optionList = option;\n  } else {\n    optionList = [option];\n  }\n  optionList = optionList.map(option => mergeOptions(option));\n  return optionList;\n}\nfunction mergeOptions(option) {\n  const opts = Object.assign({}, companyOptions, option);\n  return Object.assign({}, opts, {\n    id: option.id,\n    name: option.name,\n    center: opts.center,\n    zoom: opts.zoom\n  });\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29yZS9jdXN0b20uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYmFvc2lnaHQtbWFwLy4vc3JjL2NvcmUvY3VzdG9tLmpzPzk0ZTkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlVG9vbHRpcCB9IGZyb20gXCIuLi91dGlsXCJcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjdXN0b21NaXhpbihCU01hcCl7XHJcbiAgQlNNYXAucHJvdG90eXBlLmxvYWRUb29sT3B0aW9ucyA9IEJTTWFwLnByb3RvdHlwZS51cGRhdGVUb29sT3B0aW9ucyA9IGZ1bmN0aW9uKG9wdGlvbil7XHJcbiAgICBjb25zdCBibSA9IHRoaXNcclxuICAgIGJtLmNvbXBhbnlMaXN0ID0gcHJvY2Vzc09wdGlvbnMob3B0aW9uLGJtKVxyXG4gICAgY3JlYXRlVG9vbHRpcChibSlcclxuICB9XHJcbn1cclxuXHJcbmNvbnN0IGNvbXBhbnlPcHRpb25zID0ge1xyXG4gIGNlbnRlcjpbLTEsLTFdLFxyXG4gIHpvb206MlxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcHJvY2Vzc09wdGlvbnMob3B0aW9uLGJtKXtcclxuICBsZXQgb3B0aW9uTGlzdCA9IFtdXHJcblxyXG4gIGlmKEFycmF5LmlzQXJyYXkob3B0aW9uKSl7XHJcbiAgICBvcHRpb25MaXN0ID0gb3B0aW9uXHJcbiAgfWVsc2V7XHJcbiAgICBvcHRpb25MaXN0ID0gW29wdGlvbl1cclxuICB9XHJcblxyXG4gIG9wdGlvbkxpc3QgPSBvcHRpb25MaXN0Lm1hcChvcHRpb24gPT4gbWVyZ2VPcHRpb25zKG9wdGlvbikpXHJcblxyXG4gIHJldHVybiBvcHRpb25MaXN0XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBtZXJnZU9wdGlvbnMob3B0aW9uKXtcclxuICBjb25zdCBvcHRzID0gT2JqZWN0LmFzc2lnbih7fSxjb21wYW55T3B0aW9ucyxvcHRpb24pXHJcblxyXG4gIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCBvcHRzLHtcclxuICAgIGlkOm9wdGlvbi5pZCxcclxuICAgIG5hbWU6b3B0aW9uLm5hbWUsXHJcbiAgICBjZW50ZXI6b3B0cy5jZW50ZXIsXHJcbiAgICB6b29tOm9wdHMuem9vbVxyXG4gIH0pXHJcbn0iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/core/custom.js\n");

/***/ }),

/***/ "./src/core/draw.js":
/*!**************************!*\
  !*** ./src/core/draw.js ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   _drawAll: () => (/* binding */ _drawAll),\n/* harmony export */   _drawBoxSelectRect: () => (/* binding */ _drawBoxSelectRect),\n/* harmony export */   _drawMap: () => (/* binding */ _drawMap),\n/* harmony export */   _initMapRect: () => (/* binding */ _initMapRect)\n/* harmony export */ });\n/* harmony import */ var _util__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../util */ \"./src/util/index.js\");\n/* harmony import */ var _ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../ui */ \"./src/ui/index.js\");\n\n\n\n/* init background size & position */\nfunction _initMapRect(imgWidth, imgHeight) {\n  const bm = this;\n  const width = bm.width; // 地图显示宽度\n  const height = bm.height; // 地图显示高度\n  const canvasRate = width / height;\n  const imgRate = imgWidth / imgHeight;\n  bm.zoom = _setInitZoom(bm);\n  bm.center = _setInitCenter(bm);\n  const rect = {\n    x: 0,\n    y: 0,\n    width: 0,\n    height: 0,\n    mapOriginWidth: imgWidth,\n    mapOriginHeight: imgHeight\n  };\n\n  // 根据地图中心点位置计算地图rect\n  bm.scale = Math.pow(bm.step, bm.zoom - 2);\n  if (canvasRate >= imgRate) {\n    // 宽度撑满\n    rect.width = Math.round(width);\n    rect.height = Math.round(imgHeight / imgWidth * width);\n    // rect.x = Math.round((width - rect.width * bm.scale) / 2)\n    // rect.y = 0\n  } else {\n    // 高度撑满\n    rect.height = Math.round(height);\n    rect.width = Math.round(imgWidth / imgHeight * height);\n    // rect.x = 0\n    // rect.y = Math.round((height - rect.height * bm.scale) / 2)\n  }\n\n  bm.rect = _setInitRect(bm, rect);\n}\n\n/* draw background map img */\nfunction _drawMap() {\n  const bm = this;\n  bm.contextMap && bm.contextMap.clearRect(0, 0, bm.width, bm.height);\n  if (bm.isTile) {\n    _drawTileMap(bm);\n  } else {\n    _drawSingleMap(bm);\n  }\n}\n\n/* draw all */\nfunction _drawAll() {\n  const bm = this;\n  bm._drawMap();\n  bm._drawMarker();\n  bm._drawFence();\n}\n\n/* 画点位框选矩形 */\nfunction _drawBoxSelectRect(e, bm) {\n  const startPos = bm.startDragPosition;\n  const endPos = (0,_util__WEBPACK_IMPORTED_MODULE_0__.windows2canvas)(e.clientX, e.clientY, bm.canvasMouse);\n  _drawRectangle(bm.canvasMouse, bm.contextMouse, startPos.x, startPos.y, endPos.x - startPos.x, endPos.y - startPos.y, 0);\n}\n\n// 画矩形\nfunction _drawRectangle(canvas, ctx, x, y, width, height, colorIdx = 0) {\n  ctx.clearRect(0, 0, canvas.width, canvas.height);\n  ctx.lineWidth = 1;\n  ctx.strokeStyle = _ui__WEBPACK_IMPORTED_MODULE_1__.strokeColors[colorIdx];\n  ctx.fillStyle = _ui__WEBPACK_IMPORTED_MODULE_1__.fillColors[colorIdx];\n  ctx.beginPath();\n  ctx.rect(x, y, width, height);\n  ctx.fill();\n  ctx.stroke();\n  ctx.closePath();\n}\n\n// 画单独一张地图\nfunction _drawSingleMap(bm) {\n  bm.scale = Math.pow(bm.step, bm.zoom - 2);\n  bm.contextMap.drawImage(bm.map, bm.rect.x, bm.rect.y, bm.rect.width * bm.scale, bm.rect.height * bm.scale);\n}\n\n// 画瓦片地图\nfunction _drawTileMap(bm) {\n  const idx = (0,_util__WEBPACK_IMPORTED_MODULE_0__.getTileIndex)(bm);\n  const currentTile = bm.tileList[idx];\n  const lastSize = bm.tileLastMapSize[idx];\n  const {\n    row,\n    column,\n    list\n  } = currentTile;\n  bm.scale = Math.pow(bm.step, bm.zoom - 2);\n  if (currentTile.rect === null) {\n    bm._initMapRect((column - 1) * 256 + lastSize.w, (row - 1) * 256 + lastSize.h);\n    currentTile.rect = bm.rect;\n  }\n  list.map(v => {\n    const {\n      width,\n      height,\n      filename\n    } = v;\n    if (width === 0 && height === 0) {\n      const img = new Image();\n      img.src = filename;\n      img.onload = () => {\n        v.width = img.naturalWidth;\n        v.height = img.naturalHeight;\n        v.img = img;\n        _drawSingleTileMap(v);\n      };\n    } else {\n      _drawSingleTileMap(v);\n    }\n  });\n  function _drawSingleTileMap(item) {\n    const {\n      row,\n      column,\n      width,\n      height\n    } = item;\n    const baseX = bm.rect.x;\n    const baseY = bm.rect.y;\n    const rateX = currentTile.rect.width / currentTile.rect.mapOriginWidth;\n    const rateY = currentTile.rect.height / currentTile.rect.mapOriginHeight;\n    const startX = baseX + (column - 1) * 256 * rateX * bm.scale;\n    const startY = baseY + (row - 1) * 256 * rateY * bm.scale;\n    const imgWidth = width * bm.scale * rateX;\n    const imgHeight = height * bm.scale * rateY;\n    if (startX < 0 && startX + imgWidth < 0 || startY < 0 && startY + imgHeight < 0 || startX > bm.width || startY > bm.height) {\n      return;\n    } else {\n      bm.contextMap.drawImage(item.img, startX, startY, imgWidth, imgHeight);\n    }\n  }\n}\n\n// zoom边界判断\nfunction _setInitZoom(bm) {\n  let zoom = Number(bm.zoom);\n\n  // zoom是整数\n  if (!Number.isInteger(zoom)) zoom = 2;\n  if (zoom > bm.maxZoom) zoom = bm.maxZoom;\n  if (zoom < bm.minZoom) zoom = bm.minZoom;\n  return zoom;\n}\n\n// center边界判断\nfunction _setInitCenter(bm) {\n  let center = bm.center;\n  if (!Array.isArray(center) || center.length !== 2) center = [-1, -1];\n  // 边界判断\n  if (center[0] === -1 || center[1] === -1) {\n    center[0] = bm.mapWidth / 2;\n    center[1] = bm.mapHeight / 2;\n    return center;\n  }\n  if (bm.center[0] < 0) center[0] = 0;\n  if (bm.center[0] > bm.mapWidth) center[0] = bm.mapWidth;\n  if (bm.center[1] < 0) center[1] = 0;\n  if (bm.center[1] > bm.mapHeight) center[1] = bm.mapHeight;\n  return center;\n}\n\n// 计算rect\nfunction _setInitRect(bm, rect) {\n  const scale = bm.scale;\n  const widthRate = bm.center[0] / bm.mapWidth;\n  const rectXGap = rect.width * scale * widthRate;\n  rect.x = bm.width / 2 - rectXGap;\n  const heightRate = bm.center[1] / bm.mapHeight;\n  const rectYGap = rect.height * scale * heightRate;\n  rect.y = bm.height / 2 - rectYGap;\n  return rect;\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29yZS9kcmF3LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBU0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBT0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9iYW9zaWdodC1tYXAvLi9zcmMvY29yZS9kcmF3LmpzP2NlMzYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgd2luZG93czJjYW52YXMsIGdldFRpbGVJbmRleCB9IGZyb20gJy4uL3V0aWwnXHJcbmltcG9ydCB7IGZpbGxDb2xvcnMsIHN0cm9rZUNvbG9ycyB9IGZyb20gJy4uL3VpJ1xyXG5cclxuLyogaW5pdCBiYWNrZ3JvdW5kIHNpemUgJiBwb3NpdGlvbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gX2luaXRNYXBSZWN0KGltZ1dpZHRoLCBpbWdIZWlnaHQpIHtcclxuICBjb25zdCBibSA9IHRoaXNcclxuICBjb25zdCB3aWR0aCA9IGJtLndpZHRoIC8vIOWcsOWbvuaYvuekuuWuveW6plxyXG4gIGNvbnN0IGhlaWdodCA9IGJtLmhlaWdodCAvLyDlnLDlm77mmL7npLrpq5jluqZcclxuICBjb25zdCBjYW52YXNSYXRlID0gd2lkdGggLyBoZWlnaHRcclxuICBjb25zdCBpbWdSYXRlID0gaW1nV2lkdGggLyBpbWdIZWlnaHRcclxuXHJcbiAgYm0uem9vbSA9IF9zZXRJbml0Wm9vbShibSlcclxuICBibS5jZW50ZXIgPSBfc2V0SW5pdENlbnRlcihibSlcclxuXHJcbiAgY29uc3QgcmVjdCA9IHtcclxuICAgIHg6IDAsXHJcbiAgICB5OiAwLFxyXG4gICAgd2lkdGg6IDAsXHJcbiAgICBoZWlnaHQ6IDAsXHJcbiAgICBtYXBPcmlnaW5XaWR0aDogaW1nV2lkdGgsXHJcbiAgICBtYXBPcmlnaW5IZWlnaHQ6IGltZ0hlaWdodFxyXG4gIH1cclxuXHJcbiAgLy8g5qC55o2u5Zyw5Zu+5Lit5b+D54K55L2N572u6K6h566X5Zyw5Zu+cmVjdFxyXG4gIGJtLnNjYWxlID0gTWF0aC5wb3coYm0uc3RlcCwgYm0uem9vbSAtIDIpXHJcblxyXG4gIGlmIChjYW52YXNSYXRlID49IGltZ1JhdGUpIHtcclxuICAgIC8vIOWuveW6puaSkea7oVxyXG4gICAgcmVjdC53aWR0aCA9IE1hdGgucm91bmQod2lkdGgpXHJcbiAgICByZWN0LmhlaWdodCA9IE1hdGgucm91bmQoKGltZ0hlaWdodCAvIGltZ1dpZHRoKSAqIHdpZHRoKVxyXG4gICAgLy8gcmVjdC54ID0gTWF0aC5yb3VuZCgod2lkdGggLSByZWN0LndpZHRoICogYm0uc2NhbGUpIC8gMilcclxuICAgIC8vIHJlY3QueSA9IDBcclxuICB9IGVsc2Uge1xyXG4gICAgLy8g6auY5bqm5pKR5ruhXHJcbiAgICByZWN0LmhlaWdodCA9IE1hdGgucm91bmQoaGVpZ2h0KVxyXG4gICAgcmVjdC53aWR0aCA9IE1hdGgucm91bmQoKGltZ1dpZHRoIC8gaW1nSGVpZ2h0KSAqIGhlaWdodClcclxuICAgIC8vIHJlY3QueCA9IDBcclxuICAgIC8vIHJlY3QueSA9IE1hdGgucm91bmQoKGhlaWdodCAtIHJlY3QuaGVpZ2h0ICogYm0uc2NhbGUpIC8gMilcclxuICB9XHJcblxyXG4gIGJtLnJlY3QgPSBfc2V0SW5pdFJlY3QoYm0sIHJlY3QpXHJcbn1cclxuXHJcbi8qIGRyYXcgYmFja2dyb3VuZCBtYXAgaW1nICovXHJcbmV4cG9ydCBmdW5jdGlvbiBfZHJhd01hcCgpIHtcclxuICBjb25zdCBibSA9IHRoaXNcclxuICBibS5jb250ZXh0TWFwICYmIGJtLmNvbnRleHRNYXAuY2xlYXJSZWN0KDAsIDAsIGJtLndpZHRoLCBibS5oZWlnaHQpXHJcblxyXG4gIGlmIChibS5pc1RpbGUpIHtcclxuICAgIF9kcmF3VGlsZU1hcChibSlcclxuICB9IGVsc2Uge1xyXG4gICAgX2RyYXdTaW5nbGVNYXAoYm0pXHJcbiAgfVxyXG59XHJcblxyXG4vKiBkcmF3IGFsbCAqL1xyXG5leHBvcnQgZnVuY3Rpb24gX2RyYXdBbGwoKSB7XHJcbiAgY29uc3QgYm0gPSB0aGlzXHJcbiAgYm0uX2RyYXdNYXAoKVxyXG4gIGJtLl9kcmF3TWFya2VyKClcclxuICBibS5fZHJhd0ZlbmNlKClcclxufVxyXG5cclxuLyog55S754K55L2N5qGG6YCJ55+p5b2iICovXHJcbmV4cG9ydCBmdW5jdGlvbiBfZHJhd0JveFNlbGVjdFJlY3QoZSwgYm0pIHtcclxuICBjb25zdCBzdGFydFBvcyA9IGJtLnN0YXJ0RHJhZ1Bvc2l0aW9uXHJcbiAgY29uc3QgZW5kUG9zID0gd2luZG93czJjYW52YXMoZS5jbGllbnRYLCBlLmNsaWVudFksIGJtLmNhbnZhc01vdXNlKVxyXG5cclxuICBfZHJhd1JlY3RhbmdsZShcclxuICAgIGJtLmNhbnZhc01vdXNlLFxyXG4gICAgYm0uY29udGV4dE1vdXNlLFxyXG4gICAgc3RhcnRQb3MueCxcclxuICAgIHN0YXJ0UG9zLnksXHJcbiAgICBlbmRQb3MueCAtIHN0YXJ0UG9zLngsXHJcbiAgICBlbmRQb3MueSAtIHN0YXJ0UG9zLnksXHJcbiAgICAwXHJcbiAgKVxyXG59XHJcblxyXG4vLyDnlLvnn6nlvaJcclxuZnVuY3Rpb24gX2RyYXdSZWN0YW5nbGUoY2FudmFzLCBjdHgsIHgsIHksIHdpZHRoLCBoZWlnaHQsIGNvbG9ySWR4ID0gMCkge1xyXG4gIGN0eC5jbGVhclJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KVxyXG4gIGN0eC5saW5lV2lkdGggPSAxXHJcbiAgY3R4LnN0cm9rZVN0eWxlID0gc3Ryb2tlQ29sb3JzW2NvbG9ySWR4XVxyXG4gIGN0eC5maWxsU3R5bGUgPSBmaWxsQ29sb3JzW2NvbG9ySWR4XVxyXG4gIGN0eC5iZWdpblBhdGgoKVxyXG4gIGN0eC5yZWN0KHgsIHksIHdpZHRoLCBoZWlnaHQpXHJcbiAgY3R4LmZpbGwoKVxyXG4gIGN0eC5zdHJva2UoKVxyXG4gIGN0eC5jbG9zZVBhdGgoKVxyXG59XHJcblxyXG4vLyDnlLvljZXni6zkuIDlvKDlnLDlm75cclxuZnVuY3Rpb24gX2RyYXdTaW5nbGVNYXAoYm0pIHtcclxuICBibS5zY2FsZSA9IE1hdGgucG93KGJtLnN0ZXAsIGJtLnpvb20gLSAyKVxyXG4gIGJtLmNvbnRleHRNYXAuZHJhd0ltYWdlKFxyXG4gICAgYm0ubWFwLFxyXG4gICAgYm0ucmVjdC54LFxyXG4gICAgYm0ucmVjdC55LFxyXG4gICAgYm0ucmVjdC53aWR0aCAqIGJtLnNjYWxlLFxyXG4gICAgYm0ucmVjdC5oZWlnaHQgKiBibS5zY2FsZVxyXG4gIClcclxufVxyXG5cclxuLy8g55S755Om54mH5Zyw5Zu+XHJcbmZ1bmN0aW9uIF9kcmF3VGlsZU1hcChibSkge1xyXG4gIGNvbnN0IGlkeCA9IGdldFRpbGVJbmRleChibSlcclxuICBjb25zdCBjdXJyZW50VGlsZSA9IGJtLnRpbGVMaXN0W2lkeF1cclxuICBjb25zdCBsYXN0U2l6ZSA9IGJtLnRpbGVMYXN0TWFwU2l6ZVtpZHhdXHJcblxyXG4gIGNvbnN0IHsgcm93LCBjb2x1bW4sIGxpc3QgfSA9IGN1cnJlbnRUaWxlXHJcbiAgYm0uc2NhbGUgPSBNYXRoLnBvdyhibS5zdGVwLCBibS56b29tIC0gMilcclxuXHJcbiAgaWYgKGN1cnJlbnRUaWxlLnJlY3QgPT09IG51bGwpIHtcclxuICAgIGJtLl9pbml0TWFwUmVjdCgoY29sdW1uIC0gMSkgKiAyNTYgKyBsYXN0U2l6ZS53LCAocm93IC0gMSkgKiAyNTYgKyBsYXN0U2l6ZS5oKVxyXG4gICAgY3VycmVudFRpbGUucmVjdCA9IGJtLnJlY3RcclxuICB9XHJcblxyXG4gIGxpc3QubWFwKHYgPT4ge1xyXG4gICAgY29uc3QgeyB3aWR0aCwgaGVpZ2h0LCBmaWxlbmFtZSB9ID0gdlxyXG5cclxuICAgIGlmICh3aWR0aCA9PT0gMCAmJiBoZWlnaHQgPT09IDApIHtcclxuICAgICAgY29uc3QgaW1nID0gbmV3IEltYWdlKClcclxuICAgICAgaW1nLnNyYyA9IGZpbGVuYW1lXHJcbiAgICAgIGltZy5vbmxvYWQgPSAoKSA9PiB7XHJcbiAgICAgICAgdi53aWR0aCA9IGltZy5uYXR1cmFsV2lkdGhcclxuICAgICAgICB2LmhlaWdodCA9IGltZy5uYXR1cmFsSGVpZ2h0XHJcbiAgICAgICAgdi5pbWcgPSBpbWdcclxuXHJcbiAgICAgICAgX2RyYXdTaW5nbGVUaWxlTWFwKHYpXHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIF9kcmF3U2luZ2xlVGlsZU1hcCh2KVxyXG4gICAgfVxyXG4gIH0pXHJcblxyXG4gIGZ1bmN0aW9uIF9kcmF3U2luZ2xlVGlsZU1hcChpdGVtKSB7XHJcbiAgICBjb25zdCB7IHJvdywgY29sdW1uLCB3aWR0aCwgaGVpZ2h0IH0gPSBpdGVtXHJcbiAgICBjb25zdCBiYXNlWCA9IGJtLnJlY3QueFxyXG4gICAgY29uc3QgYmFzZVkgPSBibS5yZWN0LnlcclxuICAgIGNvbnN0IHJhdGVYID0gY3VycmVudFRpbGUucmVjdC53aWR0aCAvIGN1cnJlbnRUaWxlLnJlY3QubWFwT3JpZ2luV2lkdGhcclxuICAgIGNvbnN0IHJhdGVZID0gY3VycmVudFRpbGUucmVjdC5oZWlnaHQgLyBjdXJyZW50VGlsZS5yZWN0Lm1hcE9yaWdpbkhlaWdodFxyXG4gICAgY29uc3Qgc3RhcnRYID0gYmFzZVggKyAoY29sdW1uIC0gMSkgKiAyNTYgKiByYXRlWCAqIGJtLnNjYWxlXHJcbiAgICBjb25zdCBzdGFydFkgPSBiYXNlWSArIChyb3cgLSAxKSAqIDI1NiAqIHJhdGVZICogYm0uc2NhbGVcclxuICAgIGNvbnN0IGltZ1dpZHRoID0gd2lkdGggKiBibS5zY2FsZSAqIHJhdGVYXHJcbiAgICBjb25zdCBpbWdIZWlnaHQgPSBoZWlnaHQgKiBibS5zY2FsZSAqIHJhdGVZXHJcblxyXG4gICAgaWYgKFxyXG4gICAgICAoc3RhcnRYIDwgMCAmJiBzdGFydFggKyBpbWdXaWR0aCA8IDApIHx8XHJcbiAgICAgIChzdGFydFkgPCAwICYmIHN0YXJ0WSArIGltZ0hlaWdodCA8IDApIHx8XHJcbiAgICAgIHN0YXJ0WCA+IGJtLndpZHRoIHx8XHJcbiAgICAgIHN0YXJ0WSA+IGJtLmhlaWdodFxyXG4gICAgKSB7XHJcbiAgICAgIHJldHVyblxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgYm0uY29udGV4dE1hcC5kcmF3SW1hZ2UoaXRlbS5pbWcsIHN0YXJ0WCwgc3RhcnRZLCBpbWdXaWR0aCwgaW1nSGVpZ2h0KVxyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuLy8gem9vbei+ueeVjOWIpOaWrVxyXG5mdW5jdGlvbiBfc2V0SW5pdFpvb20oYm0pIHtcclxuICBsZXQgem9vbSA9IE51bWJlcihibS56b29tKVxyXG5cclxuICAvLyB6b29t5piv5pW05pWwXHJcbiAgaWYgKCFOdW1iZXIuaXNJbnRlZ2VyKHpvb20pKSB6b29tID0gMlxyXG4gIGlmICh6b29tID4gYm0ubWF4Wm9vbSkgem9vbSA9IGJtLm1heFpvb21cclxuICBpZiAoem9vbSA8IGJtLm1pblpvb20pIHpvb20gPSBibS5taW5ab29tXHJcblxyXG4gIHJldHVybiB6b29tXHJcbn1cclxuXHJcbi8vIGNlbnRlcui+ueeVjOWIpOaWrVxyXG5mdW5jdGlvbiBfc2V0SW5pdENlbnRlcihibSkge1xyXG4gIGxldCBjZW50ZXIgPSBibS5jZW50ZXJcclxuXHJcbiAgaWYgKCFBcnJheS5pc0FycmF5KGNlbnRlcikgfHwgY2VudGVyLmxlbmd0aCAhPT0gMikgY2VudGVyID0gWy0xLCAtMV1cclxuICAvLyDovrnnlYzliKTmlq1cclxuICBpZiAoY2VudGVyWzBdID09PSAtMSB8fCBjZW50ZXJbMV0gPT09IC0xKSB7XHJcbiAgICBjZW50ZXJbMF0gPSBibS5tYXBXaWR0aCAvIDJcclxuICAgIGNlbnRlclsxXSA9IGJtLm1hcEhlaWdodCAvIDJcclxuXHJcbiAgICByZXR1cm4gY2VudGVyXHJcbiAgfVxyXG5cclxuICBpZiAoYm0uY2VudGVyWzBdIDwgMCkgY2VudGVyWzBdID0gMFxyXG4gIGlmIChibS5jZW50ZXJbMF0gPiBibS5tYXBXaWR0aCkgY2VudGVyWzBdID0gYm0ubWFwV2lkdGhcclxuXHJcbiAgaWYgKGJtLmNlbnRlclsxXSA8IDApIGNlbnRlclsxXSA9IDBcclxuICBpZiAoYm0uY2VudGVyWzFdID4gYm0ubWFwSGVpZ2h0KSBjZW50ZXJbMV0gPSBibS5tYXBIZWlnaHRcclxuXHJcbiAgcmV0dXJuIGNlbnRlclxyXG59XHJcblxyXG4vLyDorqHnrpdyZWN0XHJcbmZ1bmN0aW9uIF9zZXRJbml0UmVjdChibSwgcmVjdCkge1xyXG4gIGNvbnN0IHNjYWxlID0gYm0uc2NhbGVcclxuICBjb25zdCB3aWR0aFJhdGUgPSBibS5jZW50ZXJbMF0gLyBibS5tYXBXaWR0aFxyXG4gIGNvbnN0IHJlY3RYR2FwID0gcmVjdC53aWR0aCAqIHNjYWxlICogd2lkdGhSYXRlXHJcbiAgcmVjdC54ID0gYm0ud2lkdGggLyAyIC0gcmVjdFhHYXBcclxuXHJcbiAgY29uc3QgaGVpZ2h0UmF0ZSA9IGJtLmNlbnRlclsxXSAvIGJtLm1hcEhlaWdodFxyXG4gIGNvbnN0IHJlY3RZR2FwID0gcmVjdC5oZWlnaHQgKiBzY2FsZSAqIGhlaWdodFJhdGVcclxuICByZWN0LnkgPSBibS5oZWlnaHQgLyAyIC0gcmVjdFlHYXBcclxuXHJcbiAgcmV0dXJuIHJlY3RcclxufVxyXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/core/draw.js\n");

/***/ }),

/***/ "./src/core/event.js":
/*!***************************!*\
  !*** ./src/core/event.js ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   onDblClick: () => (/* binding */ onDblClick),\n/* harmony export */   onMouseDown: () => (/* binding */ onMouseDown),\n/* harmony export */   onMouseMove: () => (/* binding */ onMouseMove),\n/* harmony export */   onMouseUp: () => (/* binding */ onMouseUp)\n/* harmony export */ });\n/* harmony import */ var _util__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../util */ \"./src/util/index.js\");\n/* harmony import */ var _draw__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./draw */ \"./src/core/draw.js\");\n/* harmony import */ var _marker__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./marker */ \"./src/core/marker.js\");\n/* harmony import */ var _fence__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./fence */ \"./src/core/fence.js\");\n\n\n\n\nlet selectedMarker = null;\nlet selectedFence = null;\nlet hasDrawMarkerText = false;\nfunction onMouseDown(e, bm) {\n  if (e.button === 2) return;\n  bm.isMouseDown = true;\n  const pos = (0,_util__WEBPACK_IMPORTED_MODULE_0__.windows2canvas)(e.clientX, e.clientY, bm.canvasMouse);\n  bm.startDragPosition = pos;\n\n  // 移动marker\n  if (bm.moveMarkerFlag) {\n    if (!bm.markerList || !bm.markerList.length) return;\n\n    // 找出选择的点位\n    selectedMarker = (0,_marker__WEBPACK_IMPORTED_MODULE_2__.selectMouseOnMarker)(e, bm);\n    if (selectedMarker) {\n      bm._drawMovedMarker(e, selectedMarker);\n    }\n  }\n\n  // 点选marker\n  if (bm.selectMarkerFlag) {\n    if (!bm.markerList || !bm.markerList.length) return;\n\n    // 找出选择的点位\n    selectedMarker = (0,_marker__WEBPACK_IMPORTED_MODULE_2__.selectMouseOnMarker)(e, bm);\n    if (selectedMarker) {\n      bm._onSelectMarker && bm._onSelectMarker(selectedMarker.originMarker);\n    }\n  }\n\n  // 查看marker\n  if (bm.checkMarkerFlag) {\n    if (!bm.markerList || !bm.markerList.length) return;\n\n    // 找出点中的点位\n    selectedMarker = (0,_marker__WEBPACK_IMPORTED_MODULE_2__.selectMouseOnMarker)(e, bm);\n    if (selectedMarker) {\n      bm.isMouseDown = false;\n      bm._onCheckMarker && bm._onCheckMarker(selectedMarker.originMarker);\n    }\n  }\n\n  // 移动fence\n  if (bm.moveFenceFlag) {\n    if (!bm.fenceList || !bm.fenceList.length) return;\n\n    // 找出选择的围栏\n    const list = (0,_fence__WEBPACK_IMPORTED_MODULE_3__.getFenceOnPos)(pos, bm, false);\n    selectedFence = list.length ? list[0] : null;\n    selectedFence = (0,_fence__WEBPACK_IMPORTED_MODULE_3__.setFencePosDiff)(selectedFence, pos);\n  }\n\n  // 画多边形围栏，记录点位\n  if (bm.drawFenceFlag && bm.drawFenceType === 'polygon') {\n    if (!bm.tempFence.path) {\n      bm.tempFence.path = [];\n    }\n    bm.tempFence.path.push(pos);\n  }\n}\nfunction onMouseUp(e, bm) {\n  bm.isMouseDown = false;\n  bm.canvasMouse.style.cursor = 'default';\n\n  // 移动marker end\n  if (bm.moveMarkerFlag && selectedMarker) {\n    // 查找改动的marker\n    bm.markerList.some(m => {\n      if (m.markerId === selectedMarker.markerId) {\n        const position = (0,_marker__WEBPACK_IMPORTED_MODULE_2__.getMarkerPosition)(m, bm, 1.25);\n        m.position = position;\n        m.originMarker.position = position;\n        return true;\n      }\n    });\n    // bm.moveMarkerFlag = false\n    bm._onMoveMarker && bm._onMoveMarker(selectedMarker.originMarker);\n    selectedMarker = null;\n    bm.contextMouse.clearRect(0, 0, bm.width, bm.height);\n    bm._drawMarker();\n    return;\n  }\n\n  // 框选结束\n  if (bm.boxSelectMarkerFlag) {\n    const markers = (0,_marker__WEBPACK_IMPORTED_MODULE_2__.getBoxSelectedMarker)(e, bm);\n    bm._onBoxSelectMarker && bm._onBoxSelectMarker(markers);\n    return;\n  }\n\n  // 移动围栏 end\n  if (bm.moveFenceFlag && selectedFence) {\n    bm.fenceList.some(f => {\n      if (selectedFence.__id === f.__id) {\n        f = (0,_fence__WEBPACK_IMPORTED_MODULE_3__.setMovedFencePosition)(selectedFence, bm);\n        selectedFence = f;\n        return true;\n      }\n    });\n    bm.finishedMoveFence && bm.finishedMoveFence(selectedFence.originFence);\n    selectedFence = null;\n    bm.contextMouse.clearRect(0, 0, bm.width, bm.height);\n    bm._drawFence();\n    return;\n  }\n\n  // 画围栏\n  if (bm.drawFenceFlag) {\n    const f = bm.tempFence;\n    const type = bm.drawFenceType;\n    let fence = {};\n    if (type === 'round') {\n      fence = {\n        type,\n        center: [Math.round((0,_util__WEBPACK_IMPORTED_MODULE_0__.pixel2millimeter)(f.center[0] - bm.rect.x, false, bm) / bm.scale), Math.round((0,_util__WEBPACK_IMPORTED_MODULE_0__.pixel2millimeter)(f.center[1] - bm.rect.y, true, bm) / bm.scale)],\n        radius: Math.round((0,_util__WEBPACK_IMPORTED_MODULE_0__.pixel2millimeter)(f.radius, false, bm) / bm.scale)\n      };\n      bm.finishedDrawFence && bm.finishedDrawFence(fence);\n      bm.tempFence = {};\n    } else if (type === 'rect') {\n      const path = [];\n      f.path.map(v => {\n        path.push({\n          x: Math.round((0,_util__WEBPACK_IMPORTED_MODULE_0__.pixel2millimeter)(v.x - bm.rect.x, false, bm) / bm.scale),\n          y: Math.round((0,_util__WEBPACK_IMPORTED_MODULE_0__.pixel2millimeter)(v.y - bm.rect.y, true, bm) / bm.scale)\n        });\n      });\n      fence = {\n        type,\n        path\n      };\n      bm.finishedDrawFence && bm.finishedDrawFence(fence);\n      bm.tempFence = {};\n    } else {}\n    return;\n  }\n\n  // 点击地图，返回点位左边，选中点位或围栏\n  const pos = (0,_util__WEBPACK_IMPORTED_MODULE_0__.windows2canvas)(e.clientX, e.clientY, bm.canvasMouse);\n  const x = (0,_util__WEBPACK_IMPORTED_MODULE_0__.pixel2millimeter)(pos.x - bm.rect.x, false, bm);\n  const y = (0,_util__WEBPACK_IMPORTED_MODULE_0__.pixel2millimeter)(pos.y - bm.rect.y, true, bm);\n  const marker = (0,_marker__WEBPACK_IMPORTED_MODULE_2__.getMarkerOnPos)(pos, bm);\n  const fence = (0,_fence__WEBPACK_IMPORTED_MODULE_3__.getFenceOnPos)(pos, bm);\n  const res = {\n    x,\n    y\n  };\n  if (marker && marker.length) res.marker = marker;\n  if (fence && fence.length) res.fence = fence;\n  bm._onClickMap && bm._onClickMap(res);\n}\nfunction onMouseMove(e, bm) {\n  // 画围栏\n  if (bm.drawFenceFlag && bm.drawFenceType === 'polygon' && bm.tempFence?.path?.length) {\n    bm._drawCustomFence(e);\n    return;\n  }\n  if (!bm.isMouseDown) {\n    const marker = (0,_marker__WEBPACK_IMPORTED_MODULE_2__.selectMouseOnMarker)(e, bm);\n    if (marker) {\n      bm.canvasMouse.style.cursor = 'pointer';\n      (0,_marker__WEBPACK_IMPORTED_MODULE_2__.drawMarkerText)(marker, bm, true);\n      hasDrawMarkerText = true;\n      return true;\n    } else {\n      bm.canvasMouse.style.cursor = 'default';\n      if (hasDrawMarkerText) {\n        // 清空画布, 清除已经显示的marker text\n        bm.contextMarkerHover.clearRect(0, 0, bm.width, bm.height);\n        hasDrawMarkerText = false;\n      }\n    }\n    return;\n  }\n\n  // 画围栏\n  if (bm.drawFenceFlag) {\n    if (bm.drawFenceType === 'polygon' && bm.tempFence?.path?.length) {\n      bm._drawCustomFence(e);\n    } else {\n      bm._drawCustomFence(e);\n    }\n    return;\n  }\n\n  // 移动marker\n  if (bm.moveMarkerFlag) {\n    if (!selectedMarker) return;\n    bm._drawMovedMarker(e, selectedMarker);\n    return;\n  }\n\n  // 框选marker\n  if (bm.boxSelectMarkerFlag) {\n    (0,_draw__WEBPACK_IMPORTED_MODULE_1__._drawBoxSelectRect)(e, bm);\n    return;\n  }\n\n  // 移动fence\n  if (bm.moveFenceFlag) {\n    if (!selectedFence) return;\n    bm._drawMoveFence(e, selectedFence);\n    return;\n  }\n\n  // 移动地图\n  bm.canvasMouse.style.cursor = 'move';\n  const pos1 = (0,_util__WEBPACK_IMPORTED_MODULE_0__.windows2canvas)(e.clientX, e.clientY, bm.canvasMouse);\n  const x = pos1.x - bm.startDragPosition.x;\n  const y = pos1.y - bm.startDragPosition.y;\n  bm.startDragPosition = pos1;\n  bm.rect.x += x;\n  bm.rect.y += y;\n  bm._drawAll();\n}\nfunction onDblClick(e, bm) {\n  // 画围栏\n  if (bm.drawFenceFlag && bm.drawFenceType === 'polygon') {\n    const f = bm.tempFence;\n    const type = bm.drawFenceType;\n    let fence = {};\n    const path = [];\n    f.path.map(v => {\n      path.push({\n        x: Math.round((0,_util__WEBPACK_IMPORTED_MODULE_0__.pixel2millimeter)(v.x - bm.rect.x, false, bm) / bm.scale),\n        y: Math.round((0,_util__WEBPACK_IMPORTED_MODULE_0__.pixel2millimeter)(v.y - bm.rect.y, true, bm) / bm.scale)\n      });\n    });\n    path.pop();\n    fence = {\n      type,\n      path\n    };\n    bm.finishedDrawFence && bm.finishedDrawFence(fence);\n    bm.tempFence.path = [];\n  }\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29yZS9ldmVudC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQU9BO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2Jhb3NpZ2h0LW1hcC8uL3NyYy9jb3JlL2V2ZW50LmpzPzlkMGYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgd2luZG93czJjYW52YXMsIHBpeGVsMm1pbGxpbWV0ZXIgfSBmcm9tICcuLi91dGlsJ1xyXG5pbXBvcnQgeyBfZHJhd0JveFNlbGVjdFJlY3QgfSBmcm9tICcuL2RyYXcnXHJcbmltcG9ydCB7XHJcbiAgZ2V0TWFya2VyUG9zaXRpb24sXHJcbiAgc2VsZWN0TW91c2VPbk1hcmtlcixcclxuICBnZXRCb3hTZWxlY3RlZE1hcmtlcixcclxuICBnZXRNYXJrZXJPblBvcyxcclxuICBkcmF3TWFya2VyVGV4dFxyXG59IGZyb20gJy4vbWFya2VyJ1xyXG5pbXBvcnQgeyBnZXRGZW5jZU9uUG9zLCBzZXRGZW5jZVBvc0RpZmYsIHNldE1vdmVkRmVuY2VQb3NpdGlvbiB9IGZyb20gJy4vZmVuY2UnXHJcblxyXG5sZXQgc2VsZWN0ZWRNYXJrZXIgPSBudWxsXHJcbmxldCBzZWxlY3RlZEZlbmNlID0gbnVsbFxyXG5sZXQgaGFzRHJhd01hcmtlclRleHQgPSBmYWxzZVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIG9uTW91c2VEb3duKGUsIGJtKSB7XHJcbiAgaWYgKGUuYnV0dG9uID09PSAyKSByZXR1cm5cclxuXHJcbiAgYm0uaXNNb3VzZURvd24gPSB0cnVlXHJcblxyXG4gIGNvbnN0IHBvcyA9IHdpbmRvd3MyY2FudmFzKGUuY2xpZW50WCwgZS5jbGllbnRZLCBibS5jYW52YXNNb3VzZSlcclxuICBibS5zdGFydERyYWdQb3NpdGlvbiA9IHBvc1xyXG5cclxuICAvLyDnp7vliqhtYXJrZXJcclxuICBpZiAoYm0ubW92ZU1hcmtlckZsYWcpIHtcclxuICAgIGlmICghYm0ubWFya2VyTGlzdCB8fCAhYm0ubWFya2VyTGlzdC5sZW5ndGgpIHJldHVyblxyXG5cclxuICAgIC8vIOaJvuWHuumAieaLqeeahOeCueS9jVxyXG4gICAgc2VsZWN0ZWRNYXJrZXIgPSBzZWxlY3RNb3VzZU9uTWFya2VyKGUsIGJtKVxyXG4gICAgaWYgKHNlbGVjdGVkTWFya2VyKSB7XHJcbiAgICAgIGJtLl9kcmF3TW92ZWRNYXJrZXIoZSwgc2VsZWN0ZWRNYXJrZXIpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyDngrnpgIltYXJrZXJcclxuICBpZiAoYm0uc2VsZWN0TWFya2VyRmxhZykge1xyXG4gICAgaWYgKCFibS5tYXJrZXJMaXN0IHx8ICFibS5tYXJrZXJMaXN0Lmxlbmd0aCkgcmV0dXJuXHJcblxyXG4gICAgLy8g5om+5Ye66YCJ5oup55qE54K55L2NXHJcbiAgICBzZWxlY3RlZE1hcmtlciA9IHNlbGVjdE1vdXNlT25NYXJrZXIoZSwgYm0pXHJcbiAgICBpZiAoc2VsZWN0ZWRNYXJrZXIpIHtcclxuICAgICAgYm0uX29uU2VsZWN0TWFya2VyICYmIGJtLl9vblNlbGVjdE1hcmtlcihzZWxlY3RlZE1hcmtlci5vcmlnaW5NYXJrZXIpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyDmn6XnnIttYXJrZXJcclxuICBpZihibS5jaGVja01hcmtlckZsYWcpIHtcclxuICAgIGlmKCFibS5tYXJrZXJMaXN0IHx8ICFibS5tYXJrZXJMaXN0Lmxlbmd0aCkgcmV0dXJuXHJcblxyXG4gICAgLy8g5om+5Ye654K55Lit55qE54K55L2NXHJcbiAgICBzZWxlY3RlZE1hcmtlciA9IHNlbGVjdE1vdXNlT25NYXJrZXIoZSxibSlcclxuICAgIGlmKHNlbGVjdGVkTWFya2VyKXtcclxuICAgICAgYm0uaXNNb3VzZURvd24gPSBmYWxzZVxyXG4gICAgICBibS5fb25DaGVja01hcmtlciAmJiBibS5fb25DaGVja01hcmtlcihzZWxlY3RlZE1hcmtlci5vcmlnaW5NYXJrZXIpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyDnp7vliqhmZW5jZVxyXG4gIGlmIChibS5tb3ZlRmVuY2VGbGFnKSB7XHJcbiAgICBpZiAoIWJtLmZlbmNlTGlzdCB8fCAhYm0uZmVuY2VMaXN0Lmxlbmd0aCkgcmV0dXJuXHJcblxyXG4gICAgLy8g5om+5Ye66YCJ5oup55qE5Zu05qCPXHJcbiAgICBjb25zdCBsaXN0ID0gZ2V0RmVuY2VPblBvcyhwb3MsIGJtLCBmYWxzZSlcclxuICAgIHNlbGVjdGVkRmVuY2UgPSBsaXN0Lmxlbmd0aCA/IGxpc3RbMF0gOiBudWxsXHJcbiAgICBzZWxlY3RlZEZlbmNlID0gc2V0RmVuY2VQb3NEaWZmKHNlbGVjdGVkRmVuY2UsIHBvcylcclxuICB9XHJcblxyXG4gIC8vIOeUu+Wkmui+ueW9ouWbtOagj++8jOiusOW9leeCueS9jVxyXG4gIGlmIChibS5kcmF3RmVuY2VGbGFnICYmIGJtLmRyYXdGZW5jZVR5cGUgPT09ICdwb2x5Z29uJykge1xyXG4gICAgaWYgKCFibS50ZW1wRmVuY2UucGF0aCkge1xyXG4gICAgICBibS50ZW1wRmVuY2UucGF0aCA9IFtdXHJcbiAgICB9XHJcbiAgICBibS50ZW1wRmVuY2UucGF0aC5wdXNoKHBvcylcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBvbk1vdXNlVXAoZSwgYm0pIHtcclxuICBibS5pc01vdXNlRG93biA9IGZhbHNlXHJcbiAgYm0uY2FudmFzTW91c2Uuc3R5bGUuY3Vyc29yID0gJ2RlZmF1bHQnXHJcblxyXG4gIC8vIOenu+WKqG1hcmtlciBlbmRcclxuICBpZiAoYm0ubW92ZU1hcmtlckZsYWcgJiYgc2VsZWN0ZWRNYXJrZXIpIHtcclxuICAgIC8vIOafpeaJvuaUueWKqOeahG1hcmtlclxyXG4gICAgYm0ubWFya2VyTGlzdC5zb21lKG0gPT4ge1xyXG4gICAgICBpZiAobS5tYXJrZXJJZCA9PT0gc2VsZWN0ZWRNYXJrZXIubWFya2VySWQpIHtcclxuICAgICAgICBjb25zdCBwb3NpdGlvbiA9IGdldE1hcmtlclBvc2l0aW9uKG0sIGJtLCAxLjI1KVxyXG4gICAgICAgIG0ucG9zaXRpb24gPSBwb3NpdGlvblxyXG4gICAgICAgIG0ub3JpZ2luTWFya2VyLnBvc2l0aW9uID0gcG9zaXRpb25cclxuICAgICAgICByZXR1cm4gdHJ1ZVxyXG4gICAgICB9XHJcbiAgICB9KVxyXG4gICAgLy8gYm0ubW92ZU1hcmtlckZsYWcgPSBmYWxzZVxyXG4gICAgYm0uX29uTW92ZU1hcmtlciAmJiBibS5fb25Nb3ZlTWFya2VyKHNlbGVjdGVkTWFya2VyLm9yaWdpbk1hcmtlcilcclxuICAgIHNlbGVjdGVkTWFya2VyID0gbnVsbFxyXG4gICAgYm0uY29udGV4dE1vdXNlLmNsZWFyUmVjdCgwLCAwLCBibS53aWR0aCwgYm0uaGVpZ2h0KVxyXG4gICAgYm0uX2RyYXdNYXJrZXIoKVxyXG5cclxuICAgIHJldHVyblxyXG4gIH1cclxuXHJcbiAgLy8g5qGG6YCJ57uT5p2fXHJcbiAgaWYgKGJtLmJveFNlbGVjdE1hcmtlckZsYWcpIHtcclxuICAgIGNvbnN0IG1hcmtlcnMgPSBnZXRCb3hTZWxlY3RlZE1hcmtlcihlLCBibSlcclxuICAgIGJtLl9vbkJveFNlbGVjdE1hcmtlciAmJiBibS5fb25Cb3hTZWxlY3RNYXJrZXIobWFya2VycylcclxuXHJcbiAgICByZXR1cm5cclxuICB9XHJcblxyXG4gIC8vIOenu+WKqOWbtOagjyBlbmRcclxuICBpZiAoYm0ubW92ZUZlbmNlRmxhZyAmJiBzZWxlY3RlZEZlbmNlKSB7XHJcbiAgICBibS5mZW5jZUxpc3Quc29tZShmID0+IHtcclxuICAgICAgaWYgKHNlbGVjdGVkRmVuY2UuX19pZCA9PT0gZi5fX2lkKSB7XHJcbiAgICAgICAgZiA9IHNldE1vdmVkRmVuY2VQb3NpdGlvbihzZWxlY3RlZEZlbmNlLCBibSlcclxuICAgICAgICBzZWxlY3RlZEZlbmNlID0gZlxyXG4gICAgICAgIHJldHVybiB0cnVlXHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgICBibS5maW5pc2hlZE1vdmVGZW5jZSAmJiBibS5maW5pc2hlZE1vdmVGZW5jZShzZWxlY3RlZEZlbmNlLm9yaWdpbkZlbmNlKVxyXG4gICAgc2VsZWN0ZWRGZW5jZSA9IG51bGxcclxuICAgIGJtLmNvbnRleHRNb3VzZS5jbGVhclJlY3QoMCwgMCwgYm0ud2lkdGgsIGJtLmhlaWdodClcclxuICAgIGJtLl9kcmF3RmVuY2UoKVxyXG4gICAgcmV0dXJuXHJcbiAgfVxyXG5cclxuICAvLyDnlLvlm7TmoI9cclxuICBpZiAoYm0uZHJhd0ZlbmNlRmxhZykge1xyXG4gICAgY29uc3QgZiA9IGJtLnRlbXBGZW5jZVxyXG4gICAgY29uc3QgdHlwZSA9IGJtLmRyYXdGZW5jZVR5cGVcclxuICAgIGxldCBmZW5jZSA9IHt9XHJcblxyXG4gICAgaWYgKHR5cGUgPT09ICdyb3VuZCcpIHtcclxuICAgICAgZmVuY2UgPSB7XHJcbiAgICAgICAgdHlwZSxcclxuICAgICAgICBjZW50ZXI6IFtcclxuICAgICAgICAgIE1hdGgucm91bmQocGl4ZWwybWlsbGltZXRlcihmLmNlbnRlclswXSAtIGJtLnJlY3QueCwgZmFsc2UsIGJtKSAvIGJtLnNjYWxlKSxcclxuICAgICAgICAgIE1hdGgucm91bmQocGl4ZWwybWlsbGltZXRlcihmLmNlbnRlclsxXSAtIGJtLnJlY3QueSwgdHJ1ZSwgYm0pIC8gYm0uc2NhbGUpXHJcbiAgICAgICAgXSxcclxuICAgICAgICByYWRpdXM6IE1hdGgucm91bmQocGl4ZWwybWlsbGltZXRlcihmLnJhZGl1cywgZmFsc2UsIGJtKSAvIGJtLnNjYWxlKVxyXG4gICAgICB9XHJcblxyXG4gICAgICBibS5maW5pc2hlZERyYXdGZW5jZSAmJiBibS5maW5pc2hlZERyYXdGZW5jZShmZW5jZSlcclxuICAgICAgYm0udGVtcEZlbmNlID0ge31cclxuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ3JlY3QnKSB7XHJcbiAgICAgIGNvbnN0IHBhdGggPSBbXVxyXG5cclxuICAgICAgZi5wYXRoLm1hcCh2ID0+IHtcclxuICAgICAgICBwYXRoLnB1c2goe1xyXG4gICAgICAgICAgeDogTWF0aC5yb3VuZChwaXhlbDJtaWxsaW1ldGVyKHYueCAtIGJtLnJlY3QueCwgZmFsc2UsIGJtKSAvIGJtLnNjYWxlKSxcclxuICAgICAgICAgIHk6IE1hdGgucm91bmQocGl4ZWwybWlsbGltZXRlcih2LnkgLSBibS5yZWN0LnksIHRydWUsIGJtKSAvIGJtLnNjYWxlKVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH0pXHJcblxyXG4gICAgICBmZW5jZSA9IHtcclxuICAgICAgICB0eXBlLFxyXG4gICAgICAgIHBhdGhcclxuICAgICAgfVxyXG5cclxuICAgICAgYm0uZmluaXNoZWREcmF3RmVuY2UgJiYgYm0uZmluaXNoZWREcmF3RmVuY2UoZmVuY2UpXHJcbiAgICAgIGJtLnRlbXBGZW5jZSA9IHt9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgfVxyXG4gICAgcmV0dXJuXHJcbiAgfVxyXG5cclxuICAvLyDngrnlh7vlnLDlm77vvIzov5Tlm57ngrnkvY3lt6bovrnvvIzpgInkuK3ngrnkvY3miJblm7TmoI9cclxuICBjb25zdCBwb3MgPSB3aW5kb3dzMmNhbnZhcyhlLmNsaWVudFgsIGUuY2xpZW50WSwgYm0uY2FudmFzTW91c2UpXHJcbiAgY29uc3QgeCA9IHBpeGVsMm1pbGxpbWV0ZXIocG9zLnggLSBibS5yZWN0LngsIGZhbHNlLCBibSlcclxuICBjb25zdCB5ID0gcGl4ZWwybWlsbGltZXRlcihwb3MueSAtIGJtLnJlY3QueSwgdHJ1ZSwgYm0pXHJcbiAgY29uc3QgbWFya2VyID0gZ2V0TWFya2VyT25Qb3MocG9zLCBibSlcclxuICBjb25zdCBmZW5jZSA9IGdldEZlbmNlT25Qb3MocG9zLCBibSlcclxuICBjb25zdCByZXMgPSB7IHgsIHkgfVxyXG4gIGlmIChtYXJrZXIgJiYgbWFya2VyLmxlbmd0aCkgcmVzLm1hcmtlciA9IG1hcmtlclxyXG4gIGlmIChmZW5jZSAmJiBmZW5jZS5sZW5ndGgpIHJlcy5mZW5jZSA9IGZlbmNlXHJcbiAgYm0uX29uQ2xpY2tNYXAgJiYgYm0uX29uQ2xpY2tNYXAocmVzKVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gb25Nb3VzZU1vdmUoZSwgYm0pIHtcclxuICAvLyDnlLvlm7TmoI9cclxuICBpZiAoYm0uZHJhd0ZlbmNlRmxhZyAmJiBibS5kcmF3RmVuY2VUeXBlID09PSAncG9seWdvbicgJiYgYm0udGVtcEZlbmNlPy5wYXRoPy5sZW5ndGgpIHtcclxuICAgIGJtLl9kcmF3Q3VzdG9tRmVuY2UoZSlcclxuICAgIHJldHVyblxyXG4gIH1cclxuXHJcbiAgaWYgKCFibS5pc01vdXNlRG93bikge1xyXG4gICAgY29uc3QgbWFya2VyID0gc2VsZWN0TW91c2VPbk1hcmtlcihlLCBibSlcclxuICAgIGlmIChtYXJrZXIpIHtcclxuICAgICAgYm0uY2FudmFzTW91c2Uuc3R5bGUuY3Vyc29yID0gJ3BvaW50ZXInXHJcbiAgICAgIGRyYXdNYXJrZXJUZXh0KG1hcmtlciwgYm0sIHRydWUpXHJcbiAgICAgIGhhc0RyYXdNYXJrZXJUZXh0ID0gdHJ1ZVxyXG4gICAgICByZXR1cm4gdHJ1ZVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgYm0uY2FudmFzTW91c2Uuc3R5bGUuY3Vyc29yID0gJ2RlZmF1bHQnXHJcblxyXG4gICAgICBpZiAoaGFzRHJhd01hcmtlclRleHQpIHtcclxuICAgICAgICAvLyDmuIXnqbrnlLvluIMsIOa4hemZpOW3sue7j+aYvuekuueahG1hcmtlciB0ZXh0XHJcbiAgICAgICAgYm0uY29udGV4dE1hcmtlckhvdmVyLmNsZWFyUmVjdCgwLCAwLCBibS53aWR0aCwgYm0uaGVpZ2h0KVxyXG5cclxuICAgICAgICBoYXNEcmF3TWFya2VyVGV4dCA9IGZhbHNlXHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm5cclxuICB9XHJcblxyXG4gIC8vIOeUu+WbtOagj1xyXG4gIGlmIChibS5kcmF3RmVuY2VGbGFnKSB7XHJcbiAgICBpZiAoYm0uZHJhd0ZlbmNlVHlwZSA9PT0gJ3BvbHlnb24nICYmIGJtLnRlbXBGZW5jZT8ucGF0aD8ubGVuZ3RoKSB7XHJcbiAgICAgIGJtLl9kcmF3Q3VzdG9tRmVuY2UoZSlcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGJtLl9kcmF3Q3VzdG9tRmVuY2UoZSlcclxuICAgIH1cclxuICAgIHJldHVyblxyXG4gIH1cclxuXHJcbiAgLy8g56e75YqobWFya2VyXHJcbiAgaWYgKGJtLm1vdmVNYXJrZXJGbGFnKSB7XHJcbiAgICBpZiAoIXNlbGVjdGVkTWFya2VyKSByZXR1cm5cclxuXHJcbiAgICBibS5fZHJhd01vdmVkTWFya2VyKGUsIHNlbGVjdGVkTWFya2VyKVxyXG4gICAgcmV0dXJuXHJcbiAgfVxyXG5cclxuICAvLyDmoYbpgIltYXJrZXJcclxuICBpZiAoYm0uYm94U2VsZWN0TWFya2VyRmxhZykge1xyXG4gICAgX2RyYXdCb3hTZWxlY3RSZWN0KGUsIGJtKVxyXG4gICAgcmV0dXJuXHJcbiAgfVxyXG5cclxuICAvLyDnp7vliqhmZW5jZVxyXG4gIGlmIChibS5tb3ZlRmVuY2VGbGFnKSB7XHJcbiAgICBpZiAoIXNlbGVjdGVkRmVuY2UpIHJldHVyblxyXG5cclxuICAgIGJtLl9kcmF3TW92ZUZlbmNlKGUsIHNlbGVjdGVkRmVuY2UpXHJcbiAgICByZXR1cm5cclxuICB9XHJcblxyXG4gIC8vIOenu+WKqOWcsOWbvlxyXG4gIGJtLmNhbnZhc01vdXNlLnN0eWxlLmN1cnNvciA9ICdtb3ZlJ1xyXG4gIGNvbnN0IHBvczEgPSB3aW5kb3dzMmNhbnZhcyhlLmNsaWVudFgsIGUuY2xpZW50WSwgYm0uY2FudmFzTW91c2UpXHJcbiAgY29uc3QgeCA9IHBvczEueCAtIGJtLnN0YXJ0RHJhZ1Bvc2l0aW9uLnhcclxuICBjb25zdCB5ID0gcG9zMS55IC0gYm0uc3RhcnREcmFnUG9zaXRpb24ueVxyXG4gIGJtLnN0YXJ0RHJhZ1Bvc2l0aW9uID0gcG9zMVxyXG4gIGJtLnJlY3QueCArPSB4XHJcbiAgYm0ucmVjdC55ICs9IHlcclxuICBibS5fZHJhd0FsbCgpXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBvbkRibENsaWNrKGUsIGJtKSB7XHJcbiAgLy8g55S75Zu05qCPXHJcbiAgaWYgKGJtLmRyYXdGZW5jZUZsYWcgJiYgYm0uZHJhd0ZlbmNlVHlwZSA9PT0gJ3BvbHlnb24nKSB7XHJcbiAgICBjb25zdCBmID0gYm0udGVtcEZlbmNlXHJcbiAgICBjb25zdCB0eXBlID0gYm0uZHJhd0ZlbmNlVHlwZVxyXG4gICAgbGV0IGZlbmNlID0ge31cclxuICAgIGNvbnN0IHBhdGggPSBbXVxyXG5cclxuICAgIGYucGF0aC5tYXAodiA9PiB7XHJcbiAgICAgIHBhdGgucHVzaCh7XHJcbiAgICAgICAgeDogTWF0aC5yb3VuZChwaXhlbDJtaWxsaW1ldGVyKHYueCAtIGJtLnJlY3QueCwgZmFsc2UsIGJtKSAvIGJtLnNjYWxlKSxcclxuICAgICAgICB5OiBNYXRoLnJvdW5kKHBpeGVsMm1pbGxpbWV0ZXIodi55IC0gYm0ucmVjdC55LCB0cnVlLCBibSkgLyBibS5zY2FsZSlcclxuICAgICAgfSlcclxuICAgIH0pXHJcblxyXG4gICAgcGF0aC5wb3AoKVxyXG5cclxuICAgIGZlbmNlID0ge1xyXG4gICAgICB0eXBlLFxyXG4gICAgICBwYXRoXHJcbiAgICB9XHJcbiAgICBibS5maW5pc2hlZERyYXdGZW5jZSAmJiBibS5maW5pc2hlZERyYXdGZW5jZShmZW5jZSlcclxuICAgIGJtLnRlbXBGZW5jZS5wYXRoID0gW11cclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/core/event.js\n");

/***/ }),

/***/ "./src/core/fence.js":
/*!***************************!*\
  !*** ./src/core/fence.js ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   _drawCustomFence: () => (/* binding */ _drawCustomFence),\n/* harmony export */   _drawFence: () => (/* binding */ _drawFence),\n/* harmony export */   _drawMoveFence: () => (/* binding */ _drawMoveFence),\n/* harmony export */   _setAllFenceFlag: () => (/* binding */ _setAllFenceFlag),\n/* harmony export */   _setDrawFenceFlag: () => (/* binding */ _setDrawFenceFlag),\n/* harmony export */   _setMoveFenceFlag: () => (/* binding */ _setMoveFenceFlag),\n/* harmony export */   _setSelectFenceFlag: () => (/* binding */ _setSelectFenceFlag),\n/* harmony export */   fenceMixin: () => (/* binding */ fenceMixin),\n/* harmony export */   getFenceOnPos: () => (/* binding */ getFenceOnPos),\n/* harmony export */   setFencePosDiff: () => (/* binding */ setFencePosDiff),\n/* harmony export */   setMovedFencePosition: () => (/* binding */ setMovedFencePosition)\n/* harmony export */ });\n/* harmony import */ var _util__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../util */ \"./src/util/index.js\");\n/* harmony import */ var _ui_color__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../ui/color */ \"./src/ui/color.js\");\n\n\nfunction fenceMixin(BSMap) {\n  // 加载围栏、更新围栏\n  BSMap.prototype.loadFence = BSMap.prototype.updateFence = function (fence) {\n    const bm = this;\n    if (!bm.canvasFence) {\n      // 创建围栏canvas dom\n      bm.canvasFence = (0,_util__WEBPACK_IMPORTED_MODULE_0__.createCanvas)(bm, {\n        zIndex: 0,\n        id: 'fenceCanvas'\n      });\n      bm.contextFence = bm.canvasFence.getContext('2d');\n    }\n\n    // 处理围栏\n    bm.fenceList = processFence(fence, bm);\n    bm._drawFence();\n  };\n\n  // 添加围栏\n  BSMap.prototype.addFence = function (fence) {\n    const bm = this;\n    if (!bm.canvasFence) {\n      // 创建围栏canvas dom\n      bm.canvasFence = (0,_util__WEBPACK_IMPORTED_MODULE_0__.createCanvas)(bm, {\n        zIndex: 0,\n        id: 'fenceCanvas'\n      });\n      bm.contextFence = bm.canvasFence.getContext('2d');\n    }\n\n    // 处理围栏\n    const fenceList = processFence(fence, bm, true);\n    bm.fenceList = bm.fenceList.concat(fenceList);\n    bm._drawFence();\n  };\n\n  // 移动围栏\n  BSMap.prototype.onMoveFence = function (callback) {\n    const bm = this;\n    bm._setAllMarkerFlag();\n    bm._setAllFenceFlag();\n    bm._setMoveFenceFlag();\n    if (callback && typeof callback === 'function') {\n      BSMap.prototype.finishedMoveFence = callback;\n    }\n  };\n  BSMap.prototype.endMoveFence = function () {\n    this._setMoveFenceFlag(false);\n  };\n\n  // 画围栏\n  BSMap.prototype.onDrawFence = function (type, callback) {\n    if (type === 'round') {\n      this.onDrawRound(callback);\n    } else if (type === 'rect' || type === 'rectangle') {\n      this.onDrawRect(callback);\n    } else if (type === 'polygon') {\n      this.onDrawPolygon(callback);\n    }\n  };\n  BSMap.prototype.onDrawRect = BSMap.prototype.onDrawRectangle = function (callback) {\n    const bm = this;\n    bm._setAllMarkerFlag();\n    bm._setAllFenceFlag();\n    bm._setDrawFenceFlag(true, 'rect');\n    if (callback && typeof callback === 'function') {\n      BSMap.prototype.finishedDrawFence = callback;\n    }\n  };\n  BSMap.prototype.onDrawRound = function (callback) {\n    const bm = this;\n    bm._setAllMarkerFlag();\n    bm._setAllFenceFlag();\n    bm._setDrawFenceFlag(true, 'round');\n    if (callback && typeof callback === 'function') {\n      BSMap.prototype.finishedDrawFence = callback;\n    }\n  };\n  BSMap.prototype.onDrawPolygon = function (callback) {\n    const bm = this;\n    bm._setAllMarkerFlag();\n    bm._setAllFenceFlag();\n    bm._setDrawFenceFlag(true, 'polygon');\n    if (callback && typeof callback === 'function') {\n      BSMap.prototype.finishedDrawFence = callback;\n    }\n  };\n  BSMap.prototype.endDrawFence = function () {\n    const bm = this;\n    bm._setDrawFenceFlag(false, '');\n    // 清空画布\n    bm.contextMouse.clearRect(0, 0, bm.width, bm.height);\n  };\n}\nconst fenceConfig = {\n  __id: '',\n  // 围栏内部id\n  type: 'round',\n  // 围栏形状，round、rect、polygon\n\n  center: [0, 0],\n  // 圆形围栏-圆心位置\n  radius: 0,\n  // 圆形围栏-半径\n\n  path: [\n  // 矩形或多边形-矩形：对角线两个点；多边形：节点坐标数组，至少3个点\n  {\n    x: 0,\n    y: 0\n  }, {\n    x: 0,\n    y: 0\n  }],\n  _round: {\n    x: 0,\n    y: 0,\n    r: 0\n  },\n  _path: [{\n    x: 0,\n    y: 0\n  }],\n  fillColor: '',\n  // 填充颜色\n  strokeColor: '',\n  // 线条颜色\n  borderWidth: 1 // 线条宽度\n};\n\n// 设置移动围栏flag\nfunction _setMoveFenceFlag(flag = true) {\n  this.moveFenceFlag = flag;\n  if (flag) {\n    this.selectFenceFlag = false;\n    this.drawFenceFlag = false;\n  }\n}\n// 设置选择围栏flag\nfunction _setSelectFenceFlag(flag = true) {\n  this.selectFenceFlag = flag;\n  if (flag) {\n    this.moveFenceFlag = false;\n    this.drawFenceFlag = false;\n  }\n}\n// 设置画围栏flag\nfunction _setDrawFenceFlag(flag = false, type = 'round') {\n  this.drawFenceFlag = flag;\n  this.drawFenceType = type;\n  if (flag) {\n    this.selectFenceFlag = false;\n    this.moveFenceFlag = false;\n  }\n}\n\n// 设置所有围栏flag\nfunction _setAllFenceFlag(flag = false) {\n  const bm = this;\n  bm.moveFenceFlag = flag;\n  bm.selectFenceFlag = flag;\n  bm.drawFenceFlag = flag;\n}\n\n// 获取点击位置所在的围栏\nfunction getFenceOnPos(pos, bm, isOrigin = true) {\n  if (!bm.fenceList.length) return [];\n  const list = [];\n  bm.fenceList.map(f => {\n    if (f.type === 'round') {\n      const x = Math.abs(f._round.x - pos.x);\n      const y = Math.abs(f._round.y - pos.y);\n      const dist = Math.sqrt(x * x + y * y);\n      if (dist <= f._round.r) {\n        if (isOrigin) {\n          list.push(f.originFence);\n        } else {\n          list.push(f);\n        }\n      }\n    } else if (f.type === 'rect') {\n      const points = f._path;\n      if (points.length < 2) {\n        return;\n      }\n      const minX = Math.min(points[0].x, points[1].x);\n      const maxX = Math.max(points[0].x, points[1].x);\n      const minY = Math.min(points[0].y, points[1].y);\n      const maxY = Math.max(points[0].y, points[1].y);\n      if (pos.x >= minX && pos.x <= maxX && pos.y >= minY && pos.y <= maxY) {\n        if (isOrigin) {\n          list.push(f.originFence);\n        } else {\n          list.push(f);\n        }\n      }\n    } else {\n      const path = f._path;\n      if (_isPointInPolygon(path, pos)) {\n        if (isOrigin) {\n          list.push(f.originFence);\n        } else {\n          list.push(f);\n        }\n      }\n    }\n  });\n  return list;\n}\n// 计算围栏坐标和鼠标点位的差\nfunction setFencePosDiff(fence, pos) {\n  if (!fence) return null;\n  let diff;\n  if (fence.type === 'round') {\n    diff = {\n      x: pos.x - fence._round.x,\n      y: pos.y - fence._round.y\n    };\n  } else {\n    diff = [];\n    fence._path.map(p => {\n      diff.push({\n        x: pos.x - p.x,\n        y: pos.y - p.y\n      });\n    });\n  }\n  fence.diff = diff;\n  return fence;\n}\n// 设置移动后围栏位置\nfunction setMovedFencePosition(fence, bm) {\n  if (fence.type === 'round') {\n    fence.center[0] = (0,_util__WEBPACK_IMPORTED_MODULE_0__.pixel2millimeter)((fence._round.x - bm.rect.x) / bm.scale, false, bm);\n    fence.center[1] = (0,_util__WEBPACK_IMPORTED_MODULE_0__.pixel2millimeter)((fence._round.y - bm.rect.y) / bm.scale, true, bm);\n    fence.originFence.center = fence.center;\n  } else {\n    const points = fence._path.map(p => {\n      const point = {\n        x: (0,_util__WEBPACK_IMPORTED_MODULE_0__.pixel2millimeter)((p.x - bm.rect.x) / bm.scale, false, bm),\n        y: (0,_util__WEBPACK_IMPORTED_MODULE_0__.pixel2millimeter)((p.y - bm.rect.y) / bm.scale, true, bm)\n      };\n      return point;\n    });\n    fence.path = points;\n    fence.originFence.path = points;\n  }\n  return fence;\n}\n\n// 画围栏\nfunction _drawFence() {\n  const bm = this;\n  const fenceList = bm.fenceList;\n  if (!bm.contextFence) return;\n  bm.contextFence.clearRect(0, 0, bm.width, bm.height);\n  if (!fenceList || !fenceList.length) return;\n  fenceList.map(fence => {\n    fence = _translateFenceUnit(fence, bm);\n    if (fence.type === 'round') {\n      // 圆形\n      _drawRound(fence, bm.contextFence);\n    } else if (fence.type === 'rect') {\n      // 矩形\n      _drawRect(fence, bm.contextFence);\n    } else {\n      // 多边形\n      _drawPolygon(fence, bm.contextFence);\n    }\n  });\n}\n\n// 画修改中的围栏\nfunction _drawMoveFence(e, fence) {\n  const bm = this;\n  // 清空画布\n  bm.contextMouse.clearRect(0, 0, bm.width, bm.height);\n\n  // 计算鼠标位置\n  const pos = (0,_util__WEBPACK_IMPORTED_MODULE_0__.windows2canvas)(e.clientX, e.clientY, bm.canvasMouse);\n  if (fence.type === 'round') {\n    fence._round.x = pos.x - fence.diff.x;\n    fence._round.y = pos.y - fence.diff.y;\n    _drawRound(fence, bm.contextMouse);\n  } else {\n    fence._path = fence._path.map((p, i) => {\n      p.x = pos.x - fence.diff[i].x;\n      p.y = pos.y - fence.diff[i].y;\n      return p;\n    });\n    if (fence.type === 'rect') {\n      _drawRect(fence, bm.contextMouse);\n    } else {\n      _drawPolygon(fence, bm.contextMouse);\n    }\n  }\n}\n\n// 用户画围栏\nfunction _drawCustomFence(e) {\n  const bm = this;\n  const type = bm.drawFenceType;\n\n  // 清空画布\n  bm.contextMouse.clearRect(0, 0, bm.width, bm.height);\n\n  // 计算鼠标位置\n  const pos = (0,_util__WEBPACK_IMPORTED_MODULE_0__.windows2canvas)(e.clientX, e.clientY, bm.canvasMouse);\n\n  // 获取起点位置\n  const start = bm.startDragPosition;\n  const len = bm.fenceList.length;\n  const fence = {\n    __id: (0,_util__WEBPACK_IMPORTED_MODULE_0__.getRandom)(),\n    fillColor: _ui_color__WEBPACK_IMPORTED_MODULE_1__.fillColors[len],\n    strokeColor: _ui_color__WEBPACK_IMPORTED_MODULE_1__.strokeColors[len],\n    type\n  };\n  if (type === 'round') {\n    // 画圆形，计算半径\n    const dx = Math.abs(pos.x - start.x);\n    const dy = Math.abs(pos.y - start.y);\n    const r = Math.sqrt(dx * dx + dy * dy);\n    const _round = {\n      x: start.x,\n      y: start.y,\n      r\n    };\n    fence._round = _round;\n    _drawRound(fence, bm.contextMouse);\n    bm.tempFence = {\n      type,\n      center: [start.x, start.y],\n      radius: r\n    };\n  } else if (type === 'rect') {\n    const _path = [start, pos];\n    fence._path = _path;\n    _drawRect(fence, bm.contextMouse);\n    bm.tempFence = {\n      type,\n      path: _path\n    };\n  } else {\n    const tf = bm.tempFence;\n    const path = tf.path;\n    if (!path || !path.length) return;\n    fence._path = [...path, pos];\n    _drawPolygon(fence, bm.contextMouse);\n  }\n}\n\n// 处理围栏信息\nfunction processFence(fence, bm, isAdd) {\n  let fenceList = [];\n  const len = isAdd ? bm.fenceList.length : 0;\n  if (Array.isArray(fence)) {\n    fenceList = fence;\n  } else {\n    fenceList = [fence];\n  }\n  fenceList = fenceList.map((f, i) => {\n    let fence = _mergeFenceConfig(f);\n    fence = _setFenceStyle(fence, len + i);\n    if (!fence.__id) {\n      fence.__id = (0,_util__WEBPACK_IMPORTED_MODULE_0__.getRandom)();\n    }\n    return fence;\n  });\n  return fenceList;\n}\n\n// 合并fence配置\nfunction _mergeFenceConfig(fence) {\n  return Object.assign({\n    originFence: fence\n  }, fenceConfig, fence);\n}\n// 转化围栏点位、长度单位\nfunction _translateFenceUnit(fence, bm) {\n  if (fence.type === 'round') {\n    fence._round.x = (0,_util__WEBPACK_IMPORTED_MODULE_0__.millimeter2pixel)(fence.center[0], false, bm) * bm.scale + bm.rect.x;\n    fence._round.y = (0,_util__WEBPACK_IMPORTED_MODULE_0__.millimeter2pixel)(fence.center[1], true, bm) * bm.scale + bm.rect.y;\n    fence._round.r = (0,_util__WEBPACK_IMPORTED_MODULE_0__.millimeter2pixel)(fence.radius, false, bm) * bm.scale;\n  } else {\n    const points = fence.path.map(p => {\n      const point = {\n        x: (0,_util__WEBPACK_IMPORTED_MODULE_0__.millimeter2pixel)(p.x, false, bm) * bm.scale + bm.rect.x,\n        y: (0,_util__WEBPACK_IMPORTED_MODULE_0__.millimeter2pixel)(p.y, true, bm) * bm.scale + bm.rect.y\n      };\n      return point;\n    });\n    fence._path = points;\n  }\n  return fence;\n}\n// 设置围栏样式\nfunction _setFenceStyle(fence, idx) {\n  const borderWidth = (0,_util__WEBPACK_IMPORTED_MODULE_0__.isNumeric)(fence.borderWidth) ? fence.borderWidth : 1;\n  const fillColor = fence.fillColor ? fence.fillColor : _ui_color__WEBPACK_IMPORTED_MODULE_1__.fillColors[idx];\n  const strokeColor = fence.strokeColor ? fence.strokeColor : _ui_color__WEBPACK_IMPORTED_MODULE_1__.strokeColors[idx];\n  fence.borderWidth = borderWidth;\n  fence.fillColor = fillColor;\n  fence.strokeColor = strokeColor;\n  return fence;\n}\n\n/* 封装画圆形 */\nfunction _drawRound(fence, ctx) {\n  const x = fence._round.x;\n  const y = fence._round.y;\n  const r = fence._round.r;\n  ctx.beginPath();\n  ctx.fillStyle = fence.fillColor;\n  ctx.strokeStyle = fence.strokeColor;\n  ctx.lineWidth = fence.borderWidth;\n  ctx.arc(x, y, r, 0, Math.PI * 2);\n  ctx.fill();\n  ctx.stroke();\n  ctx.closePath();\n}\n\n/* 封装画矩形 */\nfunction _drawRect(fence, ctx) {\n  // 设置矩形左上角和宽高\n  const points = fence._path;\n  if (points.length < 2) {\n    (0,_util__WEBPACK_IMPORTED_MODULE_0__.warn)('矩形需要对角线两个点');\n    return false;\n  }\n  const x = Math.min(points[0].x, points[1].x);\n  const y = Math.min(points[0].y, points[1].y);\n  const width = Math.abs(points[0].x - points[1].x);\n  const height = Math.abs(points[0].y - points[1].y);\n  ctx.fillStyle = fence.fillColor;\n  ctx.strokeStyle = fence.strokeColor;\n  ctx.lineWidth = fence.borderWidth;\n  ctx.fillRect(x, y, width, height);\n  ctx.strokeRect(x, y, width, height);\n}\n\n/* 封装画多边形 */\nfunction _drawPolygon(fence, ctx) {\n  const points = fence._path;\n  ctx.fillStyle = fence.fillColor;\n  ctx.strokeStyle = fence.strokeColor;\n  ctx.lineWidth = fence.borderWidth;\n  ctx.beginPath();\n  ctx.moveTo(points[0].x, points[0].y);\n  for (var i = 1; i < points.length; i++) {\n    ctx.lineTo(points[i].x, points[i].y);\n    ctx.stroke();\n  }\n  ctx.lineTo(points[0].x, points[0].y);\n  ctx.stroke();\n  ctx.fill();\n  ctx.closePath();\n}\n\n//判断点是否在多边形内部\nfunction _isPointInPolygon(polygon, point) {\n  var CrossNum = 0;\n  for (let i = 0; i < polygon.length; i++) {\n    var p1 = polygon[i],\n      p2 = polygon[(i + 1) % polygon.length];\n    if (p1.y == p2.y || point.y < Math.min(p1.y, p2.y) || point.y >= Math.max(p1.y, p2.y)) {\n      continue;\n    }\n    var x = (point.y - p1.y) * (p2.x - p1.x) / (p2.y - p1.y) + p1.x;\n    if (x > point.x) {\n      CrossNum++;\n    }\n  }\n  return CrossNum % 2 == 1;\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29yZS9mZW5jZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFTQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7O0FBRUE7QUFBQTtBQUNBO0FBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBR0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2Jhb3NpZ2h0LW1hcC8uL3NyYy9jb3JlL2ZlbmNlLmpzPzNjMDIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcclxuICBjcmVhdGVDYW52YXMsXHJcbiAgbWlsbGltZXRlcjJwaXhlbCxcclxuICBwaXhlbDJtaWxsaW1ldGVyLFxyXG4gIGlzTnVtZXJpYyxcclxuICB3YXJuLFxyXG4gIHdpbmRvd3MyY2FudmFzLFxyXG4gIGdldFJhbmRvbVxyXG59IGZyb20gJy4uL3V0aWwnXHJcbmltcG9ydCB7IGZpbGxDb2xvcnMsIHN0cm9rZUNvbG9ycyB9IGZyb20gJy4uL3VpL2NvbG9yJ1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGZlbmNlTWl4aW4oQlNNYXApIHtcclxuICAvLyDliqDovb3lm7TmoI/jgIHmm7TmlrDlm7TmoI9cclxuICBCU01hcC5wcm90b3R5cGUubG9hZEZlbmNlID0gQlNNYXAucHJvdG90eXBlLnVwZGF0ZUZlbmNlID0gZnVuY3Rpb24gKGZlbmNlKSB7XHJcbiAgICBjb25zdCBibSA9IHRoaXNcclxuXHJcbiAgICBpZiAoIWJtLmNhbnZhc0ZlbmNlKSB7XHJcbiAgICAgIC8vIOWIm+W7uuWbtOagj2NhbnZhcyBkb21cclxuICAgICAgYm0uY2FudmFzRmVuY2UgPSBjcmVhdGVDYW52YXMoYm0sIHsgekluZGV4OiAwLCBpZDogJ2ZlbmNlQ2FudmFzJyB9KVxyXG4gICAgICBibS5jb250ZXh0RmVuY2UgPSBibS5jYW52YXNGZW5jZS5nZXRDb250ZXh0KCcyZCcpXHJcbiAgICB9XHJcblxyXG4gICAgLy8g5aSE55CG5Zu05qCPXHJcbiAgICBibS5mZW5jZUxpc3QgPSBwcm9jZXNzRmVuY2UoZmVuY2UsIGJtKVxyXG5cclxuICAgIGJtLl9kcmF3RmVuY2UoKVxyXG4gIH1cclxuXHJcbiAgLy8g5re75Yqg5Zu05qCPXHJcbiAgQlNNYXAucHJvdG90eXBlLmFkZEZlbmNlID0gZnVuY3Rpb24gKGZlbmNlKSB7XHJcbiAgICBjb25zdCBibSA9IHRoaXNcclxuXHJcbiAgICBpZiAoIWJtLmNhbnZhc0ZlbmNlKSB7XHJcbiAgICAgIC8vIOWIm+W7uuWbtOagj2NhbnZhcyBkb21cclxuICAgICAgYm0uY2FudmFzRmVuY2UgPSBjcmVhdGVDYW52YXMoYm0sIHsgekluZGV4OiAwLCBpZDogJ2ZlbmNlQ2FudmFzJyB9KVxyXG4gICAgICBibS5jb250ZXh0RmVuY2UgPSBibS5jYW52YXNGZW5jZS5nZXRDb250ZXh0KCcyZCcpXHJcbiAgICB9XHJcblxyXG4gICAgLy8g5aSE55CG5Zu05qCPXHJcbiAgICBjb25zdCBmZW5jZUxpc3QgPSBwcm9jZXNzRmVuY2UoZmVuY2UsIGJtLCB0cnVlKVxyXG5cclxuICAgIGJtLmZlbmNlTGlzdCA9IGJtLmZlbmNlTGlzdC5jb25jYXQoZmVuY2VMaXN0KVxyXG5cclxuICAgIGJtLl9kcmF3RmVuY2UoKVxyXG4gIH1cclxuXHJcbiAgLy8g56e75Yqo5Zu05qCPXHJcbiAgQlNNYXAucHJvdG90eXBlLm9uTW92ZUZlbmNlID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XHJcbiAgICBjb25zdCBibSA9IHRoaXNcclxuICAgIGJtLl9zZXRBbGxNYXJrZXJGbGFnKClcclxuICAgIGJtLl9zZXRBbGxGZW5jZUZsYWcoKVxyXG4gICAgYm0uX3NldE1vdmVGZW5jZUZsYWcoKVxyXG5cclxuICAgIGlmIChjYWxsYmFjayAmJiB0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgQlNNYXAucHJvdG90eXBlLmZpbmlzaGVkTW92ZUZlbmNlID0gY2FsbGJhY2tcclxuICAgIH1cclxuICB9XHJcbiAgQlNNYXAucHJvdG90eXBlLmVuZE1vdmVGZW5jZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHRoaXMuX3NldE1vdmVGZW5jZUZsYWcoZmFsc2UpXHJcbiAgfVxyXG5cclxuICAvLyDnlLvlm7TmoI9cclxuICBCU01hcC5wcm90b3R5cGUub25EcmF3RmVuY2UgPSBmdW5jdGlvbiAodHlwZSwgY2FsbGJhY2spIHtcclxuICAgIGlmICh0eXBlID09PSAncm91bmQnKSB7XHJcbiAgICAgIHRoaXMub25EcmF3Um91bmQoY2FsbGJhY2spXHJcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdyZWN0JyB8fCB0eXBlID09PSAncmVjdGFuZ2xlJykge1xyXG4gICAgICB0aGlzLm9uRHJhd1JlY3QoY2FsbGJhY2spXHJcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdwb2x5Z29uJykge1xyXG4gICAgICB0aGlzLm9uRHJhd1BvbHlnb24oY2FsbGJhY2spXHJcbiAgICB9XHJcbiAgfVxyXG4gIEJTTWFwLnByb3RvdHlwZS5vbkRyYXdSZWN0ID0gQlNNYXAucHJvdG90eXBlLm9uRHJhd1JlY3RhbmdsZSA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xyXG4gICAgY29uc3QgYm0gPSB0aGlzXHJcbiAgICBibS5fc2V0QWxsTWFya2VyRmxhZygpXHJcbiAgICBibS5fc2V0QWxsRmVuY2VGbGFnKClcclxuICAgIGJtLl9zZXREcmF3RmVuY2VGbGFnKHRydWUsICdyZWN0JylcclxuICAgIGlmIChjYWxsYmFjayAmJiB0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgQlNNYXAucHJvdG90eXBlLmZpbmlzaGVkRHJhd0ZlbmNlID0gY2FsbGJhY2tcclxuICAgIH1cclxuICB9XHJcbiAgQlNNYXAucHJvdG90eXBlLm9uRHJhd1JvdW5kID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XHJcbiAgICBjb25zdCBibSA9IHRoaXNcclxuICAgIGJtLl9zZXRBbGxNYXJrZXJGbGFnKClcclxuICAgIGJtLl9zZXRBbGxGZW5jZUZsYWcoKVxyXG4gICAgYm0uX3NldERyYXdGZW5jZUZsYWcodHJ1ZSwgJ3JvdW5kJylcclxuICAgIGlmIChjYWxsYmFjayAmJiB0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgQlNNYXAucHJvdG90eXBlLmZpbmlzaGVkRHJhd0ZlbmNlID0gY2FsbGJhY2tcclxuICAgIH1cclxuICB9XHJcbiAgQlNNYXAucHJvdG90eXBlLm9uRHJhd1BvbHlnb24gPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcclxuICAgIGNvbnN0IGJtID0gdGhpc1xyXG4gICAgYm0uX3NldEFsbE1hcmtlckZsYWcoKVxyXG4gICAgYm0uX3NldEFsbEZlbmNlRmxhZygpXHJcbiAgICBibS5fc2V0RHJhd0ZlbmNlRmxhZyh0cnVlLCAncG9seWdvbicpXHJcbiAgICBpZiAoY2FsbGJhY2sgJiYgdHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgIEJTTWFwLnByb3RvdHlwZS5maW5pc2hlZERyYXdGZW5jZSA9IGNhbGxiYWNrXHJcbiAgICB9XHJcbiAgfVxyXG4gIEJTTWFwLnByb3RvdHlwZS5lbmREcmF3RmVuY2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICBjb25zdCBibSA9IHRoaXNcclxuICAgIGJtLl9zZXREcmF3RmVuY2VGbGFnKGZhbHNlLCAnJylcclxuICAgIC8vIOa4heepuueUu+W4g1xyXG4gICAgYm0uY29udGV4dE1vdXNlLmNsZWFyUmVjdCgwLCAwLCBibS53aWR0aCwgYm0uaGVpZ2h0KVxyXG4gIH1cclxufVxyXG5cclxuY29uc3QgZmVuY2VDb25maWcgPSB7XHJcbiAgX19pZDogJycsIC8vIOWbtOagj+WGhemDqGlkXHJcbiAgdHlwZTogJ3JvdW5kJywgLy8g5Zu05qCP5b2i54q277yMcm91bmTjgIFyZWN044CBcG9seWdvblxyXG5cclxuICBjZW50ZXI6IFswLCAwXSwgLy8g5ZyG5b2i5Zu05qCPLeWchuW/g+S9jee9rlxyXG4gIHJhZGl1czogMCwgLy8g5ZyG5b2i5Zu05qCPLeWNiuW+hFxyXG5cclxuICBwYXRoOiBbXHJcbiAgICAvLyDnn6nlvaLmiJblpJrovrnlvaIt55+p5b2i77ya5a+56KeS57q/5Lik5Liq54K577yb5aSa6L655b2i77ya6IqC54K55Z2Q5qCH5pWw57uE77yM6Iez5bCRM+S4queCuVxyXG4gICAgeyB4OiAwLCB5OiAwIH0sXHJcbiAgICB7IHg6IDAsIHk6IDAgfVxyXG4gIF0sXHJcblxyXG4gIF9yb3VuZDogeyB4OiAwLCB5OiAwLCByOiAwIH0sXHJcbiAgX3BhdGg6IFt7IHg6IDAsIHk6IDAgfV0sXHJcblxyXG4gIGZpbGxDb2xvcjogJycsIC8vIOWhq+WFheminOiJslxyXG4gIHN0cm9rZUNvbG9yOiAnJywgLy8g57q/5p2h6aKc6ImyXHJcbiAgYm9yZGVyV2lkdGg6IDEgLy8g57q/5p2h5a695bqmXHJcbn1cclxuXHJcbi8vIOiuvue9ruenu+WKqOWbtOagj2ZsYWdcclxuZXhwb3J0IGZ1bmN0aW9uIF9zZXRNb3ZlRmVuY2VGbGFnKGZsYWcgPSB0cnVlKSB7XHJcbiAgdGhpcy5tb3ZlRmVuY2VGbGFnID0gZmxhZ1xyXG5cclxuICBpZiAoZmxhZykge1xyXG4gICAgdGhpcy5zZWxlY3RGZW5jZUZsYWcgPSBmYWxzZVxyXG4gICAgdGhpcy5kcmF3RmVuY2VGbGFnID0gZmFsc2VcclxuICB9XHJcbn1cclxuLy8g6K6+572u6YCJ5oup5Zu05qCPZmxhZ1xyXG5leHBvcnQgZnVuY3Rpb24gX3NldFNlbGVjdEZlbmNlRmxhZyhmbGFnID0gdHJ1ZSkge1xyXG4gIHRoaXMuc2VsZWN0RmVuY2VGbGFnID0gZmxhZ1xyXG5cclxuICBpZiAoZmxhZykge1xyXG4gICAgdGhpcy5tb3ZlRmVuY2VGbGFnID0gZmFsc2VcclxuICAgIHRoaXMuZHJhd0ZlbmNlRmxhZyA9IGZhbHNlXHJcbiAgfVxyXG59XHJcbi8vIOiuvue9rueUu+WbtOagj2ZsYWdcclxuZXhwb3J0IGZ1bmN0aW9uIF9zZXREcmF3RmVuY2VGbGFnKGZsYWcgPSBmYWxzZSwgdHlwZSA9ICdyb3VuZCcpIHtcclxuICB0aGlzLmRyYXdGZW5jZUZsYWcgPSBmbGFnXHJcbiAgdGhpcy5kcmF3RmVuY2VUeXBlID0gdHlwZVxyXG5cclxuICBpZiAoZmxhZykge1xyXG4gICAgdGhpcy5zZWxlY3RGZW5jZUZsYWcgPSBmYWxzZVxyXG4gICAgdGhpcy5tb3ZlRmVuY2VGbGFnID0gZmFsc2VcclxuICB9XHJcbn1cclxuXHJcbi8vIOiuvue9ruaJgOacieWbtOagj2ZsYWdcclxuZXhwb3J0IGZ1bmN0aW9uIF9zZXRBbGxGZW5jZUZsYWcoZmxhZyA9IGZhbHNlKSB7XHJcbiAgY29uc3QgYm0gPSB0aGlzXHJcblxyXG4gIGJtLm1vdmVGZW5jZUZsYWcgPSBmbGFnXHJcbiAgYm0uc2VsZWN0RmVuY2VGbGFnID0gZmxhZ1xyXG4gIGJtLmRyYXdGZW5jZUZsYWcgPSBmbGFnXHJcbn1cclxuXHJcbi8vIOiOt+WPlueCueWHu+S9jee9ruaJgOWcqOeahOWbtOagj1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0RmVuY2VPblBvcyhwb3MsIGJtLCBpc09yaWdpbiA9IHRydWUpIHtcclxuICBpZiAoIWJtLmZlbmNlTGlzdC5sZW5ndGgpIHJldHVybiBbXVxyXG5cclxuICBjb25zdCBsaXN0ID0gW11cclxuICBibS5mZW5jZUxpc3QubWFwKGYgPT4ge1xyXG4gICAgaWYgKGYudHlwZSA9PT0gJ3JvdW5kJykge1xyXG4gICAgICBjb25zdCB4ID0gTWF0aC5hYnMoZi5fcm91bmQueCAtIHBvcy54KVxyXG4gICAgICBjb25zdCB5ID0gTWF0aC5hYnMoZi5fcm91bmQueSAtIHBvcy55KVxyXG4gICAgICBjb25zdCBkaXN0ID0gTWF0aC5zcXJ0KHggKiB4ICsgeSAqIHkpXHJcblxyXG4gICAgICBpZiAoZGlzdCA8PSBmLl9yb3VuZC5yKSB7XHJcbiAgICAgICAgaWYgKGlzT3JpZ2luKSB7XHJcbiAgICAgICAgICBsaXN0LnB1c2goZi5vcmlnaW5GZW5jZSlcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgbGlzdC5wdXNoKGYpXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKGYudHlwZSA9PT0gJ3JlY3QnKSB7XHJcbiAgICAgIGNvbnN0IHBvaW50cyA9IGYuX3BhdGhcclxuICAgICAgaWYgKHBvaW50cy5sZW5ndGggPCAyKSB7XHJcbiAgICAgICAgcmV0dXJuXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IG1pblggPSBNYXRoLm1pbihwb2ludHNbMF0ueCwgcG9pbnRzWzFdLngpXHJcbiAgICAgIGNvbnN0IG1heFggPSBNYXRoLm1heChwb2ludHNbMF0ueCwgcG9pbnRzWzFdLngpXHJcbiAgICAgIGNvbnN0IG1pblkgPSBNYXRoLm1pbihwb2ludHNbMF0ueSwgcG9pbnRzWzFdLnkpXHJcbiAgICAgIGNvbnN0IG1heFkgPSBNYXRoLm1heChwb2ludHNbMF0ueSwgcG9pbnRzWzFdLnkpXHJcblxyXG4gICAgICBpZiAocG9zLnggPj0gbWluWCAmJiBwb3MueCA8PSBtYXhYICYmIHBvcy55ID49IG1pblkgJiYgcG9zLnkgPD0gbWF4WSkge1xyXG4gICAgICAgIGlmIChpc09yaWdpbikge1xyXG4gICAgICAgICAgbGlzdC5wdXNoKGYub3JpZ2luRmVuY2UpXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGxpc3QucHVzaChmKVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc3QgcGF0aCA9IGYuX3BhdGhcclxuICAgICAgaWYgKF9pc1BvaW50SW5Qb2x5Z29uKHBhdGgsIHBvcykpIHtcclxuICAgICAgICBpZiAoaXNPcmlnaW4pIHtcclxuICAgICAgICAgIGxpc3QucHVzaChmLm9yaWdpbkZlbmNlKVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBsaXN0LnB1c2goZilcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9KVxyXG5cclxuICByZXR1cm4gbGlzdFxyXG59XHJcbi8vIOiuoeeul+WbtOagj+WdkOagh+WSjOm8oOagh+eCueS9jeeahOW3rlxyXG5leHBvcnQgZnVuY3Rpb24gc2V0RmVuY2VQb3NEaWZmKGZlbmNlLCBwb3MpIHtcclxuICBpZiAoIWZlbmNlKSByZXR1cm4gbnVsbFxyXG5cclxuICBsZXQgZGlmZlxyXG4gIGlmIChmZW5jZS50eXBlID09PSAncm91bmQnKSB7XHJcbiAgICBkaWZmID0ge1xyXG4gICAgICB4OiBwb3MueCAtIGZlbmNlLl9yb3VuZC54LFxyXG4gICAgICB5OiBwb3MueSAtIGZlbmNlLl9yb3VuZC55XHJcbiAgICB9XHJcbiAgfSBlbHNlIHtcclxuICAgIGRpZmYgPSBbXVxyXG4gICAgZmVuY2UuX3BhdGgubWFwKHAgPT4ge1xyXG4gICAgICBkaWZmLnB1c2goe1xyXG4gICAgICAgIHg6IHBvcy54IC0gcC54LFxyXG4gICAgICAgIHk6IHBvcy55IC0gcC55XHJcbiAgICAgIH0pXHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgZmVuY2UuZGlmZiA9IGRpZmZcclxuICByZXR1cm4gZmVuY2VcclxufVxyXG4vLyDorr7nva7np7vliqjlkI7lm7TmoI/kvY3nva5cclxuZXhwb3J0IGZ1bmN0aW9uIHNldE1vdmVkRmVuY2VQb3NpdGlvbihmZW5jZSwgYm0pIHtcclxuICBpZiAoZmVuY2UudHlwZSA9PT0gJ3JvdW5kJykge1xyXG4gICAgZmVuY2UuY2VudGVyWzBdID0gcGl4ZWwybWlsbGltZXRlcigoZmVuY2UuX3JvdW5kLnggLSBibS5yZWN0LngpIC8gYm0uc2NhbGUsIGZhbHNlLCBibSlcclxuICAgIGZlbmNlLmNlbnRlclsxXSA9IHBpeGVsMm1pbGxpbWV0ZXIoKGZlbmNlLl9yb3VuZC55IC0gYm0ucmVjdC55KSAvIGJtLnNjYWxlLCB0cnVlLCBibSlcclxuXHJcbiAgICBmZW5jZS5vcmlnaW5GZW5jZS5jZW50ZXIgPSBmZW5jZS5jZW50ZXJcclxuICB9IGVsc2Uge1xyXG4gICAgY29uc3QgcG9pbnRzID0gZmVuY2UuX3BhdGgubWFwKHAgPT4ge1xyXG4gICAgICBjb25zdCBwb2ludCA9IHtcclxuICAgICAgICB4OiBwaXhlbDJtaWxsaW1ldGVyKChwLnggLSBibS5yZWN0LngpIC8gYm0uc2NhbGUsIGZhbHNlLCBibSksXHJcbiAgICAgICAgeTogcGl4ZWwybWlsbGltZXRlcigocC55IC0gYm0ucmVjdC55KSAvIGJtLnNjYWxlLCB0cnVlLCBibSlcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIHBvaW50XHJcbiAgICB9KVxyXG4gICAgZmVuY2UucGF0aCA9IHBvaW50c1xyXG4gICAgZmVuY2Uub3JpZ2luRmVuY2UucGF0aCA9IHBvaW50c1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIGZlbmNlXHJcbn1cclxuXHJcbi8vIOeUu+WbtOagj1xyXG5leHBvcnQgZnVuY3Rpb24gX2RyYXdGZW5jZSgpIHtcclxuICBjb25zdCBibSA9IHRoaXNcclxuICBjb25zdCBmZW5jZUxpc3QgPSBibS5mZW5jZUxpc3RcclxuXHJcbiAgaWYgKCFibS5jb250ZXh0RmVuY2UpIHJldHVyblxyXG5cclxuICBibS5jb250ZXh0RmVuY2UuY2xlYXJSZWN0KDAsIDAsIGJtLndpZHRoLCBibS5oZWlnaHQpXHJcblxyXG4gIGlmICghZmVuY2VMaXN0IHx8ICFmZW5jZUxpc3QubGVuZ3RoKSByZXR1cm5cclxuXHJcbiAgZmVuY2VMaXN0Lm1hcChmZW5jZSA9PiB7XHJcbiAgICBmZW5jZSA9IF90cmFuc2xhdGVGZW5jZVVuaXQoZmVuY2UsIGJtKVxyXG4gICAgaWYgKGZlbmNlLnR5cGUgPT09ICdyb3VuZCcpIHtcclxuICAgICAgLy8g5ZyG5b2iXHJcbiAgICAgIF9kcmF3Um91bmQoZmVuY2UsIGJtLmNvbnRleHRGZW5jZSlcclxuICAgIH0gZWxzZSBpZiAoZmVuY2UudHlwZSA9PT0gJ3JlY3QnKSB7XHJcbiAgICAgIC8vIOefqeW9olxyXG4gICAgICBfZHJhd1JlY3QoZmVuY2UsIGJtLmNvbnRleHRGZW5jZSlcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIC8vIOWkmui+ueW9olxyXG4gICAgICBfZHJhd1BvbHlnb24oZmVuY2UsIGJtLmNvbnRleHRGZW5jZSlcclxuICAgIH1cclxuICB9KVxyXG59XHJcblxyXG4vLyDnlLvkv67mlLnkuK3nmoTlm7TmoI9cclxuZXhwb3J0IGZ1bmN0aW9uIF9kcmF3TW92ZUZlbmNlKGUsIGZlbmNlKSB7XHJcbiAgY29uc3QgYm0gPSB0aGlzXHJcbiAgLy8g5riF56m655S75biDXHJcbiAgYm0uY29udGV4dE1vdXNlLmNsZWFyUmVjdCgwLCAwLCBibS53aWR0aCwgYm0uaGVpZ2h0KVxyXG5cclxuICAvLyDorqHnrpfpvKDmoIfkvY3nva5cclxuICBjb25zdCBwb3MgPSB3aW5kb3dzMmNhbnZhcyhlLmNsaWVudFgsIGUuY2xpZW50WSwgYm0uY2FudmFzTW91c2UpXHJcblxyXG4gIGlmIChmZW5jZS50eXBlID09PSAncm91bmQnKSB7XHJcbiAgICBmZW5jZS5fcm91bmQueCA9IHBvcy54IC0gZmVuY2UuZGlmZi54XHJcbiAgICBmZW5jZS5fcm91bmQueSA9IHBvcy55IC0gZmVuY2UuZGlmZi55XHJcblxyXG4gICAgX2RyYXdSb3VuZChmZW5jZSwgYm0uY29udGV4dE1vdXNlKVxyXG4gIH0gZWxzZSB7XHJcbiAgICBmZW5jZS5fcGF0aCA9IGZlbmNlLl9wYXRoLm1hcCgocCwgaSkgPT4ge1xyXG4gICAgICBwLnggPSBwb3MueCAtIGZlbmNlLmRpZmZbaV0ueFxyXG4gICAgICBwLnkgPSBwb3MueSAtIGZlbmNlLmRpZmZbaV0ueVxyXG5cclxuICAgICAgcmV0dXJuIHBcclxuICAgIH0pXHJcblxyXG4gICAgaWYgKGZlbmNlLnR5cGUgPT09ICdyZWN0Jykge1xyXG4gICAgICBfZHJhd1JlY3QoZmVuY2UsIGJtLmNvbnRleHRNb3VzZSlcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIF9kcmF3UG9seWdvbihmZW5jZSwgYm0uY29udGV4dE1vdXNlKVxyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuLy8g55So5oi355S75Zu05qCPXHJcbmV4cG9ydCBmdW5jdGlvbiBfZHJhd0N1c3RvbUZlbmNlKGUpIHtcclxuICBjb25zdCBibSA9IHRoaXNcclxuICBjb25zdCB0eXBlID0gYm0uZHJhd0ZlbmNlVHlwZVxyXG5cclxuICAvLyDmuIXnqbrnlLvluINcclxuICBibS5jb250ZXh0TW91c2UuY2xlYXJSZWN0KDAsIDAsIGJtLndpZHRoLCBibS5oZWlnaHQpXHJcblxyXG4gIC8vIOiuoeeul+m8oOagh+S9jee9rlxyXG4gIGNvbnN0IHBvcyA9IHdpbmRvd3MyY2FudmFzKGUuY2xpZW50WCwgZS5jbGllbnRZLCBibS5jYW52YXNNb3VzZSlcclxuXHJcbiAgLy8g6I635Y+W6LW354K55L2N572uXHJcbiAgY29uc3Qgc3RhcnQgPSBibS5zdGFydERyYWdQb3NpdGlvblxyXG4gIGNvbnN0IGxlbiA9IGJtLmZlbmNlTGlzdC5sZW5ndGhcclxuICBjb25zdCBmZW5jZSA9IHtcclxuICAgIF9faWQ6IGdldFJhbmRvbSgpLFxyXG4gICAgZmlsbENvbG9yOiBmaWxsQ29sb3JzW2xlbl0sXHJcbiAgICBzdHJva2VDb2xvcjogc3Ryb2tlQ29sb3JzW2xlbl0sXHJcbiAgICB0eXBlXHJcbiAgfVxyXG5cclxuICBpZiAodHlwZSA9PT0gJ3JvdW5kJykge1xyXG4gICAgLy8g55S75ZyG5b2i77yM6K6h566X5Y2K5b6EXHJcbiAgICBjb25zdCBkeCA9IE1hdGguYWJzKHBvcy54IC0gc3RhcnQueClcclxuICAgIGNvbnN0IGR5ID0gTWF0aC5hYnMocG9zLnkgLSBzdGFydC55KVxyXG4gICAgY29uc3QgciA9IE1hdGguc3FydChkeCAqIGR4ICsgZHkgKiBkeSlcclxuICAgIGNvbnN0IF9yb3VuZCA9IHtcclxuICAgICAgeDogc3RhcnQueCxcclxuICAgICAgeTogc3RhcnQueSxcclxuICAgICAgclxyXG4gICAgfVxyXG5cclxuICAgIGZlbmNlLl9yb3VuZCA9IF9yb3VuZFxyXG5cclxuICAgIF9kcmF3Um91bmQoZmVuY2UsIGJtLmNvbnRleHRNb3VzZSlcclxuXHJcbiAgICBibS50ZW1wRmVuY2UgPSB7XHJcbiAgICAgIHR5cGUsXHJcbiAgICAgIGNlbnRlcjogW3N0YXJ0LngsIHN0YXJ0LnldLFxyXG4gICAgICByYWRpdXM6IHJcclxuICAgIH1cclxuICB9IGVsc2UgaWYgKHR5cGUgPT09ICdyZWN0Jykge1xyXG4gICAgY29uc3QgX3BhdGggPSBbc3RhcnQsIHBvc11cclxuXHJcbiAgICBmZW5jZS5fcGF0aCA9IF9wYXRoXHJcbiAgICBfZHJhd1JlY3QoZmVuY2UsIGJtLmNvbnRleHRNb3VzZSlcclxuXHJcbiAgICBibS50ZW1wRmVuY2UgPSB7XHJcbiAgICAgIHR5cGUsXHJcbiAgICAgIHBhdGg6IF9wYXRoXHJcbiAgICB9XHJcbiAgfSBlbHNlIHtcclxuICAgIGNvbnN0IHRmID0gYm0udGVtcEZlbmNlXHJcbiAgICBjb25zdCBwYXRoID0gdGYucGF0aFxyXG5cclxuICAgIGlmICghcGF0aCB8fCAhcGF0aC5sZW5ndGgpIHJldHVyblxyXG5cclxuICAgIGZlbmNlLl9wYXRoID0gWy4uLnBhdGgsIHBvc11cclxuICAgIF9kcmF3UG9seWdvbihmZW5jZSwgYm0uY29udGV4dE1vdXNlKVxyXG4gIH1cclxufVxyXG5cclxuLy8g5aSE55CG5Zu05qCP5L+h5oGvXHJcbmZ1bmN0aW9uIHByb2Nlc3NGZW5jZShmZW5jZSwgYm0sIGlzQWRkKSB7XHJcbiAgbGV0IGZlbmNlTGlzdCA9IFtdXHJcbiAgY29uc3QgbGVuID0gaXNBZGQgPyBibS5mZW5jZUxpc3QubGVuZ3RoIDogMFxyXG5cclxuICBpZiAoQXJyYXkuaXNBcnJheShmZW5jZSkpIHtcclxuICAgIGZlbmNlTGlzdCA9IGZlbmNlXHJcbiAgfSBlbHNlIHtcclxuICAgIGZlbmNlTGlzdCA9IFtmZW5jZV1cclxuICB9XHJcblxyXG4gIGZlbmNlTGlzdCA9IGZlbmNlTGlzdC5tYXAoKGYsIGkpID0+IHtcclxuICAgIGxldCBmZW5jZSA9IF9tZXJnZUZlbmNlQ29uZmlnKGYpXHJcbiAgICBmZW5jZSA9IF9zZXRGZW5jZVN0eWxlKGZlbmNlLCBsZW4gKyBpKVxyXG5cclxuICAgIGlmICghZmVuY2UuX19pZCkge1xyXG4gICAgICBmZW5jZS5fX2lkID0gZ2V0UmFuZG9tKClcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZmVuY2VcclxuICB9KVxyXG5cclxuICByZXR1cm4gZmVuY2VMaXN0XHJcbn1cclxuXHJcbi8vIOWQiOW5tmZlbmNl6YWN572uXHJcbmZ1bmN0aW9uIF9tZXJnZUZlbmNlQ29uZmlnKGZlbmNlKSB7XHJcbiAgcmV0dXJuIE9iamVjdC5hc3NpZ24oeyBvcmlnaW5GZW5jZTogZmVuY2UgfSwgZmVuY2VDb25maWcsIGZlbmNlKVxyXG59XHJcbi8vIOi9rOWMluWbtOagj+eCueS9jeOAgemVv+W6puWNleS9jVxyXG5mdW5jdGlvbiBfdHJhbnNsYXRlRmVuY2VVbml0KGZlbmNlLCBibSkge1xyXG4gIGlmIChmZW5jZS50eXBlID09PSAncm91bmQnKSB7XHJcbiAgICBmZW5jZS5fcm91bmQueCA9IG1pbGxpbWV0ZXIycGl4ZWwoZmVuY2UuY2VudGVyWzBdLCBmYWxzZSwgYm0pICogYm0uc2NhbGUgKyBibS5yZWN0LnhcclxuICAgIGZlbmNlLl9yb3VuZC55ID0gbWlsbGltZXRlcjJwaXhlbChmZW5jZS5jZW50ZXJbMV0sIHRydWUsIGJtKSAqIGJtLnNjYWxlICsgYm0ucmVjdC55XHJcblxyXG4gICAgZmVuY2UuX3JvdW5kLnIgPSBtaWxsaW1ldGVyMnBpeGVsKGZlbmNlLnJhZGl1cywgZmFsc2UsIGJtKSAqIGJtLnNjYWxlXHJcbiAgfSBlbHNlIHtcclxuICAgIGNvbnN0IHBvaW50cyA9IGZlbmNlLnBhdGgubWFwKHAgPT4ge1xyXG4gICAgICBjb25zdCBwb2ludCA9IHtcclxuICAgICAgICB4OiBtaWxsaW1ldGVyMnBpeGVsKHAueCwgZmFsc2UsIGJtKSAqIGJtLnNjYWxlICsgYm0ucmVjdC54LFxyXG4gICAgICAgIHk6IG1pbGxpbWV0ZXIycGl4ZWwocC55LCB0cnVlLCBibSkgKiBibS5zY2FsZSArIGJtLnJlY3QueVxyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gcG9pbnRcclxuICAgIH0pXHJcbiAgICBmZW5jZS5fcGF0aCA9IHBvaW50c1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIGZlbmNlXHJcbn1cclxuLy8g6K6+572u5Zu05qCP5qC35byPXHJcbmZ1bmN0aW9uIF9zZXRGZW5jZVN0eWxlKGZlbmNlLCBpZHgpIHtcclxuICBjb25zdCBib3JkZXJXaWR0aCA9IGlzTnVtZXJpYyhmZW5jZS5ib3JkZXJXaWR0aCkgPyBmZW5jZS5ib3JkZXJXaWR0aCA6IDFcclxuICBjb25zdCBmaWxsQ29sb3IgPSBmZW5jZS5maWxsQ29sb3IgPyBmZW5jZS5maWxsQ29sb3IgOiBmaWxsQ29sb3JzW2lkeF1cclxuICBjb25zdCBzdHJva2VDb2xvciA9IGZlbmNlLnN0cm9rZUNvbG9yID8gZmVuY2Uuc3Ryb2tlQ29sb3IgOiBzdHJva2VDb2xvcnNbaWR4XVxyXG5cclxuICBmZW5jZS5ib3JkZXJXaWR0aCA9IGJvcmRlcldpZHRoXHJcbiAgZmVuY2UuZmlsbENvbG9yID0gZmlsbENvbG9yXHJcbiAgZmVuY2Uuc3Ryb2tlQ29sb3IgPSBzdHJva2VDb2xvclxyXG5cclxuICByZXR1cm4gZmVuY2VcclxufVxyXG5cclxuLyog5bCB6KOF55S75ZyG5b2iICovXHJcbmZ1bmN0aW9uIF9kcmF3Um91bmQoZmVuY2UsIGN0eCkge1xyXG4gIGNvbnN0IHggPSBmZW5jZS5fcm91bmQueFxyXG4gIGNvbnN0IHkgPSBmZW5jZS5fcm91bmQueVxyXG4gIGNvbnN0IHIgPSBmZW5jZS5fcm91bmQuclxyXG5cclxuICBjdHguYmVnaW5QYXRoKClcclxuICBjdHguZmlsbFN0eWxlID0gZmVuY2UuZmlsbENvbG9yXHJcbiAgY3R4LnN0cm9rZVN0eWxlID0gZmVuY2Uuc3Ryb2tlQ29sb3JcclxuICBjdHgubGluZVdpZHRoID0gZmVuY2UuYm9yZGVyV2lkdGhcclxuICBjdHguYXJjKHgsIHksIHIsIDAsIE1hdGguUEkgKiAyKVxyXG4gIGN0eC5maWxsKClcclxuICBjdHguc3Ryb2tlKClcclxuICBjdHguY2xvc2VQYXRoKClcclxufVxyXG5cclxuLyog5bCB6KOF55S755+p5b2iICovXHJcbmZ1bmN0aW9uIF9kcmF3UmVjdChmZW5jZSwgY3R4KSB7XHJcbiAgLy8g6K6+572u55+p5b2i5bem5LiK6KeS5ZKM5a696auYXHJcbiAgY29uc3QgcG9pbnRzID0gZmVuY2UuX3BhdGhcclxuICBpZiAocG9pbnRzLmxlbmd0aCA8IDIpIHtcclxuICAgIHdhcm4oJ+efqeW9oumcgOimgeWvueinkue6v+S4pOS4queCuScpXHJcbiAgICByZXR1cm4gZmFsc2VcclxuICB9XHJcblxyXG4gIGNvbnN0IHggPSBNYXRoLm1pbihwb2ludHNbMF0ueCwgcG9pbnRzWzFdLngpXHJcbiAgY29uc3QgeSA9IE1hdGgubWluKHBvaW50c1swXS55LCBwb2ludHNbMV0ueSlcclxuICBjb25zdCB3aWR0aCA9IE1hdGguYWJzKHBvaW50c1swXS54IC0gcG9pbnRzWzFdLngpXHJcbiAgY29uc3QgaGVpZ2h0ID0gTWF0aC5hYnMocG9pbnRzWzBdLnkgLSBwb2ludHNbMV0ueSlcclxuXHJcbiAgY3R4LmZpbGxTdHlsZSA9IGZlbmNlLmZpbGxDb2xvclxyXG4gIGN0eC5zdHJva2VTdHlsZSA9IGZlbmNlLnN0cm9rZUNvbG9yXHJcbiAgY3R4LmxpbmVXaWR0aCA9IGZlbmNlLmJvcmRlcldpZHRoXHJcblxyXG4gIGN0eC5maWxsUmVjdCh4LCB5LCB3aWR0aCwgaGVpZ2h0KVxyXG4gIGN0eC5zdHJva2VSZWN0KHgsIHksIHdpZHRoLCBoZWlnaHQpXHJcbn1cclxuXHJcbi8qIOWwgeijheeUu+Wkmui+ueW9oiAqL1xyXG5mdW5jdGlvbiBfZHJhd1BvbHlnb24oZmVuY2UsIGN0eCkge1xyXG4gIGNvbnN0IHBvaW50cyA9IGZlbmNlLl9wYXRoXHJcblxyXG4gIGN0eC5maWxsU3R5bGUgPSBmZW5jZS5maWxsQ29sb3JcclxuICBjdHguc3Ryb2tlU3R5bGUgPSBmZW5jZS5zdHJva2VDb2xvclxyXG4gIGN0eC5saW5lV2lkdGggPSBmZW5jZS5ib3JkZXJXaWR0aFxyXG5cclxuICBjdHguYmVnaW5QYXRoKClcclxuICBjdHgubW92ZVRvKHBvaW50c1swXS54LCBwb2ludHNbMF0ueSlcclxuXHJcbiAgZm9yICh2YXIgaSA9IDE7IGkgPCBwb2ludHMubGVuZ3RoOyBpKyspIHtcclxuICAgIGN0eC5saW5lVG8ocG9pbnRzW2ldLngsIHBvaW50c1tpXS55KVxyXG4gICAgY3R4LnN0cm9rZSgpXHJcbiAgfVxyXG4gIGN0eC5saW5lVG8ocG9pbnRzWzBdLngsIHBvaW50c1swXS55KVxyXG4gIGN0eC5zdHJva2UoKVxyXG5cclxuICBjdHguZmlsbCgpXHJcbiAgY3R4LmNsb3NlUGF0aCgpXHJcbn1cclxuXHJcbi8v5Yik5pat54K55piv5ZCm5Zyo5aSa6L655b2i5YaF6YOoXHJcbmZ1bmN0aW9uIF9pc1BvaW50SW5Qb2x5Z29uKHBvbHlnb24sIHBvaW50KSB7XHJcbiAgdmFyIENyb3NzTnVtID0gMFxyXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgcG9seWdvbi5sZW5ndGg7IGkrKykge1xyXG4gICAgdmFyIHAxID0gcG9seWdvbltpXSxcclxuICAgICAgcDIgPSBwb2x5Z29uWyhpICsgMSkgJSBwb2x5Z29uLmxlbmd0aF1cclxuICAgIGlmIChwMS55ID09IHAyLnkgfHwgcG9pbnQueSA8IE1hdGgubWluKHAxLnksIHAyLnkpIHx8IHBvaW50LnkgPj0gTWF0aC5tYXgocDEueSwgcDIueSkpIHtcclxuICAgICAgY29udGludWVcclxuICAgIH1cclxuICAgIHZhciB4ID0gKChwb2ludC55IC0gcDEueSkgKiAocDIueCAtIHAxLngpKSAvIChwMi55IC0gcDEueSkgKyBwMS54XHJcbiAgICBpZiAoeCA+IHBvaW50LngpIHtcclxuICAgICAgQ3Jvc3NOdW0rK1xyXG4gICAgfVxyXG4gIH1cclxuICByZXR1cm4gQ3Jvc3NOdW0gJSAyID09IDFcclxufVxyXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/core/fence.js\n");

/***/ }),

/***/ "./src/core/index.js":
/*!***************************!*\
  !*** ./src/core/index.js ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _init__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./init */ \"./src/core/init.js\");\n/* harmony import */ var _base__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./base */ \"./src/core/base.js\");\n/* harmony import */ var _marker__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./marker */ \"./src/core/marker.js\");\n/* harmony import */ var _fence__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./fence */ \"./src/core/fence.js\");\n/* harmony import */ var _custom__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./custom */ \"./src/core/custom.js\");\n/* harmony import */ var _util__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../util */ \"./src/util/index.js\");\n\n\n\n\n\n\nfunction BSMap(el, options) {\n  if ( true && !(this instanceof BSMap)) {\n    (0,_util__WEBPACK_IMPORTED_MODULE_5__.warn)('BSMap is a constructor and should be called with the `new` keyword');\n  }\n  this._init(el, options);\n}\n(0,_init__WEBPACK_IMPORTED_MODULE_0__.initMixin)(BSMap);\n(0,_base__WEBPACK_IMPORTED_MODULE_1__.baseMixin)(BSMap);\n(0,_marker__WEBPACK_IMPORTED_MODULE_2__.markerMixin)(BSMap);\n(0,_fence__WEBPACK_IMPORTED_MODULE_3__.fenceMixin)(BSMap);\n(0,_custom__WEBPACK_IMPORTED_MODULE_4__.customMixin)(BSMap);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (BSMap);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29yZS9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYmFvc2lnaHQtbWFwLy4vc3JjL2NvcmUvaW5kZXguanM/YzdiMiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBpbml0TWl4aW4gfSBmcm9tICcuL2luaXQnXHJcbmltcG9ydCB7IGJhc2VNaXhpbiB9IGZyb20gJy4vYmFzZSdcclxuaW1wb3J0IHsgbWFya2VyTWl4aW4gfSBmcm9tICcuL21hcmtlcidcclxuaW1wb3J0IHsgZmVuY2VNaXhpbiB9IGZyb20gJy4vZmVuY2UnXHJcbmltcG9ydCB7IGN1c3RvbU1peGluIH0gZnJvbSAnLi9jdXN0b20nXHJcbmltcG9ydCB7IHdhcm4gfSBmcm9tICcuLi91dGlsJ1xyXG5cclxuZnVuY3Rpb24gQlNNYXAoZWwsIG9wdGlvbnMpIHtcclxuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiAhKHRoaXMgaW5zdGFuY2VvZiBCU01hcCkpIHtcclxuICAgIHdhcm4oJ0JTTWFwIGlzIGEgY29uc3RydWN0b3IgYW5kIHNob3VsZCBiZSBjYWxsZWQgd2l0aCB0aGUgYG5ld2Aga2V5d29yZCcpXHJcbiAgfVxyXG5cclxuICB0aGlzLl9pbml0KGVsLCBvcHRpb25zKVxyXG59XHJcblxyXG5pbml0TWl4aW4oQlNNYXApXHJcbmJhc2VNaXhpbihCU01hcClcclxubWFya2VyTWl4aW4oQlNNYXApXHJcbmZlbmNlTWl4aW4oQlNNYXApXHJcbmN1c3RvbU1peGluKEJTTWFwKVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgQlNNYXBcclxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/core/index.js\n");

/***/ }),

/***/ "./src/core/init.js":
/*!**************************!*\
  !*** ./src/core/init.js ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   initMixin: () => (/* binding */ initMixin)\n/* harmony export */ });\n/* harmony import */ var _util__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../util */ \"./src/util/index.js\");\n/* harmony import */ var _wheel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./wheel */ \"./src/core/wheel.js\");\n/* harmony import */ var _event__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./event */ \"./src/core/event.js\");\n/* harmony import */ var _options__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./options */ \"./src/core/options.js\");\n/* harmony import */ var _draw__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./draw */ \"./src/core/draw.js\");\n/* harmony import */ var _marker__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./marker */ \"./src/core/marker.js\");\n/* harmony import */ var _fence__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./fence */ \"./src/core/fence.js\");\n\n\n\n\n\n\n\nfunction initMixin(BSMap) {\n  BSMap.prototype._init = function (el, options) {\n    const bm = this;\n    const wrapper = (0,_util__WEBPACK_IMPORTED_MODULE_0__.getElement)(el);\n    if (!wrapper) {\n      (0,_util__WEBPACK_IMPORTED_MODULE_0__.warn)('Can not resolve the wrapper DOM.');\n      return;\n    }\n    (0,_options__WEBPACK_IMPORTED_MODULE_3__.mergeOptions)(bm, options);\n    bm.$el = wrapper;\n    bm.$el.style.position = 'relative';\n\n    // set canvas width & height\n    bm.width = wrapper.clientWidth;\n    bm.height = wrapper.clientHeight;\n\n    // create map canvas\n    bm.canvasMap = (0,_util__WEBPACK_IMPORTED_MODULE_0__.createCanvas)(bm, {\n      id: 'mapCanvas'\n    });\n    bm.contextMap = bm.canvasMap.getContext('2d');\n\n    // 鼠标操作层canvas\n    bm.canvasMouse = (0,_util__WEBPACK_IMPORTED_MODULE_0__.createCanvas)(bm, {\n      zIndex: 900,\n      id: 'mouseCanvas'\n    });\n    bm.contextMouse = bm.canvasMouse.getContext('2d');\n\n    // 滚动放大缩小地图\n    bm.canvasMouse.onmousewheel = function (event) {\n      (0,_wheel__WEBPACK_IMPORTED_MODULE_1__.zoomInOut)(event, undefined, bm);\n    };\n\n    // 鼠标按下\n    bm.canvasMouse.onmousedown = function (event) {\n      (0,_event__WEBPACK_IMPORTED_MODULE_2__.onMouseDown)(event, bm);\n    };\n\n    // 鼠标抬起\n    bm.canvasMouse.onmouseup = function (event) {\n      (0,_event__WEBPACK_IMPORTED_MODULE_2__.onMouseUp)(event, bm);\n    };\n\n    // 鼠标移动\n    bm.canvasMouse.onmousemove = function (event) {\n      (0,_event__WEBPACK_IMPORTED_MODULE_2__.onMouseMove)(event, bm);\n    };\n    // 鼠标双击\n    bm.canvasMouse.ondblclick = function (event) {\n      (0,_event__WEBPACK_IMPORTED_MODULE_2__.onDblClick)(event, bm);\n    };\n\n    // 工具条\n    (0,_util__WEBPACK_IMPORTED_MODULE_0__.createTooltip)(bm);\n  };\n  BSMap.prototype._drawAll = _draw__WEBPACK_IMPORTED_MODULE_4__._drawAll;\n  BSMap.prototype._drawMap = _draw__WEBPACK_IMPORTED_MODULE_4__._drawMap;\n  BSMap.prototype._initMapRect = _draw__WEBPACK_IMPORTED_MODULE_4__._initMapRect;\n  BSMap.prototype._drawMarker = (0,_util__WEBPACK_IMPORTED_MODULE_0__.debounce)(_marker__WEBPACK_IMPORTED_MODULE_5__._drawMarker);\n  BSMap.prototype._moveMarker = _marker__WEBPACK_IMPORTED_MODULE_5__._moveMarker;\n  BSMap.prototype._selectMarker = _marker__WEBPACK_IMPORTED_MODULE_5__._selectMarker;\n  BSMap.prototype._checkMarker = _marker__WEBPACK_IMPORTED_MODULE_5__._checkMarker;\n  BSMap.prototype._boxSelectMarker = _marker__WEBPACK_IMPORTED_MODULE_5__._boxSelectMarker;\n  BSMap.prototype._drawMovedMarker = _marker__WEBPACK_IMPORTED_MODULE_5__._drawMovedMarker;\n  BSMap.prototype._batchMarkerFlag = _marker__WEBPACK_IMPORTED_MODULE_5__._batchMarkerFlag;\n  BSMap.prototype._setAllMarkerFlag = _marker__WEBPACK_IMPORTED_MODULE_5__._setAllMarkerFlag;\n  BSMap.prototype._drawFence = (0,_util__WEBPACK_IMPORTED_MODULE_0__.debounce)(_fence__WEBPACK_IMPORTED_MODULE_6__._drawFence, 20);\n  BSMap.prototype._drawMoveFence = _fence__WEBPACK_IMPORTED_MODULE_6__._drawMoveFence;\n  BSMap.prototype._drawCustomFence = _fence__WEBPACK_IMPORTED_MODULE_6__._drawCustomFence;\n  BSMap.prototype._setMoveFenceFlag = _fence__WEBPACK_IMPORTED_MODULE_6__._setMoveFenceFlag;\n  BSMap.prototype._setSelectFenceFlag = _fence__WEBPACK_IMPORTED_MODULE_6__._setSelectFenceFlag;\n  BSMap.prototype._setDrawFenceFlag = _fence__WEBPACK_IMPORTED_MODULE_6__._setDrawFenceFlag;\n  BSMap.prototype._setAllFenceFlag = _fence__WEBPACK_IMPORTED_MODULE_6__._setAllFenceFlag;\n  BSMap.prototype._changeClickMap = _marker__WEBPACK_IMPORTED_MODULE_5__._changeClickMap;\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29yZS9pbml0LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBV0E7QUFVQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUNBOztBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9iYW9zaWdodC1tYXAvLi9zcmMvY29yZS9pbml0LmpzPzllNDEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0RWxlbWVudCwgY3JlYXRlQ2FudmFzLCBjcmVhdGVUb29sdGlwLCBkZWJvdW5jZSwgd2FybiB9IGZyb20gJy4uL3V0aWwnXHJcbmltcG9ydCB7IHpvb21Jbk91dCB9IGZyb20gJy4vd2hlZWwnXHJcbmltcG9ydCB7IG9uTW91c2VEb3duLCBvbk1vdXNlVXAsIG9uTW91c2VNb3ZlLCBvbkRibENsaWNrIH0gZnJvbSAnLi9ldmVudCdcclxuaW1wb3J0IHsgbWVyZ2VPcHRpb25zIH0gZnJvbSAnLi9vcHRpb25zJ1xyXG5pbXBvcnQgeyBfaW5pdE1hcFJlY3QsIF9kcmF3TWFwLCBfZHJhd0FsbCB9IGZyb20gJy4vZHJhdydcclxuaW1wb3J0IHtcclxuICBfZHJhd01hcmtlcixcclxuICBfbW92ZU1hcmtlcixcclxuICBfc2VsZWN0TWFya2VyLFxyXG4gIF9jaGVja01hcmtlcixcclxuICBfYm94U2VsZWN0TWFya2VyLFxyXG4gIF9kcmF3TW92ZWRNYXJrZXIsXHJcbiAgX2JhdGNoTWFya2VyRmxhZyxcclxuICBfc2V0QWxsTWFya2VyRmxhZyxcclxuICBfY2hhbmdlQ2xpY2tNYXBcclxufSBmcm9tICcuL21hcmtlcidcclxuaW1wb3J0IHtcclxuICBfZHJhd0ZlbmNlLFxyXG4gIF9kcmF3TW92ZUZlbmNlLFxyXG4gIF9kcmF3Q3VzdG9tRmVuY2UsXHJcbiAgX3NldE1vdmVGZW5jZUZsYWcsXHJcbiAgX3NldFNlbGVjdEZlbmNlRmxhZyxcclxuICBfc2V0RHJhd0ZlbmNlRmxhZyxcclxuICBfc2V0QWxsRmVuY2VGbGFnXHJcbn0gZnJvbSAnLi9mZW5jZSdcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpbml0TWl4aW4oQlNNYXApIHtcclxuICBCU01hcC5wcm90b3R5cGUuX2luaXQgPSBmdW5jdGlvbiAoZWwsIG9wdGlvbnMpIHtcclxuICAgIGNvbnN0IGJtID0gdGhpc1xyXG4gICAgY29uc3Qgd3JhcHBlciA9IGdldEVsZW1lbnQoZWwpXHJcblxyXG4gICAgaWYgKCF3cmFwcGVyKSB7XHJcbiAgICAgIHdhcm4oJ0NhbiBub3QgcmVzb2x2ZSB0aGUgd3JhcHBlciBET00uJylcclxuXHJcbiAgICAgIHJldHVyblxyXG4gICAgfVxyXG4gICAgbWVyZ2VPcHRpb25zKGJtLCBvcHRpb25zKVxyXG4gICAgYm0uJGVsID0gd3JhcHBlclxyXG4gICAgYm0uJGVsLnN0eWxlLnBvc2l0aW9uID0gJ3JlbGF0aXZlJ1xyXG5cclxuICAgIC8vIHNldCBjYW52YXMgd2lkdGggJiBoZWlnaHRcclxuICAgIGJtLndpZHRoID0gd3JhcHBlci5jbGllbnRXaWR0aFxyXG4gICAgYm0uaGVpZ2h0ID0gd3JhcHBlci5jbGllbnRIZWlnaHRcclxuXHJcbiAgICAvLyBjcmVhdGUgbWFwIGNhbnZhc1xyXG4gICAgYm0uY2FudmFzTWFwID0gY3JlYXRlQ2FudmFzKGJtLCB7IGlkOiAnbWFwQ2FudmFzJyB9KVxyXG4gICAgYm0uY29udGV4dE1hcCA9IGJtLmNhbnZhc01hcC5nZXRDb250ZXh0KCcyZCcpXHJcblxyXG4gICAgLy8g6byg5qCH5pON5L2c5bGCY2FudmFzXHJcbiAgICBibS5jYW52YXNNb3VzZSA9IGNyZWF0ZUNhbnZhcyhibSwgeyB6SW5kZXg6IDkwMCwgaWQ6ICdtb3VzZUNhbnZhcycgfSlcclxuICAgIGJtLmNvbnRleHRNb3VzZSA9IGJtLmNhbnZhc01vdXNlLmdldENvbnRleHQoJzJkJylcclxuXHJcbiAgICAvLyDmu5rliqjmlL7lpKfnvKnlsI/lnLDlm75cclxuICAgIGJtLmNhbnZhc01vdXNlLm9ubW91c2V3aGVlbCA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICB6b29tSW5PdXQoZXZlbnQsIHVuZGVmaW5lZCwgYm0pXHJcbiAgICB9XHJcblxyXG4gICAgLy8g6byg5qCH5oyJ5LiLXHJcbiAgICBibS5jYW52YXNNb3VzZS5vbm1vdXNlZG93biA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICBvbk1vdXNlRG93bihldmVudCwgYm0pXHJcbiAgICB9XHJcblxyXG4gICAgLy8g6byg5qCH5oqs6LW3XHJcbiAgICBibS5jYW52YXNNb3VzZS5vbm1vdXNldXAgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgb25Nb3VzZVVwKGV2ZW50LCBibSlcclxuICAgIH1cclxuXHJcbiAgICAvLyDpvKDmoIfnp7vliqhcclxuICAgIGJtLmNhbnZhc01vdXNlLm9ubW91c2Vtb3ZlID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgIG9uTW91c2VNb3ZlKGV2ZW50LCBibSlcclxuICAgIH1cclxuICAgIC8vIOm8oOagh+WPjOWHu1xyXG4gICAgYm0uY2FudmFzTW91c2Uub25kYmxjbGljayA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICBvbkRibENsaWNrKGV2ZW50LCBibSlcclxuICAgIH1cclxuXHJcbiAgICAvLyDlt6XlhbfmnaFcclxuICAgIGNyZWF0ZVRvb2x0aXAoYm0pXHJcbiAgfVxyXG4gIEJTTWFwLnByb3RvdHlwZS5fZHJhd0FsbCA9IF9kcmF3QWxsXHJcbiAgQlNNYXAucHJvdG90eXBlLl9kcmF3TWFwID0gX2RyYXdNYXBcclxuICBCU01hcC5wcm90b3R5cGUuX2luaXRNYXBSZWN0ID0gX2luaXRNYXBSZWN0XHJcblxyXG4gIEJTTWFwLnByb3RvdHlwZS5fZHJhd01hcmtlciA9IGRlYm91bmNlKF9kcmF3TWFya2VyKVxyXG4gIEJTTWFwLnByb3RvdHlwZS5fbW92ZU1hcmtlciA9IF9tb3ZlTWFya2VyXHJcbiAgQlNNYXAucHJvdG90eXBlLl9zZWxlY3RNYXJrZXIgPSBfc2VsZWN0TWFya2VyXHJcbiAgQlNNYXAucHJvdG90eXBlLl9jaGVja01hcmtlciA9IF9jaGVja01hcmtlclxyXG4gIEJTTWFwLnByb3RvdHlwZS5fYm94U2VsZWN0TWFya2VyID0gX2JveFNlbGVjdE1hcmtlclxyXG4gIEJTTWFwLnByb3RvdHlwZS5fZHJhd01vdmVkTWFya2VyID0gX2RyYXdNb3ZlZE1hcmtlclxyXG4gIEJTTWFwLnByb3RvdHlwZS5fYmF0Y2hNYXJrZXJGbGFnID0gX2JhdGNoTWFya2VyRmxhZ1xyXG4gIEJTTWFwLnByb3RvdHlwZS5fc2V0QWxsTWFya2VyRmxhZyA9IF9zZXRBbGxNYXJrZXJGbGFnXHJcblxyXG4gIEJTTWFwLnByb3RvdHlwZS5fZHJhd0ZlbmNlID0gZGVib3VuY2UoX2RyYXdGZW5jZSwgMjApXHJcbiAgQlNNYXAucHJvdG90eXBlLl9kcmF3TW92ZUZlbmNlID0gX2RyYXdNb3ZlRmVuY2VcclxuICBCU01hcC5wcm90b3R5cGUuX2RyYXdDdXN0b21GZW5jZSA9IF9kcmF3Q3VzdG9tRmVuY2VcclxuICBCU01hcC5wcm90b3R5cGUuX3NldE1vdmVGZW5jZUZsYWcgPSBfc2V0TW92ZUZlbmNlRmxhZ1xyXG4gIEJTTWFwLnByb3RvdHlwZS5fc2V0U2VsZWN0RmVuY2VGbGFnID0gX3NldFNlbGVjdEZlbmNlRmxhZ1xyXG4gIEJTTWFwLnByb3RvdHlwZS5fc2V0RHJhd0ZlbmNlRmxhZyA9IF9zZXREcmF3RmVuY2VGbGFnXHJcbiAgQlNNYXAucHJvdG90eXBlLl9zZXRBbGxGZW5jZUZsYWcgPSBfc2V0QWxsRmVuY2VGbGFnXHJcblxyXG4gIEJTTWFwLnByb3RvdHlwZS5fY2hhbmdlQ2xpY2tNYXAgPSBfY2hhbmdlQ2xpY2tNYXBcclxufVxyXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/core/init.js\n");

/***/ }),

/***/ "./src/core/marker.js":
/*!****************************!*\
  !*** ./src/core/marker.js ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   _batchMarkerFlag: () => (/* binding */ _batchMarkerFlag),\n/* harmony export */   _boxSelectMarker: () => (/* binding */ _boxSelectMarker),\n/* harmony export */   _changeClickMap: () => (/* binding */ _changeClickMap),\n/* harmony export */   _checkMarker: () => (/* binding */ _checkMarker),\n/* harmony export */   _drawMarker: () => (/* binding */ _drawMarker),\n/* harmony export */   _drawMovedMarker: () => (/* binding */ _drawMovedMarker),\n/* harmony export */   _moveMarker: () => (/* binding */ _moveMarker),\n/* harmony export */   _selectMarker: () => (/* binding */ _selectMarker),\n/* harmony export */   _setAllMarkerFlag: () => (/* binding */ _setAllMarkerFlag),\n/* harmony export */   drawMarkerText: () => (/* binding */ drawMarkerText),\n/* harmony export */   getBoxSelectedMarker: () => (/* binding */ getBoxSelectedMarker),\n/* harmony export */   getMarkerOnPos: () => (/* binding */ getMarkerOnPos),\n/* harmony export */   getMarkerPosition: () => (/* binding */ getMarkerPosition),\n/* harmony export */   markerMixin: () => (/* binding */ markerMixin),\n/* harmony export */   processMarker: () => (/* binding */ processMarker),\n/* harmony export */   selectMouseOnMarker: () => (/* binding */ selectMouseOnMarker)\n/* harmony export */ });\n/* harmony import */ var _util__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../util */ \"./src/util/index.js\");\n\nfunction markerMixin(BSMap) {\n  // 加载marker 刷新marker\n  BSMap.prototype.loadMarker = BSMap.prototype.updateMarker = function (marker) {\n    const bm = this;\n    if (!bm.canvasMarker) {\n      // create marker canvas\n      bm.canvasMarker = (0,_util__WEBPACK_IMPORTED_MODULE_0__.createCanvas)(bm, {\n        zIndex: 100,\n        id: 'markerCanvas'\n      });\n      bm.contextMarker = bm.canvasMarker.getContext('2d');\n      bm.canvasMarkerHover = (0,_util__WEBPACK_IMPORTED_MODULE_0__.createCanvas)(bm, {\n        zIndex: 101,\n        id: 'markerHoverCanvas'\n      });\n      bm.contextMarkerHover = bm.canvasMarkerHover.getContext('2d');\n    }\n    bm.markerList = processMarker(marker, bm);\n    bm._drawMarker();\n  };\n  // 添加marker\n  BSMap.prototype.addMarker = function (marker) {\n    const bm = this;\n    if (!bm.canvasMarker) {\n      // create marker canvas\n      bm.canvasMarker = (0,_util__WEBPACK_IMPORTED_MODULE_0__.createCanvas)(bm, {\n        zIndex: 100,\n        id: 'markerCanvas'\n      });\n      bm.contextMarker = bm.canvasMarker.getContext('2d');\n    }\n    const markerList = processMarker(marker, bm);\n    bm.markerList = bm.markerList.concat(markerList);\n    bm._drawMarker();\n  };\n  // 添加marker\n  BSMap.prototype.onAddMarker = function (callback) {\n    if (callback && typeof callback === 'function') {\n      BSMap.prototype._onAddMarker = callback;\n    }\n  };\n  // 移动marker\n  BSMap.prototype.onMoveMarker = function (callback) {\n    const bm = this;\n    bm._batchMarkerFlag();\n    bm._setAllFenceFlag();\n    bm._moveMarker();\n    if (callback && typeof callback === 'function') {\n      BSMap.prototype._onMoveMarker = callback;\n    }\n  };\n  // 结束移动marker\n  BSMap.prototype.endMoveMarker = function () {\n    this._moveMarker(false);\n  };\n  // 点选marker\n  BSMap.prototype.onSelectMarker = function (callback) {\n    const bm = this;\n    bm._batchMarkerFlag();\n    bm._setAllFenceFlag();\n    bm._selectMarker();\n    if (callback && typeof callback === 'function') {\n      BSMap.prototype._onSelectMarker = callback;\n    }\n  };\n  // end 点选marker\n  BSMap.prototype.endSelectMarker = function () {\n    const bm = this;\n    bm._selectMarker(false);\n  };\n\n  // 查看marker\n  BSMap.prototype.onCheckMarker = function (callback) {\n    const bm = this;\n    bm._batchMarkerFlag();\n    bm._setAllFenceFlag();\n    bm._checkMarker();\n    if (callback && typeof callback === 'function') {\n      BSMap.prototype._onCheckMarker = callback;\n    }\n  };\n  // 结束查看marker\n  BSMap.prototype.endCheckMarker = function () {\n    const bm = this;\n    bm._checkMarker(false);\n  };\n  // 框选marker\n  BSMap.prototype.onBoxSelectMarker = function (callback) {\n    const bm = this;\n    bm._batchMarkerFlag();\n    bm._setAllFenceFlag();\n    bm._boxSelectMarker();\n    if (callback && typeof callback === 'function') {\n      BSMap.prototype._onBoxSelectMarker = callback;\n    }\n  };\n  // end 框选marker\n  BSMap.prototype.endBoxSelectMarker = function () {\n    const bm = this;\n    bm._boxSelectMarker(false);\n  };\n}\nconst markerIcon = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAAAXNSR0IArs4c6QAADKpJREFUeF7tnXuwE9Udx7+/5F4QEKlYreLYAmbD9S03N62PKQp0VOof1bZ2aqG2gJAT7Cj4rB3RUZy2igI6lWxAoA+tnUqr/cOijCDiKLbZXBBfl2zk2jqi1YqtCAj3Jr/OJnGmKheTPWdfye4Mf3F+r+/53HPObs6eJTTplcjuGArs7uAyTogSdzCoA8CxAB3KwHACDwdg/bOuXQzaRcAugD8E8CaBe0pMPRTBq8Cwnnxq1J5mlIqapahL/sjR13eaZ5eBCRGmC5lwhsraiPF8mfixCLBx9Ejt2Ye/RyWV/r3yFWgAzrz/jZH9fR9NKROmEPNEEI1yRUjmHUz0VISxpq39kDWbLj9upytxHQgSOAAqf+nvFb9f6XTwFIBGOqBLAy55J4PWWDCMPiL2h6CNDIEBIJF9bQShPB2g6WA+tYEecq8p0VaAVzEiq/Kp4//rXmD7kXwPwOmLe78QHVL6CaE8A6Ax9kt105J7GZGVpb3RX22ZN+Y/bkZuNJavAUgs3XYRRSK3ADi90cJ80n4Ll8u35ueMe9Qn+XwmDV8CYP3Vtw3ptzp+rl+FazCvJf17227142jgOwCSes8FjOgvAvxXPxAbWwilG3Oi4/EG4XG0ua8ASOrmjQz83NGKPXZOwM9yQrMA98XlCwCSSwtjOUJ3APiuL1RxPonVVOYbcnPi250PdfAIngOQyL52IaG8BIyY12K4Gp9QZETm5lPHP+Zq3E8F8xSALt2cCeB+LwXwQezLDaGt8CoPzwDoyhSuB1WG/fBivsFIx+/0QghPAEjqhekMWulFwX6NSeAZORFf5XZ+rgOQyBYnEvN6twsNQjwmmpRPxZ5yM1dXAUgu25bkcuTvbhYYtFgUKX81N3tczq28XQOgequHx1DdmBFeAyrAPVTGhW7dIroGQJduPtxC9/mygK82hHaJrJN67F0BoBWe8NUjdiNt3Hpi6DgAtWf7axopPmxbVYBQmuL0bweOAlD7Vc9a1Qb151yvWdzSv7dtopO/IjoKQJduLm6in3S9gmGJIbR5TgV3DIDaZo5HnEq8lfxyuXyxU5tKHAEgHPqV4+nYVOAIAAm9eBOBFyiXoYUdMmh+XsRuVy2BcgAqu3e5tDk4GzhVS+qUP+5lio5XvdtYOQBdWXMuGNbiL7xUK0CYZ6S0JSrdKgXAemmj9/3Xun27b1+lcl74Ito65vDjO1W+fKIUgGTGnMqEB7zQplViEmNaLq09qKpepQAkdPMBAqaqSi7081kFGHgwL7RpqrRRBoD1omZf/17T+3f1VEnjVz+8s71tiKbqhVRlAITDv3vAqJwGlAEQDv/uAaByGlACQGX1v7P4JoAvuSdDS0f615iRsWNV3A0oASCR3X4ecemJlu4Sl4tnip6fT41dKxtWCQBdeuFOgK6TTSa0b0QBXmiI+PWNWByorSIAzDyATtlkQvuGFOg2hJZoyOIAjaUBsE7jIt69WzaR0L5xBZiGDZM9vUwBAGYnMawRILxcVoAJiXxK65YJKw1AZ8acGgkf/8r0gW3bMmNat+RjYWkAknphAYNusl1FaGhbAQLfnhPx+bYdVDaeSl7hfn9JAeXMpd8fUAHAcwDOlKsjtLapwCZDaGfZtK2YKQCgaJ2Nd4pMEqGtXQXoRUPEpM5MlAYgoRd7CTzabgmhnX0FGPR6XsSkzk6UBqBLN/8N4Aj7ZYSWEgq8ZwjtixL2KqYAcx+AQTJJhLa2FdhvCG2wbWs1awBzP4B2mSRCW9sK9BlCk/rjUzEFWIciH2a7hNBQRoEPDKGNkHGgAIDiWwAfLZNEaGtXAXrbELFj7Forug00rcMOpVaiMgW0uG2vIbSxMhrIjwBZ8yUwTpJJIrS1qQDhZSOlnWzTumImD4BuWgcadckkEdraVsAwhJa0ba0CgESmsJGIvi6TRGhrTwFmfiafjk+wZ121kh4BkhlzKRPSMkmEtvYUIEYml9bm2LNWBECXXrwM4N/IJBHa2lWAfmSI2G/tWisZATqXbz81Uiq9IJNEaGtPgXI0elr3rLFb7VkrGgEsN0m9uJPBh8skEto2pgCB3s+JmPQn86TXAFbaXVnzCTDOa6yEsLWUAoS1Rko7X8qHikWglUBCLywk0LWyyYT29SvA4LvyIi79LoaaESBjnguCq6dc1y9Vk7ZkTDTS2gbZ6pQAUJkGdNMC4FzZhEL7uhTYYAhtYl0tP6eRMgCSujmHgftUJBX6OLgCBFyRE9pSFTopA2D8SvPI6D68DMKRKhILfQygAOPd0mCctHmG9q4KjZQBUF0MmvcRIPVkSkVRzeyDgaV5oV2hqkalAHSFi0FV/TKwH0WLv48DKAWgshjMmqvB+I7zSrRgBMKfjJSm9OOaygFI6oUJDHq6BbvH8ZIJfE5OxDeqDKQcgMookCnoIEqpTLTlfTFnjXRcqNbBEQA6l79+QqTU93y4WVRZd31Qjraf0T1r9KvKPNYcOQKA5Tt8a1hdV6l4C3igbBwDYPy95pHRdn4eRFKbFtXJGFBPzNtLfXTG5ivV3Pd/WgXHAKg8F8gWryTmewIqvS/SZqKr8qnYvU4l4ygA1amguJHB4Z5BGz1IoGdyIia15+/zwroBwAUMDj8b93k9cYD/J9CUnIg9bsO0bhPHAahMBXpxCYGvqjursCEYdE9exOY6LYUrAJyVKR61n7AR4HFOF9Qc/mnbIMaE59Kxd5yuxxUAKg+Hwt3DDfSl/G7feoO5BkANgt8DfGm9ybVmO3rIELEfuFW7uwBkiicTwborCHcQH3jR9z4zJhjp2EtNCUDttvBaBi90q8AgxSHQdTkRu8vNnF0dAT4urEsvPgnwZDcL9X8sWmeI2DfcztMTACo/GTPWgajN7YJ9GY+5nwiTVf/UW0+tngBQfTZg3kDAL+tJstnbMPDTvNDu8KJOzwCo3hWYjwL4lheF+yjmXwyhXeRVPt4CULkr4HUMHOWVAF7GJeAdZprs5qr/0/V6CkDlriBTnMXEy7zsCK9iE9PsXDq23Kv4VlzPAahNBSsBTPdSCA9irzKENsODuJ8I6QsAxq/456ho3751ADq8FsSl+D2l9sGTN8/88g6X4g0YxhcA1EYBa7vzw14L4lL8SwyhrXYp1kHD+AaAGgR3A7jaD8I4mMMiQ2jXOOi/Ide+AuDMRW8M6Rv6kTUVNOsHKDa17zlk8qarj9vbUC852NhXAFh1dmaKkyLEFgRNd5WZJnenY+v9VJjvALDESWQK84noNj8JJZsLM9+cT8cXyPpRbe9LAGrrAetbxM1y7tBaQ8if56O68y1/vgUgkS18jZis4XKoE4W76HMPE0/Kp+J/czFm3aF8C0BlKtDNqwmw7gwCezFwTV5oi/xagK8BsERL6sU/M/hivwp4sLwI9EhOxL7t59x9D0BXpngyIrweHLCjZwjvokyTvPyhpx7wfA9AdSooCAJl6inIL20YnM6LuO6XfAbKIxAA1NYDDxAw1e+CWvkx8GBeaNOCkGtgADh7Rc/wffujL4LwFV8Ly/jH4EGlU56d2bHL13nWkgsMAJVnA8vMH6IMqePRHe+UCC4zZmu/czyOogCBAqACgV7MAjxbUf2K3dAyQ8QCdTRO4ACorQdeJuBExb0n5Y6BV/JCC9zHswIJQFIv+u6Vczde5ZYidADjQAJQnQrMxQAcf326TtGXGEKbV2dbXzULLAA1CPzwyTrpT7d5SUSgAehcXjghUqJXvBSwHOUTu2fFlR/f5lZNgQbAEimpFxcw+Ca3BPv/OAS6PSdi872IrSpm4AGoTAVZcwMY56gSpS4/hKeNlBb4D2Q0BQCnLnxh2KDhQ63P2Efr6jz5RqX9u/aM2HrdabvlXXnroSkAqDwbyJqXE8OVt2yYMCuf0u73tuvURG8aACpTQcb8KwhT1EgzgBfGGiOtfdPRGC46byoAqreGhQ8AGu6MhrzLEPHDnPHtjdemAyCRNc8jhrWhVPnFhPPzKW2tcsceOmw6ACrrAb24isA/Vqkrg36dF7Gme4G1KQGoTgXmWwCOVgTB24bQjlHky1dumheApT3jEIn2KFG7XOow5nRsU+LLZ06aFoDqVGDeSsDNMpozcFteaLfI+PCzbVMDYAmf1IsFBmt2OoFAZk7E4nZsg2LT9ACcu6r3kA/39dt6G/fQwW1DNkwf81FQOtNOnk0PQGVBmDFngLCiIYEYM420Zh1d09RXSwBQvSsoPAlQnaeT8jpDxF0/tdML0loGgAoEWfNNMEYdVGjCDiOlHetFZ3gRs6UAqEGwCIwDb98iLDZSWrMfUfMJzloOgNp0cCkRTWKuHlhNROuYeb0h4g958VfoZcz/AV0xva5KKNyvAAAAAElFTkSuQmCC';\nconst markerOptins = {\n  position: [0, 0],\n  // 位置：转换前的地图坐标（毫米）, [x, y]\n  text: '',\n  // 标记点位文字\n  icon: markerIcon,\n  // 标记图标\n\n  // 锚点方位：top-left, top-center,  middle-right,\n  // 锚点方位：top-right, middle-left, center,\n  // 锚点方位：bottom-left, bottom-center, bottom-right\n  anchor: 'bottom-center',\n  size: [20, 20],\n  // 图标大小（宽、高）（像素）\n  offset: [0, 0],\n  // 偏移（水平、垂直）（像素）\n  showText: 'always',\n  // always, hover, none\n  textStyle: {\n    fontSize: 14,\n    // 单位：px\n    fontFamily: 'sans-serif',\n    fontWeight: 'normal',\n    color: 'black',\n    position: 'bottom'\n  }\n};\n\n/* 移动 marker */\nfunction _moveMarker(flag = true) {\n  const bm = this;\n  bm.moveMarkerFlag = flag;\n}\n\n/* 点选 marker */\nfunction _selectMarker(flag = true) {\n  const bm = this;\n  bm.selectMarkerFlag = flag;\n}\n\n// 查看 marker\nfunction _checkMarker(flag = true) {\n  const bm = this;\n  bm.checkMarkerFlag = flag;\n}\n\n/* 框选 marker */\nfunction _boxSelectMarker(flag = true) {\n  const bm = this;\n  bm.boxSelectMarkerFlag = flag;\n  // 清除已经画出来的框\n  bm.contextMouse.clearRect(0, 0, bm.width, bm.height);\n}\n\n/* 点击地图 */\nfunction _changeClickMap(flag = true) {\n  const bm = this;\n  bm.clickMapFlag = flag;\n}\n\n/* 批量设置marker flag */\nfunction _batchMarkerFlag(flag = false) {\n  const bm = this;\n  bm.moveMarkerFlag = flag;\n  bm.selectMarkerFlag = flag;\n  bm.checkMarkerFlag = flag;\n  bm.clickMapFlag = flag;\n  if (bm.boxSelectMarkerFlag) {\n    bm.boxSelectMarkerFlag = flag;\n    bm._boxSelectMarker(false);\n  }\n}\n\n/* 全部flag设置为false */\nfunction _setAllMarkerFlag(flag = false) {\n  const bm = this;\n  bm.moveMarkerFlag = flag;\n  bm.selectMarkerFlag = flag;\n  bm.boxSelectMarkerFlag = flag;\n}\n\n/* 绘制移动的marker */\nfunction _drawMovedMarker(e, marker) {\n  const bm = this;\n  // clear\n  bm.contextMouse.clearRect(0, 0, bm.width, bm.height);\n\n  // 计算鼠标位置\n  const pos = (0,_util__WEBPACK_IMPORTED_MODULE_0__.windows2canvas)(e.clientX, e.clientY, bm.canvasMouse);\n\n  // 计算偏移\n  const iconWidth = marker.size[0] * 1.25;\n  const iconHeight = marker.size[1] * 1.25;\n  const drawPosX = pos.x - iconWidth / 2;\n  const drawPosY = pos.y - iconHeight; /// 2\n\n  marker.x = drawPosX;\n  marker.y = drawPosY;\n  const iconImage = new Image();\n  iconImage.src = marker.icon;\n  iconImage.onload = () => {\n    bm.contextMouse.drawImage(iconImage, drawPosX, drawPosY, iconWidth, iconHeight);\n  };\n}\n\n/* draw marker */\nfunction _drawMarker() {\n  const bm = this;\n  const markerList = bm.markerList;\n  if (!bm.contextMarker) return;\n  bm.contextMarker.clearRect(0, 0, bm.width, bm.height);\n  if (markerList && markerList.length) {\n    markerList.map(marker => {\n      const iconImage = new Image();\n      iconImage.src = marker.icon;\n      const pos = getMarkerCoordinate(marker, bm);\n      marker.x = pos.x;\n      marker.y = pos.y;\n      iconImage.onload = () => {\n        bm.contextMarker.drawImage(iconImage, pos.x, pos.y, marker.size[0], marker.size[1]);\n      };\n      drawMarkerText(marker, bm);\n      return marker;\n    });\n  }\n}\n\n// marker信息处理\nfunction processMarker(marker, bm) {\n  let markerList = [];\n  if (Array.isArray(marker)) {\n    markerList = marker;\n  } else {\n    markerList = [marker];\n  }\n  markerList = markerList.map(marker => mergeMarker(marker));\n  return markerList;\n}\n\n// 获取在点击位置的点位\nfunction getMarkerOnPos(pos, bm) {\n  if (!bm.markerList.length) return [];\n  const clickX = pos.x;\n  const clickY = pos.y;\n  const markers = [];\n  bm.markerList.map(m => {\n    if (clickX >= m.x && clickX <= m.x + m.size[0] && clickY >= m.y && clickY <= m.y + m.size[1]) {\n      markers.push(m.originMarker);\n    }\n  });\n  return markers;\n}\n\n// 合并marker配置\nfunction mergeMarker(marker) {\n  const textStyle = Object.assign({}, markerOptins.textStyle, marker.textStyle);\n  const opts = Object.assign({}, markerOptins, marker);\n  return Object.assign({}, opts, {\n    markerId: (0,_util__WEBPACK_IMPORTED_MODULE_0__.getRandom)(),\n    position: marker.position,\n    title: opts.title,\n    icon: opts.icon,\n    size: opts.size,\n    x: 0,\n    y: 0,\n    originMarker: marker,\n    textStyle\n  });\n}\n\n// 根据position计算marker左上角像素坐标\nfunction getMarkerCoordinate(marker, bm) {\n  const sizeX = parseInt(marker.size[0]);\n  const sizeY = parseInt(marker.size[1]);\n  const halfSizeX = sizeX / 2;\n  const halfSizeY = sizeY / 2;\n  const offsetX = parseInt(marker.offset[0]) || 0;\n  const offsetY = parseInt(marker.offset[1]) || 0;\n  const per = (0,_util__WEBPACK_IMPORTED_MODULE_0__.millimeter2percent)(marker.position[0], marker.position[1], bm);\n  let x = parseInt(bm.rect.x + per.x * bm.rect.width * bm.scale);\n  let y = parseInt(bm.rect.y + per.y * bm.rect.height * bm.scale);\n  switch (marker.anchor) {\n    case 'top-left':\n      break;\n    case 'top-center':\n      x -= halfSizeX;\n      break;\n    case 'top-right':\n      x -= sizeX;\n      break;\n    case 'middle-left':\n      y -= halfSizeY;\n      break;\n    case 'center':\n      x -= halfSizeX;\n      y -= halfSizeY;\n      break;\n    case 'middle-right':\n      x -= sizeX;\n      y -= halfSizeY;\n      break;\n    case 'bottom-left':\n      y -= sizeY;\n      break;\n    case 'bottom-center':\n      x -= halfSizeX;\n      y -= sizeY;\n      break;\n    case 'bottom-right':\n      x -= sizeX;\n      y -= sizeY;\n      break;\n  }\n  x += offsetX;\n  y += offsetY;\n  return {\n    x,\n    y\n  };\n}\n\n// 根据左上角坐标计算anchor坐标\nfunction getAnchorCoordinate(marker) {\n  const sizeX = parseInt(marker.size[0]);\n  const sizeY = parseInt(marker.size[1]);\n  const halfSizeX = sizeX / 2;\n  const halfSizeY = sizeY / 2;\n  const offsetX = parseInt(marker.offset[0]) || 0;\n  const offsetY = parseInt(marker.offset[1]) || 0;\n  let x = marker.x;\n  let y = marker.y;\n  switch (marker.anchor) {\n    case 'top-left':\n      break;\n    case 'top-center':\n      x += halfSizeX;\n      break;\n    case 'top-right':\n      x += sizeX;\n      break;\n    case 'middle-left':\n      y += halfSizeY;\n      break;\n    case 'center':\n      x += halfSizeX;\n      y += halfSizeY;\n      break;\n    case 'middle-right':\n      x += sizeX;\n      y += halfSizeY;\n      break;\n    case 'bottom-left':\n      y += sizeY;\n      break;\n    case 'bottom-center':\n      x += halfSizeX;\n      y += sizeY;\n      break;\n    case 'bottom-right':\n      x += sizeX;\n      y += sizeY;\n      break;\n  }\n  x -= offsetX;\n  y -= offsetY;\n  return {\n    x,\n    y\n  };\n}\n\n/* 左上角坐标计算position */\nfunction getMarkerPosition(marker, bm, sizeScale = 1) {\n  const sizeX = parseFloat(marker.size[0] * sizeScale);\n  const sizeY = parseFloat(marker.size[1] * sizeScale);\n  const halfSizeX = sizeX / 2;\n  const halfSizeY = sizeY / 2;\n  const offsetX = parseInt(marker.offset[0]) || 0;\n  const offsetY = parseInt(marker.offset[1]) || 0;\n  let x = marker.x - offsetX;\n  let y = marker.y - offsetY;\n  switch (marker.anchor) {\n    case 'top-left':\n      break;\n    case 'top-center':\n      x += halfSizeX;\n      break;\n    case 'top-right':\n      x += sizeX;\n      break;\n    case 'middle-left':\n      y += halfSizeY;\n      break;\n    case 'center':\n      x += halfSizeX;\n      y += halfSizeY;\n      break;\n    case 'middle-right':\n      x += sizeX;\n      y += halfSizeY;\n      break;\n    case 'bottom-left':\n      y += sizeY;\n      break;\n    case 'bottom-center':\n      x += halfSizeX;\n      y += sizeY;\n      break;\n    case 'bottom-right':\n      x += sizeX;\n      y += sizeY;\n      break;\n  }\n  const perX = (x - bm.rect.x) / (bm.rect.width * bm.scale);\n  const perY = (y - bm.rect.y) / (bm.rect.height * bm.scale);\n  const position = [Math.round(bm.mapWidth * perX), Math.round(bm.mapHeight * perY)];\n  return position;\n}\n\n/* 选出鼠标选择的marker */\nfunction selectMouseOnMarker(e, bm) {\n  let sm = null;\n  const pos = (0,_util__WEBPACK_IMPORTED_MODULE_0__.windows2canvas)(e.clientX, e.clientY, bm.canvasMouse);\n  bm.markerList.some(marker => {\n    if (pos.x >= marker.x && pos.x <= marker.x + marker.size[0] && pos.y >= marker.y && pos.y <= marker.y + marker.size[1]) {\n      sm = marker;\n      return true;\n    }\n  });\n  return sm;\n}\n\n/* 选出框选选中的marker */\nfunction getBoxSelectedMarker(e, bm) {\n  const markerList = bm.markerList;\n  if (!markerList || !markerList.length) return [];\n  const start = bm.startDragPosition;\n  const end = (0,_util__WEBPACK_IMPORTED_MODULE_0__.windows2canvas)(e.clientX, e.clientY, bm.canvasMouse);\n  const arr = [];\n  const smallX = Math.min(start.x, end.x);\n  const bigX = Math.max(start.x, end.x);\n  const smallY = Math.min(start.y, end.y);\n  const bigY = Math.max(start.y, end.y);\n  markerList.map(m => {\n    const mPos = getAnchorCoordinate(m);\n    if (mPos.x >= smallX && mPos.x <= bigX && mPos.y >= smallY && mPos.y <= bigY) {\n      arr.push(m.originMarker);\n    }\n  });\n  return arr;\n}\n\n/* 绘制marker text */\nfunction drawMarkerText(marker, bm, isHover) {\n  if (!marker.text) return;\n  if (marker.showText === 'none') return;\n  if (marker.showText === 'always' && isHover) return;\n  if (marker.showText === 'hover' && !isHover) return;\n  let ctx;\n  if (isHover) {\n    ctx = bm.contextMarkerHover;\n  } else {\n    ctx = bm.contextMarker;\n  }\n  const {\n    fontSize,\n    fontFamily,\n    fontWeight,\n    color,\n    position\n  } = marker.textStyle;\n  if (marker.showText === 'hover') {\n    ctx.clearRect(0, 0, bm.width, bm.height);\n  }\n  let x = marker.x;\n  let y = marker.y;\n  switch (position) {\n    case 'top':\n      ctx.textAlign = 'center';\n      x += marker.size[0] / 2;\n      y -= 5;\n      break;\n    case 'bottom':\n      ctx.textAlign = 'center';\n      x += marker.size[0] / 2;\n      y += marker.size[1] + fontSize + 5;\n      break;\n    case 'left':\n      ctx.textAlign = 'right';\n      x -= 5;\n      y += marker.size[1] / 2 + fontSize / 2;\n      break;\n    case 'right':\n      ctx.textAlign = 'left';\n      x += 5 + marker.size[0];\n      y += marker.size[1] / 2 + fontSize / 2;\n      break;\n    default:\n      ctx.textAlign = 'center';\n      x += marker.size[0] / 2;\n      y -= 5;\n      break;\n  }\n  ctx.font = `${fontWeight} ${fontSize}px ${fontFamily}`;\n  ctx.fillStyle = color;\n  ctx.fillText(marker.text, x, y);\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29yZS9tYXJrZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFHQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9iYW9zaWdodC1tYXAvLi9zcmMvY29yZS9tYXJrZXIuanM/ZTQyOCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXRSYW5kb20sIGNyZWF0ZUNhbnZhcywgd2luZG93czJjYW52YXMsIG1pbGxpbWV0ZXIycGVyY2VudCB9IGZyb20gJy4uL3V0aWwnXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbWFya2VyTWl4aW4oQlNNYXApIHtcclxuICAvLyDliqDovb1tYXJrZXIg5Yi35pawbWFya2VyXHJcbiAgQlNNYXAucHJvdG90eXBlLmxvYWRNYXJrZXIgPSBCU01hcC5wcm90b3R5cGUudXBkYXRlTWFya2VyID0gZnVuY3Rpb24gKG1hcmtlcikge1xyXG4gICAgY29uc3QgYm0gPSB0aGlzXHJcblxyXG4gICAgaWYgKCFibS5jYW52YXNNYXJrZXIpIHtcclxuICAgICAgLy8gY3JlYXRlIG1hcmtlciBjYW52YXNcclxuICAgICAgYm0uY2FudmFzTWFya2VyID0gY3JlYXRlQ2FudmFzKGJtLCB7IHpJbmRleDogMTAwLCBpZDogJ21hcmtlckNhbnZhcycgfSlcclxuICAgICAgYm0uY29udGV4dE1hcmtlciA9IGJtLmNhbnZhc01hcmtlci5nZXRDb250ZXh0KCcyZCcpXHJcblxyXG4gICAgICBibS5jYW52YXNNYXJrZXJIb3ZlciA9IGNyZWF0ZUNhbnZhcyhibSwgeyB6SW5kZXg6IDEwMSwgaWQ6ICdtYXJrZXJIb3ZlckNhbnZhcycgfSlcclxuICAgICAgYm0uY29udGV4dE1hcmtlckhvdmVyID0gYm0uY2FudmFzTWFya2VySG92ZXIuZ2V0Q29udGV4dCgnMmQnKVxyXG4gICAgfVxyXG5cclxuICAgIGJtLm1hcmtlckxpc3QgPSBwcm9jZXNzTWFya2VyKG1hcmtlciwgYm0pXHJcblxyXG4gICAgYm0uX2RyYXdNYXJrZXIoKVxyXG4gIH1cclxuICAvLyDmt7vliqBtYXJrZXJcclxuICBCU01hcC5wcm90b3R5cGUuYWRkTWFya2VyID0gZnVuY3Rpb24gKG1hcmtlcikge1xyXG4gICAgY29uc3QgYm0gPSB0aGlzXHJcblxyXG4gICAgaWYgKCFibS5jYW52YXNNYXJrZXIpIHtcclxuICAgICAgLy8gY3JlYXRlIG1hcmtlciBjYW52YXNcclxuICAgICAgYm0uY2FudmFzTWFya2VyID0gY3JlYXRlQ2FudmFzKGJtLCB7IHpJbmRleDogMTAwLCBpZDogJ21hcmtlckNhbnZhcycgfSlcclxuICAgICAgYm0uY29udGV4dE1hcmtlciA9IGJtLmNhbnZhc01hcmtlci5nZXRDb250ZXh0KCcyZCcpXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgbWFya2VyTGlzdCA9IHByb2Nlc3NNYXJrZXIobWFya2VyLCBibSlcclxuXHJcbiAgICBibS5tYXJrZXJMaXN0ID0gYm0ubWFya2VyTGlzdC5jb25jYXQobWFya2VyTGlzdClcclxuXHJcbiAgICBibS5fZHJhd01hcmtlcigpXHJcbiAgfVxyXG4gIC8vIOa3u+WKoG1hcmtlclxyXG4gIEJTTWFwLnByb3RvdHlwZS5vbkFkZE1hcmtlciA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xyXG4gICAgaWYgKGNhbGxiYWNrICYmIHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICBCU01hcC5wcm90b3R5cGUuX29uQWRkTWFya2VyID0gY2FsbGJhY2tcclxuICAgIH1cclxuICB9XHJcbiAgLy8g56e75YqobWFya2VyXHJcbiAgQlNNYXAucHJvdG90eXBlLm9uTW92ZU1hcmtlciA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xyXG4gICAgY29uc3QgYm0gPSB0aGlzXHJcblxyXG4gICAgYm0uX2JhdGNoTWFya2VyRmxhZygpXHJcbiAgICBibS5fc2V0QWxsRmVuY2VGbGFnKClcclxuICAgIGJtLl9tb3ZlTWFya2VyKClcclxuICAgIGlmIChjYWxsYmFjayAmJiB0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgQlNNYXAucHJvdG90eXBlLl9vbk1vdmVNYXJrZXIgPSBjYWxsYmFja1xyXG4gICAgfVxyXG4gIH1cclxuICAvLyDnu5PmnZ/np7vliqhtYXJrZXJcclxuICBCU01hcC5wcm90b3R5cGUuZW5kTW92ZU1hcmtlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHRoaXMuX21vdmVNYXJrZXIoZmFsc2UpXHJcbiAgfVxyXG4gIC8vIOeCuemAiW1hcmtlclxyXG4gIEJTTWFwLnByb3RvdHlwZS5vblNlbGVjdE1hcmtlciA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xyXG4gICAgY29uc3QgYm0gPSB0aGlzXHJcblxyXG4gICAgYm0uX2JhdGNoTWFya2VyRmxhZygpXHJcbiAgICBibS5fc2V0QWxsRmVuY2VGbGFnKClcclxuICAgIGJtLl9zZWxlY3RNYXJrZXIoKVxyXG4gICAgaWYgKGNhbGxiYWNrICYmIHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICBCU01hcC5wcm90b3R5cGUuX29uU2VsZWN0TWFya2VyID0gY2FsbGJhY2tcclxuICAgIH1cclxuICB9XHJcbiAgLy8gZW5kIOeCuemAiW1hcmtlclxyXG4gIEJTTWFwLnByb3RvdHlwZS5lbmRTZWxlY3RNYXJrZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICBjb25zdCBibSA9IHRoaXNcclxuXHJcbiAgICBibS5fc2VsZWN0TWFya2VyKGZhbHNlKVxyXG4gIH1cclxuXHJcbiAgLy8g5p+l55yLbWFya2VyXHJcbiAgQlNNYXAucHJvdG90eXBlLm9uQ2hlY2tNYXJrZXIgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcclxuICAgIGNvbnN0IGJtID0gdGhpc1xyXG5cclxuICAgIGJtLl9iYXRjaE1hcmtlckZsYWcoKVxyXG4gICAgYm0uX3NldEFsbEZlbmNlRmxhZygpXHJcbiAgICBibS5fY2hlY2tNYXJrZXIoKVxyXG4gICAgaWYoY2FsbGJhY2sgJiYgdHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nKXtcclxuICAgICAgQlNNYXAucHJvdG90eXBlLl9vbkNoZWNrTWFya2VyID0gY2FsbGJhY2tcclxuICAgIH1cclxuICB9XHJcbiAgLy8g57uT5p2f5p+l55yLbWFya2VyXHJcbiAgQlNNYXAucHJvdG90eXBlLmVuZENoZWNrTWFya2VyID0gZnVuY3Rpb24gKCl7XHJcbiAgICBjb25zdCBibSA9IHRoaXNcclxuXHJcbiAgICBibS5fY2hlY2tNYXJrZXIoZmFsc2UpXHJcbiAgfVxyXG4gIC8vIOahhumAiW1hcmtlclxyXG4gIEJTTWFwLnByb3RvdHlwZS5vbkJveFNlbGVjdE1hcmtlciA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xyXG4gICAgY29uc3QgYm0gPSB0aGlzXHJcblxyXG4gICAgYm0uX2JhdGNoTWFya2VyRmxhZygpXHJcbiAgICBibS5fc2V0QWxsRmVuY2VGbGFnKClcclxuICAgIGJtLl9ib3hTZWxlY3RNYXJrZXIoKVxyXG4gICAgaWYgKGNhbGxiYWNrICYmIHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICBCU01hcC5wcm90b3R5cGUuX29uQm94U2VsZWN0TWFya2VyID0gY2FsbGJhY2tcclxuICAgIH1cclxuICB9XHJcbiAgLy8gZW5kIOahhumAiW1hcmtlclxyXG4gIEJTTWFwLnByb3RvdHlwZS5lbmRCb3hTZWxlY3RNYXJrZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICBjb25zdCBibSA9IHRoaXNcclxuXHJcbiAgICBibS5fYm94U2VsZWN0TWFya2VyKGZhbHNlKVxyXG4gIH1cclxufVxyXG5cclxuY29uc3QgbWFya2VySWNvbiA9XHJcbiAgJ2RhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBSUFBQUFDQUNBWUFBQUREUG1ITEFBQUFBWE5TUjBJQXJzNGM2UUFBREtwSlJFRlVlRjd0blh1d0U5VWR4NysvNUY0UUVLbFlyZUxZQW1iRDlTMDNONjJQS1FwMFZPb2YxYloyYXFHMmdKQVQ3Q2o0ckIzUlVaeTJpZ0k2bFd4QW9BK3RuVXFyL2NPaWpDRGlLTGJaWEJCZmwyemsyanFpMVlxdENBajNKci9PSm5HbUtoZVRQV2RmeWU0TWYzRityKy81M0hQT2JzNmVKVFRwbGNqdUdBcnM3dUF5VG9nU2R6Q29BOEN4QUIzS3dIQUNEd2RnL2JPdVhRemFSY0F1Z0Q4RThDYUJlMHBNUFJUQnE4Q3dubnhxMUo1bWxJcWFwYWhML3NqUjEzZWFaNWVCQ1JHbUM1bHdoc3JhaVBGOG1maXhDTEJ4OUVqdDJZZS9SeVdWL3IzeUZXZ0F6cnovalpIOWZSOU5LUk9tRVBORUVJMXlSVWptSFV6MFZJU3hwcTM5a0RXYkxqOXVweXR4SFFnU09BQXFmK252RmI5ZjZYVHdGSUJHT3FCTEF5NTVKNFBXV0RDTVBpTDJoNkNORElFQklKRjliUVNoUEIyZzZXQSt0WUVlY3E4cDBWYUFWekVpcS9LcDQvL3JYbUQ3a1h3UHdPbUxlNzhRSFZMNkNhRThBNkF4OWt0MTA1SjdHWkdWcGIzUlgyMlpOK1kvYmtadU5KYXZBVWdzM1hZUlJTSzNBRGk5MGNKODBuNExsOHUzNXVlTWU5UW4rWHdtRFY4Q1lQM1Z0dzNwdHpwK3JsK0ZhekN2SmYxNzIyNzE0MmpnT3dDU2VzOEZqT2d2QXZ4WFB4QWJXd2lsRzNPaTQvRUc0WEcwdWE4QVNPcm1qUXo4M05HS1BYWk93TTl5UXJNQTk4WGxDd0NTU3d0ak9VSjNBUGl1TDFSeFBvblZWT1liY25QaTI1MFBkZkFJbmdPUXlMNTJJYUc4Qkl5WTEySzRHcDlRWkVUbTVsUEhQK1pxM0U4Rjh4U0FMdDJjQ2VCK0x3WHdRZXpMRGFHdDhDb1B6d0RveWhTdUIxV0cvZkJpdnNGSXgrLzBRZ2hQQUVqcWhla01XdWxGd1g2TlNlQVpPUkZmNVhaK3JnT1F5QlluRXZONnR3c05RandtbXBSUHhaNXlNMWRYQVVndTI1YmtjdVR2YmhZWXRGZ1VLWDgxTjN0Y3pxMjhYUU9nZXF1SHgxRGRtQkZlQXlyQVBWVEdoVzdkSXJvR1FKZHVQdHhDOS9teWdLODJoSGFKckpONjdGMEJvQldlOE5VamRpTnQzSHBpNkRnQXRXZjdheG9wUG14YlZZQlFtdUwwYndlT0FsRDdWYzlhMVFiMTUxeXZXZHpTdjdkdG9wTy9Jam9LUUpkdUxtNmluM1M5Z21HSkliUjVUZ1YzRElEYVpvNUhuRXE4bGZ4eXVYeXhVNXRLSEFFZ0hQcVY0K25ZVk9BSUFBbTllQk9CRnlpWG9ZVWRNbWgrWHNSdVZ5MkJjZ0FxdTNlNXREazRHemhWUytxVVArNWxpbzVYdmR0WU9RQmRXWE11R05iaUw3eFVLMENZWjZTMEpTcmRLZ1hBZW1tajkvM1h1bjI3YjErbGNsNzRJdG82NXZEak8xVytmS0lVZ0dUR25NcUVCN3pRcGxWaUVtTmFMcTA5cUtwZXBRQWtkUE1CQXFhcVNpNzA4MWtGR0hnd0w3UnBxclJSQm9EMW9tWmYvMTdUKzNmMVZFbmpWeis4czcxdGlLYnFoVlJsQUlURHYzdkFxSndHbEFFUUR2L3VBYUJ5R2xBQ1FHWDF2N1A0Sm9BdnVTZERTMGY2MTVpUnNXTlYzQTBvQVNDUjNYNGVjZW1KbHU0U2w0dG5pcDZmVDQxZEt4dFdDUUJkZXVGT2dLNlRUU2EwYjBRQlhtaUkrUFdOV0J5b3JTSUF6RHlBVHRsa1F2dUdGT2cyaEpab3lPSUFqYVVCc0U3akl0NjlXemFSMEw1eEJaaUdEWk05dlV3QkFHWW5NYXdSSUx4Y1ZvQUppWHhLNjVZSkt3MUFaOGFjR2drZi84cjBnVzNiTW1OYXQrUmpZV2tBa25waEFZTnVzbDFGYUdoYkFRTGZuaFB4K2JZZFZEYWVTbDdoZm45SkFlWE1wZDhmVUFIQWN3RE9sS3NqdExhcHdDWkRhR2ZadEsyWUtRQ2dhSjJOZDRwTUVxR3RYUVhvUlVQRXBNNU1sQVlnb1JkN0NUemFiZ21oblgwRkdQUjZYc1Nrems2VUJxQkxOLzhONEFqN1pZU1dFZ3E4WndqdGl4TDJLcVlBY3grQVFUSkpoTGEyRmRodkNHMndiV3MxYXdCelA0QjJtU1JDVzlzSzlCbENrL3JqVXpFRldJY2lIMmE3aE5CUVJvRVBES0dOa0hHZ0FJRGlXd0FmTFpORWFHdFhBWHJiRUxGajdGb3J1ZzAwcmNNT3BWYWlNZ1cwdUcydkliU3hNaHJJandCWjh5VXdUcEpKSXJTMXFRRGhaU09sbld6VHVtSW1ENEJ1V2djYWRja2tFZHJhVnNBd2hKYTBiYTBDZ0VTbXNKR0l2aTZUUkdoclR3Rm1maWFmamsrd1oxMjFraDRCa2hsektSUFNNa21FdHZZVUlFWW1sOWJtMkxOV0JFQ1hYcndNNE4vSUpCSGEybFdBZm1TSTJHL3RXaXNaQVRxWGJ6ODFVaXE5SUpORWFHdFBnWEkwZWxyM3JMRmI3VmtyR2dFc04wbTl1SlBCaDhza0V0bzJwZ0NCM3MrSm1QUW44NlRYQUZiYVhWbnpDVERPYTZ5RXNMV1VBb1MxUmtvN1g4cUhpa1dnbFVCQ0x5d2swTFd5eVlUMjlTdkE0THZ5SWk3OUxvYWFFU0Jqbmd1Q3E2ZGMxeTlWazdaa1REVFMyZ2JaNnBRQVVKa0dkTk1DNEZ6WmhFTDd1aFRZWUFodFlsMHRQNmVSTWdDU3VqbUhnZnRVSkJYNk9MZ0NCRnlSRTlwU0ZUb3BBMkQ4U3ZQSTZENjhETUtSS2hJTGZReWdBT1BkMG1DY3RIbUc5cTRLalpRQlVGME1tdmNSSVBWa1NrVlJ6ZXlEZ2FWNW9WMmhxa2FsQUhTRmkwRlYvVEt3SDBXTHY0OERLQVdnc2hqTW1xdkIrSTd6U3JSZ0JNS2ZqSlNtOU9PYXlnRkk2b1VKREhxNkJidkg4WklKZkU1T3hEZXFES1FjZ01vb2tDbm9JRXFwVExUbGZURm5qWFJjcU5iQkVRQTZsNzkrUXFUVTkzeTRXVlJaZDMxUWpyYWYwVDFyOUt2S1BOWWNPUUtBNVR0OGExaGRWNmw0QzNpZ2JCd0RZUHk5NXBIUmRuNGVSRktiRnRYSkdGQlB6TnRMZlhURzVpdlYzUGQvV2dYSEFLZzhGOGdXcnlUbWV3SXF2Uy9TWnFLcjhxbll2VTRsNHlnQTFhbWd1SkhCNFo1Qkd6MUlvR2R5SWlhMTUrL3p3cm9Cd0FVTURqOGI5M2s5Y1lEL0o5Q1VuSWc5YnNPMGJoUEhBYWhNQlhweENZR3ZxanVyc0NFWWRFOWV4T1k2TFlVckFKeVZLUjYxbjdBUjRIRk9GOVFjL21uYklNYUU1OUt4ZDV5dXh4VUFLZytId3QzRERmU2wvRzdmZW9PNUJrQU5ndDhEZkdtOXliVm1PM3JJRUxFZnVGVzd1d0JraWljVHdib3JDSGNRSDNqUjl6NHpKaGpwMkV0TkNVRHR0dkJhQmk5MHE4QWd4U0hRZFRrUnU4dk5uRjBkQVQ0dXJFc3ZQZ253WkRjTDlYOHNXbWVJMkRmY3p0TVRBQ28vR1RQV2dhak43WUo5R1krNW53aVRWZi9VVzArdG5nQlFmVFpnM2tEQUwrdEpzdG5iTVBEVHZORHU4S0pPendDbzNoV1lqd0w0bGhlRit5am1Yd3loWGVSVlB0NENVTGtyNEhVTUhPV1ZBRjdHSmVBZFpwcnM1cXIvMC9WNkNrRGxyaUJUbk1YRXk3enNDSzlpRTlQc1hEcTIzS3Y0Vmx6UEFhaE5CU3NCVFBkU0NBOWlyektFTnNPRHVKOEk2UXNBeHEvNDU2aG8zNzUxQURxOEZzU2wrRDJsOXNHVE44Lzg4ZzZYNGcwWXhoY0ExRVlCYTd2encxNEw0bEw4U3d5aHJYWXAxa0hEK0FhQUdnUjNBN2phRDhJNG1NTWlRMmpYT09pL0lkZStBdURNUlc4TTZSdjZrVFVWTk9zSEtEYTE3emxrOHFhcmo5dmJVQzg1Mk5oWEFGaDFkbWFLa3lMRUZnUk5kNVdaSm5lblkrdjlWSmp2QUxERVNXUUs4NG5vTmo4Skpac0xNOStjVDhjWHlQcFJiZTlMQUdyckFldGJ4TTF5N3RCYVE4aWY1Nk82OHkxL3ZnVWdrUzE4alppczRYS29FNFc3NkhNUEUwL0twK0ovY3pGbTNhRjhDMEJsS3RETnF3bXc3Z3dDZXpGd1RWNW9pL3hhZ0s4QnNFUkw2c1UvTS9oaXZ3cDRzTHdJOUVoT3hMN3Q1OXg5RDBCWHBuZ3lJcndlSExDalp3anZva3lUdlB5aHB4N3dmQTlBZFNvb0NBSmw2aW5JTDIwWW5NNkx1TzZYZkFiS0l4QUExTllERHhBdzFlK0NXdmt4OEdCZWFOT0NrR3RnQURoN1JjL3dmZnVqTDRMd0ZWOEx5L2pINEVHbFU1NmQyYkhMMTNuV2tnc01BSlZuQTh2TUg2SU1xZVBSSGUrVUNDNHpabXUvY3p5T29nQ0JBcUFDZ1Y3TUFqeGJVZjJLM2RBeVE4UUNkVFJPNEFDb3JRZGVKdUJFeGIwbjVZNkJWL0pDQzl6SHN3SUpRRkl2K3U2VmN6ZGU1WllpZEFEalFBSlFuUXJNeFFBY2YzMjZUdEdYR0VLYlYyZGJYelVMTEFBMUNQend5VHJwVDdkNVNVU2dBZWhjWGpnaFVxSlh2QlN3SE9VVHUyZkZsUi9mNWxaTmdRYkFFaW1wRnhjdytDYTNCUHYvT0FTNlBTZGk4NzJJclNwbTRBR29UQVZaY3dNWTU2Z1NwUzQvaEtlTmxCYjREMlEwQlFDbkxueGgyS0RoUTYzUDJFZnI2ano1UnFYOXUvYU0ySHJkYWJ2bFhYbnJvU2tBcUR3YnlKcVhFOE9WdDJ5WU1DdWYwdTczdHV2VVJHOGFBQ3BUUWNiOEt3aFQxRWd6Z0JmR0dpT3RmZFBSR0M0NmJ5b0FxcmVHaFE4QUd1Nk1ocnpMRVBIRG5QSHRqZGVtQXlDUk5jOGpocldoVlBuRmhQUHpLVzJ0Y3NjZU9tdzZBQ3JyQWIyNGlzQS9WcWtyZzM2ZEY3R21lNEcxS1FHb1RnWG1Xd0NPVmdUQjI0YlFqbEhreTFkdW1oZUFwVDNqRUluMktGRzdYT293NW5Sc1UrTExaMDZhRm9EcVZHRGVTc0ROTXBvemNGdGVhTGZJK1BDemJWTURZQW1mMUlzRkJtdDJPb0ZBWms3RTRuWnNnMkxUOUFDY3U2cjNrQS8zOWR0NkcvZlF3VzFETmt3ZjgxRlFPdE5PbmswUFFHVkJtREZuZ0xDaUlZRVlNNDIwWmgxZDA5UlhTd0JRdlNzb1BBbFFuYWVUOGpwRHhGMC90ZE1MMGxvR2dBb0VXZk5OTUVZZFZHakNEaU9sSGV0RlozZ1JzNlVBcUVHd0NJd0RiOThpTERaU1dyTWZVZk1KemxvT2dOcDBjQ2tSVFdLdUhsaE5ST3VZZWIwaDRnOTU4VmZvWmN6L0FWMHh2YTVLS055dkFBQUFBRWxGVGtTdVFtQ0MnXHJcblxyXG5jb25zdCBtYXJrZXJPcHRpbnMgPSB7XHJcbiAgcG9zaXRpb246IFswLCAwXSwgLy8g5L2N572u77ya6L2s5o2i5YmN55qE5Zyw5Zu+5Z2Q5qCH77yI5q+r57Gz77yJLCBbeCwgeV1cclxuICB0ZXh0OiAnJywgLy8g5qCH6K6w54K55L2N5paH5a2XXHJcbiAgaWNvbjogbWFya2VySWNvbiwgLy8g5qCH6K6w5Zu+5qCHXHJcblxyXG4gIC8vIOmUmueCueaWueS9je+8mnRvcC1sZWZ0LCB0b3AtY2VudGVyLCAgbWlkZGxlLXJpZ2h0LFxyXG4gIC8vIOmUmueCueaWueS9je+8mnRvcC1yaWdodCwgbWlkZGxlLWxlZnQsIGNlbnRlcixcclxuICAvLyDplJrngrnmlrnkvY3vvJpib3R0b20tbGVmdCwgYm90dG9tLWNlbnRlciwgYm90dG9tLXJpZ2h0XHJcbiAgYW5jaG9yOiAnYm90dG9tLWNlbnRlcicsXHJcbiAgc2l6ZTogWzIwLCAyMF0sIC8vIOWbvuagh+Wkp+Wwj++8iOWuveOAgemrmO+8ie+8iOWDj+e0oO+8iVxyXG4gIG9mZnNldDogWzAsIDBdLCAvLyDlgY/np7vvvIjmsLTlubPjgIHlnoLnm7TvvInvvIjlg4/ntKDvvIlcclxuICBzaG93VGV4dDogJ2Fsd2F5cycsIC8vIGFsd2F5cywgaG92ZXIsIG5vbmVcclxuICB0ZXh0U3R5bGU6IHtcclxuICAgIGZvbnRTaXplOiAxNCwgLy8g5Y2V5L2N77yacHhcclxuICAgIGZvbnRGYW1pbHk6ICdzYW5zLXNlcmlmJyxcclxuICAgIGZvbnRXZWlnaHQ6ICdub3JtYWwnLFxyXG4gICAgY29sb3I6ICdibGFjaycsXHJcbiAgICBwb3NpdGlvbjogJ2JvdHRvbSdcclxuICB9XHJcbn1cclxuXHJcbi8qIOenu+WKqCBtYXJrZXIgKi9cclxuZXhwb3J0IGZ1bmN0aW9uIF9tb3ZlTWFya2VyKGZsYWcgPSB0cnVlKSB7XHJcbiAgY29uc3QgYm0gPSB0aGlzXHJcbiAgYm0ubW92ZU1hcmtlckZsYWcgPSBmbGFnXHJcbn1cclxuXHJcbi8qIOeCuemAiSBtYXJrZXIgKi9cclxuZXhwb3J0IGZ1bmN0aW9uIF9zZWxlY3RNYXJrZXIoZmxhZyA9IHRydWUpIHtcclxuICBjb25zdCBibSA9IHRoaXNcclxuICBibS5zZWxlY3RNYXJrZXJGbGFnID0gZmxhZ1xyXG59XHJcblxyXG4vLyDmn6XnnIsgbWFya2VyXHJcbmV4cG9ydCBmdW5jdGlvbiBfY2hlY2tNYXJrZXIoZmxhZyA9IHRydWUpIHtcclxuICBjb25zdCBibSA9IHRoaXM7XHJcbiAgYm0uY2hlY2tNYXJrZXJGbGFnID0gZmxhZ1xyXG59XHJcblxyXG4vKiDmoYbpgIkgbWFya2VyICovXHJcbmV4cG9ydCBmdW5jdGlvbiBfYm94U2VsZWN0TWFya2VyKGZsYWcgPSB0cnVlKSB7XHJcbiAgY29uc3QgYm0gPSB0aGlzXHJcbiAgYm0uYm94U2VsZWN0TWFya2VyRmxhZyA9IGZsYWdcclxuICAvLyDmuIXpmaTlt7Lnu4/nlLvlh7rmnaXnmoTmoYZcclxuICBibS5jb250ZXh0TW91c2UuY2xlYXJSZWN0KDAsIDAsIGJtLndpZHRoLCBibS5oZWlnaHQpXHJcbn1cclxuXHJcbi8qIOeCueWHu+WcsOWbviAqL1xyXG5leHBvcnQgZnVuY3Rpb24gX2NoYW5nZUNsaWNrTWFwKGZsYWcgPSB0cnVlKSB7XHJcbiAgY29uc3QgYm0gPSB0aGlzXHJcbiAgYm0uY2xpY2tNYXBGbGFnID0gZmxhZ1xyXG59XHJcblxyXG4vKiDmibnph4/orr7nva5tYXJrZXIgZmxhZyAqL1xyXG5leHBvcnQgZnVuY3Rpb24gX2JhdGNoTWFya2VyRmxhZyhmbGFnID0gZmFsc2UpIHtcclxuICBjb25zdCBibSA9IHRoaXNcclxuICBibS5tb3ZlTWFya2VyRmxhZyA9IGZsYWdcclxuICBibS5zZWxlY3RNYXJrZXJGbGFnID0gZmxhZ1xyXG4gIGJtLmNoZWNrTWFya2VyRmxhZyA9IGZsYWdcclxuICBibS5jbGlja01hcEZsYWcgPSBmbGFnXHJcblxyXG4gIGlmIChibS5ib3hTZWxlY3RNYXJrZXJGbGFnKSB7XHJcbiAgICBibS5ib3hTZWxlY3RNYXJrZXJGbGFnID0gZmxhZ1xyXG4gICAgYm0uX2JveFNlbGVjdE1hcmtlcihmYWxzZSlcclxuICB9XHJcbn1cclxuXHJcbi8qIOWFqOmDqGZsYWforr7nva7kuLpmYWxzZSAqL1xyXG5leHBvcnQgZnVuY3Rpb24gX3NldEFsbE1hcmtlckZsYWcoZmxhZyA9IGZhbHNlKSB7XHJcbiAgY29uc3QgYm0gPSB0aGlzXHJcbiAgYm0ubW92ZU1hcmtlckZsYWcgPSBmbGFnXHJcbiAgYm0uc2VsZWN0TWFya2VyRmxhZyA9IGZsYWdcclxuICBibS5ib3hTZWxlY3RNYXJrZXJGbGFnID0gZmxhZ1xyXG59XHJcblxyXG4vKiDnu5jliLbnp7vliqjnmoRtYXJrZXIgKi9cclxuZXhwb3J0IGZ1bmN0aW9uIF9kcmF3TW92ZWRNYXJrZXIoZSwgbWFya2VyKSB7XHJcbiAgY29uc3QgYm0gPSB0aGlzXHJcbiAgLy8gY2xlYXJcclxuICBibS5jb250ZXh0TW91c2UuY2xlYXJSZWN0KDAsIDAsIGJtLndpZHRoLCBibS5oZWlnaHQpXHJcblxyXG4gIC8vIOiuoeeul+m8oOagh+S9jee9rlxyXG4gIGNvbnN0IHBvcyA9IHdpbmRvd3MyY2FudmFzKGUuY2xpZW50WCwgZS5jbGllbnRZLCBibS5jYW52YXNNb3VzZSlcclxuXHJcbiAgLy8g6K6h566X5YGP56e7XHJcbiAgY29uc3QgaWNvbldpZHRoID0gbWFya2VyLnNpemVbMF0gKiAxLjI1XHJcbiAgY29uc3QgaWNvbkhlaWdodCA9IG1hcmtlci5zaXplWzFdICogMS4yNVxyXG4gIGNvbnN0IGRyYXdQb3NYID0gcG9zLnggLSBpY29uV2lkdGggLyAyXHJcbiAgY29uc3QgZHJhd1Bvc1kgPSBwb3MueSAtIGljb25IZWlnaHQgLy8vIDJcclxuXHJcbiAgbWFya2VyLnggPSBkcmF3UG9zWFxyXG4gIG1hcmtlci55ID0gZHJhd1Bvc1lcclxuXHJcbiAgY29uc3QgaWNvbkltYWdlID0gbmV3IEltYWdlKClcclxuICBpY29uSW1hZ2Uuc3JjID0gbWFya2VyLmljb25cclxuICBpY29uSW1hZ2Uub25sb2FkID0gKCkgPT4ge1xyXG4gICAgYm0uY29udGV4dE1vdXNlLmRyYXdJbWFnZShpY29uSW1hZ2UsIGRyYXdQb3NYLCBkcmF3UG9zWSwgaWNvbldpZHRoLCBpY29uSGVpZ2h0KVxyXG4gIH1cclxufVxyXG5cclxuLyogZHJhdyBtYXJrZXIgKi9cclxuZXhwb3J0IGZ1bmN0aW9uIF9kcmF3TWFya2VyKCkge1xyXG4gIGNvbnN0IGJtID0gdGhpc1xyXG4gIGNvbnN0IG1hcmtlckxpc3QgPSBibS5tYXJrZXJMaXN0XHJcblxyXG4gIGlmICghYm0uY29udGV4dE1hcmtlcikgcmV0dXJuXHJcblxyXG4gIGJtLmNvbnRleHRNYXJrZXIuY2xlYXJSZWN0KDAsIDAsIGJtLndpZHRoLCBibS5oZWlnaHQpXHJcblxyXG4gIGlmIChtYXJrZXJMaXN0ICYmIG1hcmtlckxpc3QubGVuZ3RoKSB7XHJcbiAgICBtYXJrZXJMaXN0Lm1hcChtYXJrZXIgPT4ge1xyXG4gICAgICBjb25zdCBpY29uSW1hZ2UgPSBuZXcgSW1hZ2UoKVxyXG4gICAgICBpY29uSW1hZ2Uuc3JjID0gbWFya2VyLmljb25cclxuXHJcbiAgICAgIGNvbnN0IHBvcyA9IGdldE1hcmtlckNvb3JkaW5hdGUobWFya2VyLCBibSlcclxuXHJcbiAgICAgIG1hcmtlci54ID0gcG9zLnhcclxuICAgICAgbWFya2VyLnkgPSBwb3MueVxyXG5cclxuICAgICAgaWNvbkltYWdlLm9ubG9hZCA9ICgpID0+IHtcclxuICAgICAgICBibS5jb250ZXh0TWFya2VyLmRyYXdJbWFnZShpY29uSW1hZ2UsIHBvcy54LCBwb3MueSwgbWFya2VyLnNpemVbMF0sIG1hcmtlci5zaXplWzFdKVxyXG4gICAgICB9XHJcblxyXG4gICAgICBkcmF3TWFya2VyVGV4dChtYXJrZXIsIGJtKVxyXG5cclxuICAgICAgcmV0dXJuIG1hcmtlclxyXG4gICAgfSlcclxuICB9XHJcbn1cclxuXHJcbi8vIG1hcmtlcuS/oeaBr+WkhOeQhlxyXG5leHBvcnQgZnVuY3Rpb24gcHJvY2Vzc01hcmtlcihtYXJrZXIsIGJtKSB7XHJcbiAgbGV0IG1hcmtlckxpc3QgPSBbXVxyXG5cclxuICBpZiAoQXJyYXkuaXNBcnJheShtYXJrZXIpKSB7XHJcbiAgICBtYXJrZXJMaXN0ID0gbWFya2VyXHJcbiAgfSBlbHNlIHtcclxuICAgIG1hcmtlckxpc3QgPSBbbWFya2VyXVxyXG4gIH1cclxuXHJcbiAgbWFya2VyTGlzdCA9IG1hcmtlckxpc3QubWFwKG1hcmtlciA9PiBtZXJnZU1hcmtlcihtYXJrZXIpKVxyXG5cclxuICByZXR1cm4gbWFya2VyTGlzdFxyXG59XHJcblxyXG4vLyDojrflj5blnKjngrnlh7vkvY3nva7nmoTngrnkvY1cclxuZXhwb3J0IGZ1bmN0aW9uIGdldE1hcmtlck9uUG9zKHBvcywgYm0pIHtcclxuICBpZiAoIWJtLm1hcmtlckxpc3QubGVuZ3RoKSByZXR1cm4gW11cclxuICBjb25zdCBjbGlja1ggPSBwb3MueFxyXG4gIGNvbnN0IGNsaWNrWSA9IHBvcy55XHJcbiAgY29uc3QgbWFya2VycyA9IFtdXHJcbiAgYm0ubWFya2VyTGlzdC5tYXAobSA9PiB7XHJcbiAgICBpZiAoY2xpY2tYID49IG0ueCAmJiBjbGlja1ggPD0gbS54ICsgbS5zaXplWzBdICYmIGNsaWNrWSA+PSBtLnkgJiYgY2xpY2tZIDw9IG0ueSArIG0uc2l6ZVsxXSkge1xyXG4gICAgICBtYXJrZXJzLnB1c2gobS5vcmlnaW5NYXJrZXIpXHJcbiAgICB9XHJcbiAgfSlcclxuXHJcbiAgcmV0dXJuIG1hcmtlcnNcclxufVxyXG5cclxuLy8g5ZCI5bm2bWFya2Vy6YWN572uXHJcbmZ1bmN0aW9uIG1lcmdlTWFya2VyKG1hcmtlcikge1xyXG4gIGNvbnN0IHRleHRTdHlsZSA9IE9iamVjdC5hc3NpZ24oe30sIG1hcmtlck9wdGlucy50ZXh0U3R5bGUsIG1hcmtlci50ZXh0U3R5bGUpXHJcbiAgY29uc3Qgb3B0cyA9IE9iamVjdC5hc3NpZ24oe30sIG1hcmtlck9wdGlucywgbWFya2VyKVxyXG5cclxuICByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgb3B0cywge1xyXG4gICAgbWFya2VySWQ6IGdldFJhbmRvbSgpLFxyXG4gICAgcG9zaXRpb246IG1hcmtlci5wb3NpdGlvbixcclxuICAgIHRpdGxlOiBvcHRzLnRpdGxlLFxyXG4gICAgaWNvbjogb3B0cy5pY29uLFxyXG4gICAgc2l6ZTogb3B0cy5zaXplLFxyXG4gICAgeDogMCxcclxuICAgIHk6IDAsXHJcbiAgICBvcmlnaW5NYXJrZXI6IG1hcmtlcixcclxuICAgIHRleHRTdHlsZVxyXG4gIH0pXHJcbn1cclxuXHJcbi8vIOagueaNrnBvc2l0aW9u6K6h566XbWFya2Vy5bem5LiK6KeS5YOP57Sg5Z2Q5qCHXHJcbmZ1bmN0aW9uIGdldE1hcmtlckNvb3JkaW5hdGUobWFya2VyLCBibSkge1xyXG4gIGNvbnN0IHNpemVYID0gcGFyc2VJbnQobWFya2VyLnNpemVbMF0pXHJcbiAgY29uc3Qgc2l6ZVkgPSBwYXJzZUludChtYXJrZXIuc2l6ZVsxXSlcclxuICBjb25zdCBoYWxmU2l6ZVggPSBzaXplWCAvIDJcclxuICBjb25zdCBoYWxmU2l6ZVkgPSBzaXplWSAvIDJcclxuXHJcbiAgY29uc3Qgb2Zmc2V0WCA9IHBhcnNlSW50KG1hcmtlci5vZmZzZXRbMF0pIHx8IDBcclxuICBjb25zdCBvZmZzZXRZID0gcGFyc2VJbnQobWFya2VyLm9mZnNldFsxXSkgfHwgMFxyXG5cclxuICBjb25zdCBwZXIgPSBtaWxsaW1ldGVyMnBlcmNlbnQobWFya2VyLnBvc2l0aW9uWzBdLCBtYXJrZXIucG9zaXRpb25bMV0sIGJtKVxyXG5cclxuICBsZXQgeCA9IHBhcnNlSW50KGJtLnJlY3QueCArIHBlci54ICogYm0ucmVjdC53aWR0aCAqIGJtLnNjYWxlKVxyXG4gIGxldCB5ID0gcGFyc2VJbnQoYm0ucmVjdC55ICsgcGVyLnkgKiBibS5yZWN0LmhlaWdodCAqIGJtLnNjYWxlKVxyXG5cclxuICBzd2l0Y2ggKG1hcmtlci5hbmNob3IpIHtcclxuICAgIGNhc2UgJ3RvcC1sZWZ0JzpcclxuICAgICAgYnJlYWtcclxuICAgIGNhc2UgJ3RvcC1jZW50ZXInOlxyXG4gICAgICB4IC09IGhhbGZTaXplWFxyXG4gICAgICBicmVha1xyXG4gICAgY2FzZSAndG9wLXJpZ2h0JzpcclxuICAgICAgeCAtPSBzaXplWFxyXG4gICAgICBicmVha1xyXG4gICAgY2FzZSAnbWlkZGxlLWxlZnQnOlxyXG4gICAgICB5IC09IGhhbGZTaXplWVxyXG4gICAgICBicmVha1xyXG4gICAgY2FzZSAnY2VudGVyJzpcclxuICAgICAgeCAtPSBoYWxmU2l6ZVhcclxuICAgICAgeSAtPSBoYWxmU2l6ZVlcclxuICAgICAgYnJlYWtcclxuICAgIGNhc2UgJ21pZGRsZS1yaWdodCc6XHJcbiAgICAgIHggLT0gc2l6ZVhcclxuICAgICAgeSAtPSBoYWxmU2l6ZVlcclxuICAgICAgYnJlYWtcclxuICAgIGNhc2UgJ2JvdHRvbS1sZWZ0JzpcclxuICAgICAgeSAtPSBzaXplWVxyXG4gICAgICBicmVha1xyXG4gICAgY2FzZSAnYm90dG9tLWNlbnRlcic6XHJcbiAgICAgIHggLT0gaGFsZlNpemVYXHJcbiAgICAgIHkgLT0gc2l6ZVlcclxuICAgICAgYnJlYWtcclxuICAgIGNhc2UgJ2JvdHRvbS1yaWdodCc6XHJcbiAgICAgIHggLT0gc2l6ZVhcclxuICAgICAgeSAtPSBzaXplWVxyXG4gICAgICBicmVha1xyXG4gIH1cclxuXHJcbiAgeCArPSBvZmZzZXRYXHJcbiAgeSArPSBvZmZzZXRZXHJcblxyXG4gIHJldHVybiB7XHJcbiAgICB4LFxyXG4gICAgeVxyXG4gIH1cclxufVxyXG5cclxuLy8g5qC55o2u5bem5LiK6KeS5Z2Q5qCH6K6h566XYW5jaG9y5Z2Q5qCHXHJcbmZ1bmN0aW9uIGdldEFuY2hvckNvb3JkaW5hdGUobWFya2VyKSB7XHJcbiAgY29uc3Qgc2l6ZVggPSBwYXJzZUludChtYXJrZXIuc2l6ZVswXSlcclxuICBjb25zdCBzaXplWSA9IHBhcnNlSW50KG1hcmtlci5zaXplWzFdKVxyXG4gIGNvbnN0IGhhbGZTaXplWCA9IHNpemVYIC8gMlxyXG4gIGNvbnN0IGhhbGZTaXplWSA9IHNpemVZIC8gMlxyXG5cclxuICBjb25zdCBvZmZzZXRYID0gcGFyc2VJbnQobWFya2VyLm9mZnNldFswXSkgfHwgMFxyXG4gIGNvbnN0IG9mZnNldFkgPSBwYXJzZUludChtYXJrZXIub2Zmc2V0WzFdKSB8fCAwXHJcblxyXG4gIGxldCB4ID0gbWFya2VyLnhcclxuICBsZXQgeSA9IG1hcmtlci55XHJcblxyXG4gIHN3aXRjaCAobWFya2VyLmFuY2hvcikge1xyXG4gICAgY2FzZSAndG9wLWxlZnQnOlxyXG4gICAgICBicmVha1xyXG4gICAgY2FzZSAndG9wLWNlbnRlcic6XHJcbiAgICAgIHggKz0gaGFsZlNpemVYXHJcbiAgICAgIGJyZWFrXHJcbiAgICBjYXNlICd0b3AtcmlnaHQnOlxyXG4gICAgICB4ICs9IHNpemVYXHJcbiAgICAgIGJyZWFrXHJcbiAgICBjYXNlICdtaWRkbGUtbGVmdCc6XHJcbiAgICAgIHkgKz0gaGFsZlNpemVZXHJcbiAgICAgIGJyZWFrXHJcbiAgICBjYXNlICdjZW50ZXInOlxyXG4gICAgICB4ICs9IGhhbGZTaXplWFxyXG4gICAgICB5ICs9IGhhbGZTaXplWVxyXG4gICAgICBicmVha1xyXG4gICAgY2FzZSAnbWlkZGxlLXJpZ2h0JzpcclxuICAgICAgeCArPSBzaXplWFxyXG4gICAgICB5ICs9IGhhbGZTaXplWVxyXG4gICAgICBicmVha1xyXG4gICAgY2FzZSAnYm90dG9tLWxlZnQnOlxyXG4gICAgICB5ICs9IHNpemVZXHJcbiAgICAgIGJyZWFrXHJcbiAgICBjYXNlICdib3R0b20tY2VudGVyJzpcclxuICAgICAgeCArPSBoYWxmU2l6ZVhcclxuICAgICAgeSArPSBzaXplWVxyXG4gICAgICBicmVha1xyXG4gICAgY2FzZSAnYm90dG9tLXJpZ2h0JzpcclxuICAgICAgeCArPSBzaXplWFxyXG4gICAgICB5ICs9IHNpemVZXHJcbiAgICAgIGJyZWFrXHJcbiAgfVxyXG5cclxuICB4IC09IG9mZnNldFhcclxuICB5IC09IG9mZnNldFlcclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIHgsXHJcbiAgICB5XHJcbiAgfVxyXG59XHJcblxyXG4vKiDlt6bkuIrop5LlnZDmoIforqHnrpdwb3NpdGlvbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0TWFya2VyUG9zaXRpb24obWFya2VyLCBibSwgc2l6ZVNjYWxlID0gMSkge1xyXG4gIGNvbnN0IHNpemVYID0gcGFyc2VGbG9hdChtYXJrZXIuc2l6ZVswXSAqIHNpemVTY2FsZSlcclxuICBjb25zdCBzaXplWSA9IHBhcnNlRmxvYXQobWFya2VyLnNpemVbMV0gKiBzaXplU2NhbGUpXHJcbiAgY29uc3QgaGFsZlNpemVYID0gc2l6ZVggLyAyXHJcbiAgY29uc3QgaGFsZlNpemVZID0gc2l6ZVkgLyAyXHJcblxyXG4gIGNvbnN0IG9mZnNldFggPSBwYXJzZUludChtYXJrZXIub2Zmc2V0WzBdKSB8fCAwXHJcbiAgY29uc3Qgb2Zmc2V0WSA9IHBhcnNlSW50KG1hcmtlci5vZmZzZXRbMV0pIHx8IDBcclxuXHJcbiAgbGV0IHggPSBtYXJrZXIueCAtIG9mZnNldFhcclxuICBsZXQgeSA9IG1hcmtlci55IC0gb2Zmc2V0WVxyXG5cclxuICBzd2l0Y2ggKG1hcmtlci5hbmNob3IpIHtcclxuICAgIGNhc2UgJ3RvcC1sZWZ0JzpcclxuICAgICAgYnJlYWtcclxuICAgIGNhc2UgJ3RvcC1jZW50ZXInOlxyXG4gICAgICB4ICs9IGhhbGZTaXplWFxyXG4gICAgICBicmVha1xyXG4gICAgY2FzZSAndG9wLXJpZ2h0JzpcclxuICAgICAgeCArPSBzaXplWFxyXG4gICAgICBicmVha1xyXG4gICAgY2FzZSAnbWlkZGxlLWxlZnQnOlxyXG4gICAgICB5ICs9IGhhbGZTaXplWVxyXG4gICAgICBicmVha1xyXG4gICAgY2FzZSAnY2VudGVyJzpcclxuICAgICAgeCArPSBoYWxmU2l6ZVhcclxuICAgICAgeSArPSBoYWxmU2l6ZVlcclxuICAgICAgYnJlYWtcclxuICAgIGNhc2UgJ21pZGRsZS1yaWdodCc6XHJcbiAgICAgIHggKz0gc2l6ZVhcclxuICAgICAgeSArPSBoYWxmU2l6ZVlcclxuICAgICAgYnJlYWtcclxuICAgIGNhc2UgJ2JvdHRvbS1sZWZ0JzpcclxuICAgICAgeSArPSBzaXplWVxyXG4gICAgICBicmVha1xyXG4gICAgY2FzZSAnYm90dG9tLWNlbnRlcic6XHJcbiAgICAgIHggKz0gaGFsZlNpemVYXHJcbiAgICAgIHkgKz0gc2l6ZVlcclxuICAgICAgYnJlYWtcclxuICAgIGNhc2UgJ2JvdHRvbS1yaWdodCc6XHJcbiAgICAgIHggKz0gc2l6ZVhcclxuICAgICAgeSArPSBzaXplWVxyXG4gICAgICBicmVha1xyXG4gIH1cclxuXHJcbiAgY29uc3QgcGVyWCA9ICh4IC0gYm0ucmVjdC54KSAvIChibS5yZWN0LndpZHRoICogYm0uc2NhbGUpXHJcbiAgY29uc3QgcGVyWSA9ICh5IC0gYm0ucmVjdC55KSAvIChibS5yZWN0LmhlaWdodCAqIGJtLnNjYWxlKVxyXG4gIGNvbnN0IHBvc2l0aW9uID0gW01hdGgucm91bmQoYm0ubWFwV2lkdGggKiBwZXJYKSwgTWF0aC5yb3VuZChibS5tYXBIZWlnaHQgKiBwZXJZKV1cclxuXHJcbiAgcmV0dXJuIHBvc2l0aW9uXHJcbn1cclxuXHJcbi8qIOmAieWHuum8oOagh+mAieaLqeeahG1hcmtlciAqL1xyXG5leHBvcnQgZnVuY3Rpb24gc2VsZWN0TW91c2VPbk1hcmtlcihlLCBibSkge1xyXG4gIGxldCBzbSA9IG51bGxcclxuICBjb25zdCBwb3MgPSB3aW5kb3dzMmNhbnZhcyhlLmNsaWVudFgsIGUuY2xpZW50WSwgYm0uY2FudmFzTW91c2UpXHJcbiAgYm0ubWFya2VyTGlzdC5zb21lKG1hcmtlciA9PiB7XHJcbiAgICBpZiAoXHJcbiAgICAgIHBvcy54ID49IG1hcmtlci54ICYmXHJcbiAgICAgIHBvcy54IDw9IG1hcmtlci54ICsgbWFya2VyLnNpemVbMF0gJiZcclxuICAgICAgcG9zLnkgPj0gbWFya2VyLnkgJiZcclxuICAgICAgcG9zLnkgPD0gbWFya2VyLnkgKyBtYXJrZXIuc2l6ZVsxXVxyXG4gICAgKSB7XHJcbiAgICAgIHNtID0gbWFya2VyXHJcbiAgICAgIHJldHVybiB0cnVlXHJcbiAgICB9XHJcbiAgfSlcclxuXHJcbiAgcmV0dXJuIHNtXHJcbn1cclxuXHJcbi8qIOmAieWHuuahhumAiemAieS4reeahG1hcmtlciAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0Qm94U2VsZWN0ZWRNYXJrZXIoZSwgYm0pIHtcclxuICBjb25zdCBtYXJrZXJMaXN0ID0gYm0ubWFya2VyTGlzdFxyXG4gIGlmICghbWFya2VyTGlzdCB8fCAhbWFya2VyTGlzdC5sZW5ndGgpIHJldHVybiBbXVxyXG5cclxuICBjb25zdCBzdGFydCA9IGJtLnN0YXJ0RHJhZ1Bvc2l0aW9uXHJcbiAgY29uc3QgZW5kID0gd2luZG93czJjYW52YXMoZS5jbGllbnRYLCBlLmNsaWVudFksIGJtLmNhbnZhc01vdXNlKVxyXG4gIGNvbnN0IGFyciA9IFtdXHJcbiAgY29uc3Qgc21hbGxYID0gTWF0aC5taW4oc3RhcnQueCwgZW5kLngpXHJcbiAgY29uc3QgYmlnWCA9IE1hdGgubWF4KHN0YXJ0LngsIGVuZC54KVxyXG4gIGNvbnN0IHNtYWxsWSA9IE1hdGgubWluKHN0YXJ0LnksIGVuZC55KVxyXG4gIGNvbnN0IGJpZ1kgPSBNYXRoLm1heChzdGFydC55LCBlbmQueSlcclxuXHJcbiAgbWFya2VyTGlzdC5tYXAobSA9PiB7XHJcbiAgICBjb25zdCBtUG9zID0gZ2V0QW5jaG9yQ29vcmRpbmF0ZShtKVxyXG4gICAgaWYgKG1Qb3MueCA+PSBzbWFsbFggJiYgbVBvcy54IDw9IGJpZ1ggJiYgbVBvcy55ID49IHNtYWxsWSAmJiBtUG9zLnkgPD0gYmlnWSkge1xyXG4gICAgICBhcnIucHVzaChtLm9yaWdpbk1hcmtlcilcclxuICAgIH1cclxuICB9KVxyXG5cclxuICByZXR1cm4gYXJyXHJcbn1cclxuXHJcbi8qIOe7mOWItm1hcmtlciB0ZXh0ICovXHJcbmV4cG9ydCBmdW5jdGlvbiBkcmF3TWFya2VyVGV4dChtYXJrZXIsIGJtLCBpc0hvdmVyKSB7XHJcbiAgaWYgKCFtYXJrZXIudGV4dCkgcmV0dXJuXHJcbiAgaWYgKG1hcmtlci5zaG93VGV4dCA9PT0gJ25vbmUnKSByZXR1cm5cclxuICBpZiAobWFya2VyLnNob3dUZXh0ID09PSAnYWx3YXlzJyAmJiBpc0hvdmVyKSByZXR1cm5cclxuICBpZiAobWFya2VyLnNob3dUZXh0ID09PSAnaG92ZXInICYmICFpc0hvdmVyKSByZXR1cm5cclxuXHJcbiAgbGV0IGN0eFxyXG4gIGlmIChpc0hvdmVyKSB7XHJcbiAgICBjdHggPSBibS5jb250ZXh0TWFya2VySG92ZXJcclxuICB9IGVsc2Uge1xyXG4gICAgY3R4ID0gYm0uY29udGV4dE1hcmtlclxyXG4gIH1cclxuXHJcbiAgY29uc3QgeyBmb250U2l6ZSwgZm9udEZhbWlseSwgZm9udFdlaWdodCwgY29sb3IsIHBvc2l0aW9uIH0gPSBtYXJrZXIudGV4dFN0eWxlXHJcblxyXG4gIGlmIChtYXJrZXIuc2hvd1RleHQgPT09ICdob3ZlcicpIHtcclxuICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgYm0ud2lkdGgsIGJtLmhlaWdodClcclxuICB9XHJcblxyXG4gIGxldCB4ID0gbWFya2VyLnhcclxuICBsZXQgeSA9IG1hcmtlci55XHJcblxyXG4gIHN3aXRjaCAocG9zaXRpb24pIHtcclxuICAgIGNhc2UgJ3RvcCc6XHJcbiAgICAgIGN0eC50ZXh0QWxpZ24gPSAnY2VudGVyJ1xyXG5cclxuICAgICAgeCArPSBtYXJrZXIuc2l6ZVswXSAvIDJcclxuICAgICAgeSAtPSA1XHJcbiAgICAgIGJyZWFrXHJcbiAgICBjYXNlICdib3R0b20nOlxyXG4gICAgICBjdHgudGV4dEFsaWduID0gJ2NlbnRlcidcclxuICAgICAgeCArPSBtYXJrZXIuc2l6ZVswXSAvIDJcclxuICAgICAgeSArPSBtYXJrZXIuc2l6ZVsxXSArIGZvbnRTaXplICsgNVxyXG4gICAgICBicmVha1xyXG4gICAgY2FzZSAnbGVmdCc6XHJcbiAgICAgIGN0eC50ZXh0QWxpZ24gPSAncmlnaHQnXHJcbiAgICAgIHggLT0gNVxyXG4gICAgICB5ICs9IG1hcmtlci5zaXplWzFdIC8gMiArIGZvbnRTaXplIC8gMlxyXG4gICAgICBicmVha1xyXG4gICAgY2FzZSAncmlnaHQnOlxyXG4gICAgICBjdHgudGV4dEFsaWduID0gJ2xlZnQnXHJcbiAgICAgIHggKz0gNSArIG1hcmtlci5zaXplWzBdXHJcbiAgICAgIHkgKz0gbWFya2VyLnNpemVbMV0gLyAyICsgZm9udFNpemUgLyAyXHJcbiAgICAgIGJyZWFrXHJcblxyXG4gICAgZGVmYXVsdDpcclxuICAgICAgY3R4LnRleHRBbGlnbiA9ICdjZW50ZXInXHJcblxyXG4gICAgICB4ICs9IG1hcmtlci5zaXplWzBdIC8gMlxyXG4gICAgICB5IC09IDVcclxuICAgICAgYnJlYWtcclxuICB9XHJcblxyXG4gIGN0eC5mb250ID0gYCR7Zm9udFdlaWdodH0gJHtmb250U2l6ZX1weCAke2ZvbnRGYW1pbHl9YFxyXG4gIGN0eC5maWxsU3R5bGUgPSBjb2xvclxyXG4gIGN0eC5maWxsVGV4dChtYXJrZXIudGV4dCwgeCwgeSlcclxufVxyXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/core/marker.js\n");

/***/ }),

/***/ "./src/core/options.js":
/*!*****************************!*\
  !*** ./src/core/options.js ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   mergeOptions: () => (/* binding */ mergeOptions)\n/* harmony export */ });\nconst defaultOptions = {\n  tooltip: {\n    // 工具条配置\n    show: false,\n    // 是否显示\n    type: \"normal\"\n  },\n  zoomBox: {\n    // 缩放按钮配置\n    show: true // 是否显示\n  },\n\n  center: [-1, -1],\n  // 初始化地图中心点坐标（默认为地图中心）\n  zoom: 2 // 初始化地图层级\n};\n\nconst innerOptions = {\n  maxZoom: 16,\n  // 最大地图层级\n  minZoom: 1,\n  // 最小地图层级\n  $el: null,\n  // 地图容器DOM\n  count: 0,\n  // canvas层数\n  width: 0,\n  // 地图画布宽度\n  height: 0,\n  // 地图画布高度\n\n  canvasMap: null,\n  // 地图canvas\n  contextMap: null,\n  // 地图canvas context\n  canvasMouse: null,\n  // 地图鼠标操作层canvas\n  contextMouse: null,\n  // 地图鼠标操作层context\n\n  canvasMarker: null,\n  // marker canvas\n  contextMarker: null,\n  // marker canvas context\n  canvasMarkerHover: null,\n  // 鼠标悬浮marker canvas\n  contextMarkerHover: null,\n  // 鼠标悬浮marker context\n  isMouseDown: false,\n  // 记录鼠标是否按下\n  rect: {\n    width: 0,\n    height: 0,\n    x: 0,\n    y: 0\n  },\n  // 视口对象\n\n  markerList: [],\n  // 标记数组\n  moveMarkerFlag: false,\n  // 移动marker标识位\n  selectMarkerFlag: false,\n  // 点选marker\n  checkMarkerFlag: false,\n  //查看marker\n  boxSelectMarkerFlag: false,\n  // 框选marker\n  clickMapFlag: false,\n  // 点击地图返回坐标\n\n  canvasFence: null,\n  // fence canvas\n  contextFence: null,\n  // fence context\n  fenceList: [],\n  // 围栏列表\n  moveFenceFlag: false,\n  // 移动围栏标识位\n  selectFenceFlag: false,\n  // 选择围栏标识位\n  drawFenceFlag: false,\n  // 画围栏标识位\n  drawFenceType: 'round',\n  // 画围栏类型：round、rect、polygon\n  tempFence: {},\n  // 用户画围栏参数\n\n  scale: 1,\n  // 缩放等级\n  step: 1.25,\n  // 放大缩小倍数\n\n  tileList: [],\n  // 瓦片地图列表\n  tileIdx: 1,\n  // 瓦片层级索引\n  tileExt: 'png',\n  // 瓦片地图图片后缀\n  tilePlaceholder: '',\n  // 瓦片地图占位图\n  tileLastMapSize: [],\n  companyList: [] //分厂快捷定位列表\n};\n\nfunction mergeOptions(bm, options = {}) {\n  const finalOptions = Object.assign({}, defaultOptions, options, innerOptions);\n  const keys = Object.keys(finalOptions);\n  keys.map(key => {\n    bm[key] = finalOptions[key];\n  });\n  return bm;\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29yZS9vcHRpb25zLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBOztBQUNBO0FBQUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBOztBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTs7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7O0FBRUE7QUFBQTtBQUNBO0FBQUE7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYmFvc2lnaHQtbWFwLy4vc3JjL2NvcmUvb3B0aW9ucy5qcz9iN2JmIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGRlZmF1bHRPcHRpb25zID0ge1xyXG4gIHRvb2x0aXA6IHsgLy8g5bel5YW35p2h6YWN572uXHJcbiAgICBzaG93OiBmYWxzZSwgLy8g5piv5ZCm5pi+56S6XHJcbiAgICB0eXBlOlwibm9ybWFsXCJcclxuICB9LFxyXG4gIHpvb21Cb3g6IHsgLy8g57yp5pS+5oyJ6ZKu6YWN572uXHJcbiAgICBzaG93OiB0cnVlLCAvLyDmmK/lkKbmmL7npLpcclxuICB9LFxyXG4gIGNlbnRlcjogWy0xLCAtMV0sIC8vIOWIneWni+WMluWcsOWbvuS4reW/g+eCueWdkOagh++8iOm7mOiupOS4uuWcsOWbvuS4reW/g++8iVxyXG4gIHpvb206IDIsIC8vIOWIneWni+WMluWcsOWbvuWxgue6p1xyXG59XHJcblxyXG5jb25zdCBpbm5lck9wdGlvbnMgPSB7XHJcbiAgbWF4Wm9vbTogMTYsIC8vIOacgOWkp+WcsOWbvuWxgue6p1xyXG4gIG1pblpvb206IDEsIC8vIOacgOWwj+WcsOWbvuWxgue6p1xyXG4gICRlbDogbnVsbCwgLy8g5Zyw5Zu+5a655ZmoRE9NXHJcbiAgY291bnQ6IDAsIC8vIGNhbnZhc+WxguaVsFxyXG4gIHdpZHRoOiAwLCAvLyDlnLDlm77nlLvluIPlrr3luqZcclxuICBoZWlnaHQ6IDAsIC8vIOWcsOWbvueUu+W4g+mrmOW6plxyXG5cclxuICBjYW52YXNNYXA6IG51bGwsIC8vIOWcsOWbvmNhbnZhc1xyXG4gIGNvbnRleHRNYXA6IG51bGwsIC8vIOWcsOWbvmNhbnZhcyBjb250ZXh0XHJcbiAgY2FudmFzTW91c2U6IG51bGwsIC8vIOWcsOWbvum8oOagh+aTjeS9nOWxgmNhbnZhc1xyXG4gIGNvbnRleHRNb3VzZTogbnVsbCwgLy8g5Zyw5Zu+6byg5qCH5pON5L2c5bGCY29udGV4dFxyXG5cclxuICBjYW52YXNNYXJrZXI6IG51bGwsIC8vIG1hcmtlciBjYW52YXNcclxuICBjb250ZXh0TWFya2VyOiBudWxsLCAvLyBtYXJrZXIgY2FudmFzIGNvbnRleHRcclxuICBjYW52YXNNYXJrZXJIb3ZlcjogbnVsbCwgLy8g6byg5qCH5oKs5rWubWFya2VyIGNhbnZhc1xyXG4gIGNvbnRleHRNYXJrZXJIb3ZlcjogbnVsbCwgLy8g6byg5qCH5oKs5rWubWFya2VyIGNvbnRleHRcclxuICBpc01vdXNlRG93bjogZmFsc2UsIC8vIOiusOW9lem8oOagh+aYr+WQpuaMieS4i1xyXG4gIHJlY3Q6IHtcclxuICAgIHdpZHRoOiAwLFxyXG4gICAgaGVpZ2h0OiAwLFxyXG4gICAgeDogMCxcclxuICAgIHk6IDBcclxuICB9LCAvLyDop4blj6Plr7nosaFcclxuXHJcbiAgbWFya2VyTGlzdDogW10sIC8vIOagh+iusOaVsOe7hFxyXG4gIG1vdmVNYXJrZXJGbGFnOiBmYWxzZSwgLy8g56e75YqobWFya2Vy5qCH6K+G5L2NXHJcbiAgc2VsZWN0TWFya2VyRmxhZzogZmFsc2UsIC8vIOeCuemAiW1hcmtlclxyXG4gIGNoZWNrTWFya2VyRmxhZzogZmFsc2UsIC8v5p+l55yLbWFya2VyXHJcbiAgYm94U2VsZWN0TWFya2VyRmxhZzogZmFsc2UsIC8vIOahhumAiW1hcmtlclxyXG4gIGNsaWNrTWFwRmxhZzogZmFsc2UsIC8vIOeCueWHu+WcsOWbvui/lOWbnuWdkOagh1xyXG5cclxuICBjYW52YXNGZW5jZTogbnVsbCwgLy8gZmVuY2UgY2FudmFzXHJcbiAgY29udGV4dEZlbmNlOiBudWxsLCAvLyBmZW5jZSBjb250ZXh0XHJcbiAgZmVuY2VMaXN0OiBbXSwgLy8g5Zu05qCP5YiX6KGoXHJcbiAgbW92ZUZlbmNlRmxhZzogZmFsc2UsIC8vIOenu+WKqOWbtOagj+agh+ivhuS9jVxyXG4gIHNlbGVjdEZlbmNlRmxhZzogZmFsc2UsIC8vIOmAieaLqeWbtOagj+agh+ivhuS9jVxyXG4gIGRyYXdGZW5jZUZsYWc6IGZhbHNlLCAvLyDnlLvlm7TmoI/moIfor4bkvY1cclxuICBkcmF3RmVuY2VUeXBlOiAncm91bmQnLCAvLyDnlLvlm7TmoI/nsbvlnovvvJpyb3VuZOOAgXJlY3TjgIFwb2x5Z29uXHJcbiAgdGVtcEZlbmNlOiB7fSwgLy8g55So5oi355S75Zu05qCP5Y+C5pWwXHJcblxyXG4gIHNjYWxlOiAxLCAvLyDnvKnmlL7nrYnnuqdcclxuICBzdGVwOiAxLjI1LCAvLyDmlL7lpKfnvKnlsI/lgI3mlbBcclxuXHJcbiAgdGlsZUxpc3Q6IFtdLCAvLyDnk6bniYflnLDlm77liJfooahcclxuICB0aWxlSWR4OiAxLCAvLyDnk6bniYflsYLnuqfntKLlvJVcclxuICB0aWxlRXh0OiAncG5nJywgLy8g55Om54mH5Zyw5Zu+5Zu+54mH5ZCO57yAXHJcbiAgdGlsZVBsYWNlaG9sZGVyOiAnJywgLy8g55Om54mH5Zyw5Zu+5Y2g5L2N5Zu+XHJcbiAgdGlsZUxhc3RNYXBTaXplOiBbXSxcclxuXHJcbiAgY29tcGFueUxpc3Q6W10sLy/liIbljoLlv6vmjbflrprkvY3liJfooahcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIG1lcmdlT3B0aW9ucyhibSwgb3B0aW9ucyA9IHt9KSB7XHJcbiAgY29uc3QgZmluYWxPcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgZGVmYXVsdE9wdGlvbnMsIG9wdGlvbnMsIGlubmVyT3B0aW9ucylcclxuICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMoZmluYWxPcHRpb25zKVxyXG5cclxuICBrZXlzLm1hcChrZXkgPT4ge1xyXG4gICAgYm1ba2V5XSA9IGZpbmFsT3B0aW9uc1trZXldXHJcbiAgfSlcclxuXHJcbiAgcmV0dXJuIGJtXHJcbn1cclxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/core/options.js\n");

/***/ }),

/***/ "./src/core/wheel.js":
/*!***************************!*\
  !*** ./src/core/wheel.js ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   zoomInOut: () => (/* binding */ zoomInOut)\n/* harmony export */ });\n/* harmony import */ var _util__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../util */ \"./src/util/index.js\");\n\nfunction zoomInOut(event, zoomMark, bm) {\n  let delta = 1;\n  let pos;\n  if (!zoomMark) {\n    delta = event.wheelDelta ? event.wheelDelta : event.deltaY * -40;\n    pos = (0,_util__WEBPACK_IMPORTED_MODULE_0__.windows2canvas)(event.clientX, event.clientY, bm.canvasMap);\n  } else {\n    delta = zoomMark;\n    const x = bm.width / 2;\n    const y = bm.height / 2;\n    pos = (0,_util__WEBPACK_IMPORTED_MODULE_0__.windows2canvas)(x, y, bm.canvasMap);\n  }\n  if (delta > 0 && bm.zoom < bm.maxZoom) {\n    bm.zoom++;\n    bm.rect.x = bm.rect.x * bm.step - (bm.step - 1) * pos.x;\n    bm.rect.y = bm.rect.y * bm.step - (bm.step - 1) * pos.y;\n    bm._drawAll();\n    bm._updateZoom && bm._updateZoom(bm.zoom);\n  } else if (delta <= 0 && bm.zoom > 1) {\n    bm.zoom--;\n    bm.rect.x = (bm.rect.x + (bm.step - 1) * pos.x) / bm.step;\n    bm.rect.y = (bm.rect.y + (bm.step - 1) * pos.y) / bm.step;\n    bm._drawAll();\n    bm._updateZoom && bm._updateZoom(bm.zoom);\n  }\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29yZS93aGVlbC5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2Jhb3NpZ2h0LW1hcC8uL3NyYy9jb3JlL3doZWVsLmpzPzQ4M2UiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgd2luZG93czJjYW52YXMgfSBmcm9tICcuLi91dGlsJ1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHpvb21Jbk91dChldmVudCwgem9vbU1hcmssIGJtKSB7XHJcbiAgbGV0IGRlbHRhID0gMVxyXG4gIGxldCBwb3NcclxuXHJcbiAgaWYgKCF6b29tTWFyaykge1xyXG4gICAgZGVsdGEgPSBldmVudC53aGVlbERlbHRhID8gZXZlbnQud2hlZWxEZWx0YSA6IGV2ZW50LmRlbHRhWSAqIC00MFxyXG4gICAgcG9zID0gd2luZG93czJjYW52YXMoZXZlbnQuY2xpZW50WCwgZXZlbnQuY2xpZW50WSwgYm0uY2FudmFzTWFwKVxyXG4gIH0gZWxzZSB7XHJcbiAgICBkZWx0YSA9IHpvb21NYXJrXHJcblxyXG4gICAgY29uc3QgeCA9IGJtLndpZHRoIC8gMlxyXG4gICAgY29uc3QgeSA9IGJtLmhlaWdodCAvIDJcclxuICAgIHBvcyA9IHdpbmRvd3MyY2FudmFzKHgsIHksIGJtLmNhbnZhc01hcClcclxuICB9XHJcblxyXG4gIGlmIChkZWx0YSA+IDAgJiYgYm0uem9vbSA8IGJtLm1heFpvb20pIHtcclxuICAgIGJtLnpvb20rK1xyXG4gICAgYm0ucmVjdC54ID0gYm0ucmVjdC54ICogYm0uc3RlcCAtIChibS5zdGVwIC0gMSkgKiBwb3MueFxyXG4gICAgYm0ucmVjdC55ID0gYm0ucmVjdC55ICogYm0uc3RlcCAtIChibS5zdGVwIC0gMSkgKiBwb3MueVxyXG4gICAgYm0uX2RyYXdBbGwoKVxyXG4gICAgYm0uX3VwZGF0ZVpvb20gJiYgYm0uX3VwZGF0ZVpvb20oYm0uem9vbSlcclxuICB9IGVsc2UgaWYgKGRlbHRhIDw9IDAgJiYgYm0uem9vbSA+IDEpIHtcclxuICAgIGJtLnpvb20tLVxyXG4gICAgYm0ucmVjdC54ID0gKGJtLnJlY3QueCArIChibS5zdGVwIC0gMSkgKiBwb3MueCkgLyBibS5zdGVwXHJcbiAgICBibS5yZWN0LnkgPSAoYm0ucmVjdC55ICsgKGJtLnN0ZXAgLSAxKSAqIHBvcy55KSAvIGJtLnN0ZXBcclxuICAgIGJtLl9kcmF3QWxsKClcclxuICAgIGJtLl91cGRhdGVab29tICYmIGJtLl91cGRhdGVab29tKGJtLnpvb20pXHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/core/wheel.js\n");

/***/ }),

/***/ "./src/index.js":
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./core */ \"./src/core/index.js\");\n\nif (window) {\n  window.BSMap = _core__WEBPACK_IMPORTED_MODULE_0__[\"default\"];\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_core__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUVBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYmFvc2lnaHQtbWFwLy4vc3JjL2luZGV4LmpzP2I2MzUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1hcCBmcm9tICcuL2NvcmUnXHJcblxyXG5pZiAod2luZG93KSB7XHJcbiAgd2luZG93LkJTTWFwID0gbWFwXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IG1hcFxyXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/index.js\n");

/***/ }),

/***/ "./src/ui/color.js":
/*!*************************!*\
  !*** ./src/ui/color.js ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   fillColors: () => (/* binding */ fillColors),\n/* harmony export */   strokeColors: () => (/* binding */ strokeColors)\n/* harmony export */ });\nconst fillColors = ['rgba(80, 196, 143, 0.5)',\n// #50c48f\n'rgba(38, 204, 216, 0.5)',\n// #26ccd8\n'rgba(54, 133, 254, 0.5)',\n// #3685fe\n'rgba(153, 119, 239, 0.5)',\n// #9977ef\n'rgba(245, 97, 111, 0.5)',\n// #f5616f\n'rgba(247, 177, 63, 0.5)',\n// #f7b13f\n'rgba(249, 226, 100, 0.5)',\n// #f9e264\n'rgba(244, 122, 117, 0.5)',\n// #f47a75\n'rgba(0, 157, 178, 0.5)',\n// #009db2\n'rgba(2, 75, 81, 0.5)',\n// #024b51\n'rgba(7, 128, 207, 0.5)',\n// #0780cf\n'rgba(118, 80, 5, 0.5)' // #765005​​​​​​​\n];\n\nconst strokeColors = ['rgba(80, 196, 143, 0.9)',\n// #50c48f\n'rgba(38, 204, 216, 0.9)',\n// #26ccd8\n'rgba(54, 133, 254, 0.9)',\n// #3685fe\n'rgba(153, 119, 239, 0.9)',\n// #9977ef\n'rgba(245, 97, 111, 0.9)',\n// #f5616f\n'rgba(247, 177, 63, 0.9)',\n// #f7b13f\n'rgba(249, 226, 100, 0.9)',\n// #f9e264\n'rgba(244, 122, 117, 0.9)',\n// #f47a75\n'rgba(0, 157, 178, 0.9)',\n// #009db2\n'rgba(2, 75, 81, 0.9)',\n// #024b51\n'rgba(7, 128, 207, 0.9)',\n// #0780cf\n'rgba(118, 80, 5, 0.9)' // #765005\n];\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdWkvY29sb3IuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7O0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYmFvc2lnaHQtbWFwLy4vc3JjL3VpL2NvbG9yLmpzP2Q5YmEiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgZmlsbENvbG9ycyA9IFtcclxuICAncmdiYSg4MCwgMTk2LCAxNDMsIDAuNSknLCAvLyAjNTBjNDhmXHJcbiAgJ3JnYmEoMzgsIDIwNCwgMjE2LCAwLjUpJywgLy8gIzI2Y2NkOFxyXG4gICdyZ2JhKDU0LCAxMzMsIDI1NCwgMC41KScsIC8vICMzNjg1ZmVcclxuICAncmdiYSgxNTMsIDExOSwgMjM5LCAwLjUpJywgLy8gIzk5NzdlZlxyXG4gICdyZ2JhKDI0NSwgOTcsIDExMSwgMC41KScsIC8vICNmNTYxNmZcclxuICAncmdiYSgyNDcsIDE3NywgNjMsIDAuNSknLCAvLyAjZjdiMTNmXHJcbiAgJ3JnYmEoMjQ5LCAyMjYsIDEwMCwgMC41KScsIC8vICNmOWUyNjRcclxuICAncmdiYSgyNDQsIDEyMiwgMTE3LCAwLjUpJywgLy8gI2Y0N2E3NVxyXG4gICdyZ2JhKDAsIDE1NywgMTc4LCAwLjUpJywgLy8gIzAwOWRiMlxyXG4gICdyZ2JhKDIsIDc1LCA4MSwgMC41KScsIC8vICMwMjRiNTFcclxuICAncmdiYSg3LCAxMjgsIDIwNywgMC41KScsIC8vICMwNzgwY2ZcclxuICAncmdiYSgxMTgsIDgwLCA1LCAwLjUpJywgLy8gIzc2NTAwNeKAi+KAi+KAi+KAi+KAi+KAi+KAi1xyXG5dXHJcblxyXG5jb25zdCBzdHJva2VDb2xvcnMgPSBbXHJcbiAgJ3JnYmEoODAsIDE5NiwgMTQzLCAwLjkpJywgLy8gIzUwYzQ4ZlxyXG4gICdyZ2JhKDM4LCAyMDQsIDIxNiwgMC45KScsIC8vICMyNmNjZDhcclxuICAncmdiYSg1NCwgMTMzLCAyNTQsIDAuOSknLCAvLyAjMzY4NWZlXHJcbiAgJ3JnYmEoMTUzLCAxMTksIDIzOSwgMC45KScsIC8vICM5OTc3ZWZcclxuICAncmdiYSgyNDUsIDk3LCAxMTEsIDAuOSknLCAvLyAjZjU2MTZmXHJcbiAgJ3JnYmEoMjQ3LCAxNzcsIDYzLCAwLjkpJywgLy8gI2Y3YjEzZlxyXG4gICdyZ2JhKDI0OSwgMjI2LCAxMDAsIDAuOSknLCAvLyAjZjllMjY0XHJcbiAgJ3JnYmEoMjQ0LCAxMjIsIDExNywgMC45KScsIC8vICNmNDdhNzVcclxuICAncmdiYSgwLCAxNTcsIDE3OCwgMC45KScsIC8vICMwMDlkYjJcclxuICAncmdiYSgyLCA3NSwgODEsIDAuOSknLCAvLyAjMDI0YjUxXHJcbiAgJ3JnYmEoNywgMTI4LCAyMDcsIDAuOSknLCAvLyAjMDc4MGNmXHJcbiAgJ3JnYmEoMTE4LCA4MCwgNSwgMC45KScsIC8vICM3NjUwMDVcclxuXVxyXG5cclxuZXhwb3J0IHsgZmlsbENvbG9ycywgc3Ryb2tlQ29sb3JzIH1cclxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/ui/color.js\n");

/***/ }),

/***/ "./src/ui/css.js":
/*!***********************!*\
  !*** ./src/ui/css.js ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createTooltipCSSDOM: () => (/* binding */ createTooltipCSSDOM),\n/* harmony export */   createZoomCSSDOM: () => (/* binding */ createZoomCSSDOM)\n/* harmony export */ });\nfunction createZoomCSSDOM() {\n  const css = '.bmap-zoom-container {position: absolute;left: 15px;bottom: 20px;z-index: 9999}' + '.bmap-zoom {position: relative;width: 28px;height: 28px;margin-top: 15px;border-radius: 5px;background-repeat: no-repeat;background-position: center;background-size: 100%;cursor: pointer}' + '.bmap-zoom.zoomin {background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAABj0lEQVRoQ+1aPU6EQBT+trCBRENM7NdEG2Mzna0FNB5DW22BAwi1rfEgUHgEGq00WU6wAU2otsC8lU2MkWXGYSJj3jYkO29mvj+WCftm+PzsADgCsAdgv/tuqpclgDcArwBWsw78eXedKuifcK0APBKBEwBzm5B/wVoSgTMLYtOn75IIXFiq/ho2E/hr99gBdkBTAY6QpoDa04060DTNA4DWdd1LbaQ9CxgjkCTJaRiGt7RvmqZxFEVPJkgwgT5V2QHJvHGEOEKSUekr4whZGSH6iWzbtt3mvhDiMAiCK6rJsuy+KIrFUFriOH4eqvk+rhwhOh44jnOgupFMfV3XC8/zbmRqNzVTI1B6nndtlAAtThEa2kQIMfd9fx2hPM8pQuXQnN+cl5QdGAKxGeejhKRS7ICVzwEZd/kekFHJ5KtFdoAdkFRgW1lVVXc0rno8UNna2HNABYROLRPQUW+MuezAGCrqrMEO6Kg3xtx/4YD1f3Rb32pAnSpWN3vQvUQkjgHsWtA3Qe027wBeqN3mA69O4eNy93l2AAAAAElFTkSuQmCC)}' + '.bmap-zoom.zoomout {background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAFFmlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDAgNzkuMTYwNDUxLCAyMDE3LzA1LzA2LTAxOjA4OjIxICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgKE1hY2ludG9zaCkiIHhtcDpDcmVhdGVEYXRlPSIyMDE5LTA0LTI5VDIxOjQ4OjI5KzA4OjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAxOS0wNC0yOVQyMTo1MjowNyswODowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAxOS0wNC0yOVQyMTo1MjowNyswODowMCIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo1N2E1YTFlYi04YjhhLTQ0NjQtYTU5YS05ZGY5YmVmNDE2NDIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NTdhNWExZWItOGI4YS00NDY0LWE1OWEtOWRmOWJlZjQxNjQyIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6NTdhNWExZWItOGI4YS00NDY0LWE1OWEtOWRmOWJlZjQxNjQyIj4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo1N2E1YTFlYi04YjhhLTQ0NjQtYTU5YS05ZGY5YmVmNDE2NDIiIHN0RXZ0OndoZW49IjIwMTktMDQtMjlUMjE6NDg6MjkrMDg6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAoTWFjaW50b3NoKSIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5NI5NtAAABCklEQVRoge3aMW6DQBBG4cfiNBS2kKXcIIULX8J17uIaLsApfBWfIF1SOVIKdy6QiCUqJONinS4FC5b+RZqvoRoxD7bcBO8FeANWwJq41cAv8A10CX753eM5Jx1wTIEN8X/1/6RA6oClepMJlo55fv0/a6feYCoLULMANQtQswA1C1CzADULULMAtcWYoaqqtn3f989epizLr9CZBHgPGWjb9pBl2Wvoi4ZomuYnz/N9yExsRygZMxD0B8AfodCZIYqi+AydGRUQk9iOUDALULMANQtQswA1C1CzADULULMANYe/ezBXtQOu6i0muDrghL84MTcdcEqBG3DGX564AZlyqwFq4AJ8AN0d5c0pvgSIonsAAAAASUVORK5CYII=)}';\n  const dom = document.createElement('style');\n  dom.innerText = css;\n  return dom;\n}\nfunction createTooltipCSSDOM() {\n  const css = '.bmap-tooltip {position: absolute;top: 15px;left: 15px;z-index: 9999;display: flex}' + '.bmap-tooltip-item {position: relative;padding: 6px 4px;font-size: 14px;color: #333;background-color: rgba(41,96,115, .9)}' + '.bmap-tooltip-item:before {content: \"\";display: block;position: absolute;top: 25%;left: 0;bottom: 25%;width: 1px;background-color: #fff}' + '.bmap-tooltip-item:first-child:before {display: none}' + '.bmap-tooltip-item label {padding: 2px 8px;color: #fff;cursor: pointer}' + '.bmap-tooltip-item ul {position: absolute;display: none;top: 100%;left: 0;width: 100%;font-size: 0;list-style: none;margin: 2px 0 0 0;padding: 0;background-color: rgba(41,96,115, .9)}' + '.bmap-tooltip-item ul.active {display: block}' + '.bmap-tooltip-item li {padding: 4px 0;font-size: 14px;text-align: center;cursor: pointer;color: #fff;border-top: 1px solid #ccc}' + '.bmap-tooltip-item li:first-child {border-top: none}' + '.bmap-tooltip-item li.active {background-color:rgba(41,96,115, .9)}';\n  const dom = document.createElement('style');\n  dom.innerText = css;\n  return dom;\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdWkvY3NzLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDQTtBQU1BO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQVlBO0FBQ0E7QUFFQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYmFvc2lnaHQtbWFwLy4vc3JjL3VpL2Nzcy5qcz9iNzRhIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBmdW5jdGlvbiBjcmVhdGVab29tQ1NTRE9NICgpIHtcclxuICAgIGNvbnN0IGNzcyA9XHJcbiAgICAgICcuYm1hcC16b29tLWNvbnRhaW5lciB7cG9zaXRpb246IGFic29sdXRlO2xlZnQ6IDE1cHg7Ym90dG9tOiAyMHB4O3otaW5kZXg6IDk5OTl9JyArXHJcbiAgICAgICcuYm1hcC16b29tIHtwb3NpdGlvbjogcmVsYXRpdmU7d2lkdGg6IDI4cHg7aGVpZ2h0OiAyOHB4O21hcmdpbi10b3A6IDE1cHg7Ym9yZGVyLXJhZGl1czogNXB4O2JhY2tncm91bmQtcmVwZWF0OiBuby1yZXBlYXQ7YmFja2dyb3VuZC1wb3NpdGlvbjogY2VudGVyO2JhY2tncm91bmQtc2l6ZTogMTAwJTtjdXJzb3I6IHBvaW50ZXJ9JyArXHJcbiAgICAgICcuYm1hcC16b29tLnpvb21pbiB7YmFja2dyb3VuZC1pbWFnZTogdXJsKGRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBREFBQUFBd0NBWUFBQUJYQXZtSEFBQUJqMGxFUVZSb1ErMWFQVTZFUUJUK3RyQ0JSRU5NN05kRUcyTXpuYTBGTkI1RFcyMkJBd2kxcmZFZ1VIZ0VHcTAwV1U2d0FVMm90c0M4bFUyTWtXWEdZU0pqM2pZa08yOW12aitXQ2Z0bStQenNBRGdDc0FkZ3YvdHVxcGNsZ0RjQXJ3Qldzdzc4ZVhlZEt1aWZjSzBBUEJLQkV3QnptNUIvd1ZvU2dUTUxZdE9uNzVJSVhGaXEvaG8yRS9ocjk5Z0Jka0JUQVk2UXBvRGEwNDA2MERUTkE0RFdkZDFMYmFROUN4Z2prQ1RKYVJpR3Q3UnZtcVp4RkVWUEprZ3dnVDVWMlFISnZIR0VPRUtTVWVrcjR3aFpHU0g2aVd6YnR0M212aERpTUFpQ0s2ckpzdXkrS0lyRlVGcmlPSDRlcXZrK3Jod2hPaDQ0am5PZ3VwRk1mVjNYQzgvemJtUnFOelZUSTFCNm5uZHRsQUF0VGhFYTJrUUlNZmQ5ZngyaFBNOHBRdVhRbk4rY2w1UWRHQUt4R2VlamhLUlM3SUNWendFWmQva2VrRkhKNUt0RmRvQWRrRlJnVzFsVlZYYzBybm84VU5uYTJITkFCWVJPTFJQUVVXK011ZXpBR0NycXJNRU82S2czeHR4LzRZRDFmM1JiMzJwQW5TcFdOM3ZRdlVRa2pnSHNXdEEzUWUwMjd3QmVxTjNtQTY5TzRlTnk5M2wyQUFBQUFFbEZUa1N1UW1DQyl9JyArXHJcbiAgICAgICcuYm1hcC16b29tLnpvb21vdXQge2JhY2tncm91bmQtaW1hZ2U6IHVybChkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQURBQUFBQXdDQVlBQUFCWEF2bUhBQUFBQ1hCSVdYTUFBQXNUQUFBTEV3RUFtcHdZQUFBRkZtbFVXSFJZVFV3NlkyOXRMbUZrYjJKbExuaHRjQUFBQUFBQVBEOTRjR0ZqYTJWMElHSmxaMmx1UFNMdnU3OGlJR2xrUFNKWE5VMHdUWEJEWldocFNIcHlaVk42VGxSamVtdGpPV1FpUHo0Z1BIZzZlRzF3YldWMFlTQjRiV3h1Y3pwNFBTSmhaRzlpWlRwdWN6cHRaWFJoTHlJZ2VEcDRiWEIwYXowaVFXUnZZbVVnV0UxUUlFTnZjbVVnTlM0MkxXTXhOREFnTnprdU1UWXdORFV4TENBeU1ERTNMekExTHpBMkxUQXhPakE0T2pJeElDQWdJQ0FnSUNBaVBpQThjbVJtT2xKRVJpQjRiV3h1Y3pweVpHWTlJbWgwZEhBNkx5OTNkM2N1ZHpNdWIzSm5MekU1T1Rrdk1ESXZNakl0Y21SbUxYTjViblJoZUMxdWN5TWlQaUE4Y21SbU9rUmxjMk55YVhCMGFXOXVJSEprWmpwaFltOTFkRDBpSWlCNGJXeHVjenA0YlhBOUltaDBkSEE2THk5dWN5NWhaRzlpWlM1amIyMHZlR0Z3THpFdU1DOGlJSGh0Ykc1ek9tUmpQU0pvZEhSd09pOHZjSFZ5YkM1dmNtY3ZaR012Wld4bGJXVnVkSE12TVM0eEx5SWdlRzFzYm5NNmNHaHZkRzl6YUc5d1BTSm9kSFJ3T2k4dmJuTXVZV1J2WW1VdVkyOXRMM0JvYjNSdmMyaHZjQzh4TGpBdklpQjRiV3h1Y3pwNGJYQk5UVDBpYUhSMGNEb3ZMMjV6TG1Ga2IySmxMbU52YlM5NFlYQXZNUzR3TDIxdEx5SWdlRzFzYm5NNmMzUkZkblE5SW1oMGRIQTZMeTl1Y3k1aFpHOWlaUzVqYjIwdmVHRndMekV1TUM5elZIbHdaUzlTWlhOdmRYSmpaVVYyWlc1MEl5SWdlRzF3T2tOeVpXRjBiM0pVYjI5c1BTSkJaRzlpWlNCUWFHOTBiM05vYjNBZ1EwTWdLRTFoWTJsdWRHOXphQ2tpSUhodGNEcERjbVZoZEdWRVlYUmxQU0l5TURFNUxUQTBMVEk1VkRJeE9qUTRPakk1S3pBNE9qQXdJaUI0YlhBNlRXOWthV1o1UkdGMFpUMGlNakF4T1Mwd05DMHlPVlF5TVRvMU1qb3dOeXN3T0Rvd01DSWdlRzF3T2sxbGRHRmtZWFJoUkdGMFpUMGlNakF4T1Mwd05DMHlPVlF5TVRvMU1qb3dOeXN3T0Rvd01DSWdaR002Wm05eWJXRjBQU0pwYldGblpTOXdibWNpSUhCb2IzUnZjMmh2Y0RwRGIyeHZjazF2WkdVOUlqTWlJSEJvYjNSdmMyaHZjRHBKUTBOUWNtOW1hV3hsUFNKelVrZENJRWxGUXpZeE9UWTJMVEl1TVNJZ2VHMXdUVTA2U1c1emRHRnVZMlZKUkQwaWVHMXdMbWxwWkRvMU4yRTFZVEZsWWkwNFlqaGhMVFEwTmpRdFlUVTVZUzA1WkdZNVltVm1OREUyTkRJaUlIaHRjRTFOT2tSdlkzVnRaVzUwU1VROUluaHRjQzVrYVdRNk5UZGhOV0V4WldJdE9HSTRZUzAwTkRZMExXRTFPV0V0T1dSbU9XSmxaalF4TmpReUlpQjRiWEJOVFRwUGNtbG5hVzVoYkVSdlkzVnRaVzUwU1VROUluaHRjQzVrYVdRNk5UZGhOV0V4WldJdE9HSTRZUzAwTkRZMExXRTFPV0V0T1dSbU9XSmxaalF4TmpReUlqNGdQSGh0Y0UxTk9raHBjM1J2Y25rK0lEeHlaR1k2VTJWeFBpQThjbVJtT214cElITjBSWFowT21GamRHbHZiajBpWTNKbFlYUmxaQ0lnYzNSRmRuUTZhVzV6ZEdGdVkyVkpSRDBpZUcxd0xtbHBaRG8xTjJFMVlURmxZaTA0WWpoaExUUTBOalF0WVRVNVlTMDVaR1k1WW1WbU5ERTJORElpSUhOMFJYWjBPbmRvWlc0OUlqSXdNVGt0TURRdE1qbFVNakU2TkRnNk1qa3JNRGc2TURBaUlITjBSWFowT25OdlpuUjNZWEpsUVdkbGJuUTlJa0ZrYjJKbElGQm9iM1J2YzJodmNDQkRReUFvVFdGamFXNTBiM05vS1NJdlBpQThMM0prWmpwVFpYRStJRHd2ZUcxd1RVMDZTR2x6ZEc5eWVUNGdQQzl5WkdZNlJHVnpZM0pwY0hScGIyNCtJRHd2Y21SbU9sSkVSajRnUEM5NE9uaHRjRzFsZEdFK0lEdy9lSEJoWTJ0bGRDQmxibVE5SW5JaVB6NU5JNU50QUFBQkNrbEVRVlJvZ2UzYU1XNkRRQkJHNGNmaU5CUzJrS1hjSUlVTFg4SjE3dUlhTHNBcGZCV2ZJRjFTT1ZJS2R5NlFpQ1VxSk9OaW5TNEZDNWIrUlpxdm9Sb3hEN2JjQk84RmVBTld3SnE0MWNBdjhBMTBDWDc1M2VNNUp4MXdUSUVOOFgvMS82UkE2b0NsZXBNSmxvNTVmdjAvYTZmZVlDb0xVTE1BTlF0UXN3QTFDMUN6QURVTFVMTUF0Y1dZb2FxcXRuM2Y5ODllcGl6THI5Q1pCSGdQR1dqYjlwQmwyV3ZvaTRab211WW56L045eUV4c1J5Z1pNeEQwQjhBZm9kQ1pJWXFpK0F5ZEdSVVFrOWlPVURBTFVMTUFOUXRRc3dBMUMxQ3pBRFVMVUxNQU5ZZS9lekJYdFFPdTZpMG11RHJnaEw4NE1UY2RjRXFCRzNER1g1NjRBWmx5cXdGcTRBSjhBTjBkNWMwcHZnU0lvbnNBQUFBQVNVVk9SSzVDWUlJPSl9J1xyXG5cclxuICAgIGNvbnN0IGRvbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJylcclxuICAgIGRvbS5pbm5lclRleHQgPSBjc3NcclxuXHJcbiAgICByZXR1cm4gZG9tXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVUb29sdGlwQ1NTRE9NICgpIHtcclxuICBjb25zdCBjc3MgPVxyXG4gICAgJy5ibWFwLXRvb2x0aXAge3Bvc2l0aW9uOiBhYnNvbHV0ZTt0b3A6IDE1cHg7bGVmdDogMTVweDt6LWluZGV4OiA5OTk5O2Rpc3BsYXk6IGZsZXh9JyArXHJcbiAgICAnLmJtYXAtdG9vbHRpcC1pdGVtIHtwb3NpdGlvbjogcmVsYXRpdmU7cGFkZGluZzogNnB4IDRweDtmb250LXNpemU6IDE0cHg7Y29sb3I6ICMzMzM7YmFja2dyb3VuZC1jb2xvcjogcmdiYSg0MSw5NiwxMTUsIC45KX0nICtcclxuICAgICcuYm1hcC10b29sdGlwLWl0ZW06YmVmb3JlIHtjb250ZW50OiBcIlwiO2Rpc3BsYXk6IGJsb2NrO3Bvc2l0aW9uOiBhYnNvbHV0ZTt0b3A6IDI1JTtsZWZ0OiAwO2JvdHRvbTogMjUlO3dpZHRoOiAxcHg7YmFja2dyb3VuZC1jb2xvcjogI2ZmZn0nICtcclxuICAgICcuYm1hcC10b29sdGlwLWl0ZW06Zmlyc3QtY2hpbGQ6YmVmb3JlIHtkaXNwbGF5OiBub25lfScgK1xyXG4gICAgJy5ibWFwLXRvb2x0aXAtaXRlbSBsYWJlbCB7cGFkZGluZzogMnB4IDhweDtjb2xvcjogI2ZmZjtjdXJzb3I6IHBvaW50ZXJ9JyArXHJcbiAgICAnLmJtYXAtdG9vbHRpcC1pdGVtIHVsIHtwb3NpdGlvbjogYWJzb2x1dGU7ZGlzcGxheTogbm9uZTt0b3A6IDEwMCU7bGVmdDogMDt3aWR0aDogMTAwJTtmb250LXNpemU6IDA7bGlzdC1zdHlsZTogbm9uZTttYXJnaW46IDJweCAwIDAgMDtwYWRkaW5nOiAwO2JhY2tncm91bmQtY29sb3I6IHJnYmEoNDEsOTYsMTE1LCAuOSl9JyArXHJcbiAgICAnLmJtYXAtdG9vbHRpcC1pdGVtIHVsLmFjdGl2ZSB7ZGlzcGxheTogYmxvY2t9JyArXHJcbiAgICAnLmJtYXAtdG9vbHRpcC1pdGVtIGxpIHtwYWRkaW5nOiA0cHggMDtmb250LXNpemU6IDE0cHg7dGV4dC1hbGlnbjogY2VudGVyO2N1cnNvcjogcG9pbnRlcjtjb2xvcjogI2ZmZjtib3JkZXItdG9wOiAxcHggc29saWQgI2NjY30nICtcclxuICAgICcuYm1hcC10b29sdGlwLWl0ZW0gbGk6Zmlyc3QtY2hpbGQge2JvcmRlci10b3A6IG5vbmV9JyArXHJcbiAgICAnLmJtYXAtdG9vbHRpcC1pdGVtIGxpLmFjdGl2ZSB7YmFja2dyb3VuZC1jb2xvcjpyZ2JhKDQxLDk2LDExNSwgLjkpfSdcclxuXHJcbiAgY29uc3QgZG9tID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKVxyXG4gIGRvbS5pbm5lclRleHQgPSBjc3NcclxuXHJcbiAgcmV0dXJuIGRvbVxyXG59Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/ui/css.js\n");

/***/ }),

/***/ "./src/ui/index.js":
/*!*************************!*\
  !*** ./src/ui/index.js ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createTooltipCSSDOM: () => (/* reexport safe */ _css__WEBPACK_IMPORTED_MODULE_0__.createTooltipCSSDOM),\n/* harmony export */   createZoomCSSDOM: () => (/* reexport safe */ _css__WEBPACK_IMPORTED_MODULE_0__.createZoomCSSDOM),\n/* harmony export */   fillColors: () => (/* reexport safe */ _color__WEBPACK_IMPORTED_MODULE_1__.fillColors),\n/* harmony export */   strokeColors: () => (/* reexport safe */ _color__WEBPACK_IMPORTED_MODULE_1__.strokeColors)\n/* harmony export */ });\n/* harmony import */ var _css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./css */ \"./src/ui/css.js\");\n/* harmony import */ var _color__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./color */ \"./src/ui/color.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdWkvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9iYW9zaWdodC1tYXAvLi9zcmMvdWkvaW5kZXguanM/NzliYiJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgKiBmcm9tICcuL2NzcydcclxuZXhwb3J0ICogZnJvbSAnLi9jb2xvciciXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/ui/index.js\n");

/***/ }),

/***/ "./src/util/debug.js":
/*!***************************!*\
  !*** ./src/util/debug.js ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   log: () => (/* binding */ log),\n/* harmony export */   tip: () => (/* binding */ tip),\n/* harmony export */   warn: () => (/* binding */ warn)\n/* harmony export */ });\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../config */ \"./src/config.js\");\n\nlet warn = () => {};\nlet tip = () => {};\nlet log = () => {};\nif (true) {\n  warn = msg => {\n    if (!_config__WEBPACK_IMPORTED_MODULE_0__[\"default\"].silent) {\n      console.error(`[baosight-map warn]: ${msg}`);\n    }\n  };\n  tip = msg => {\n    if (!_config__WEBPACK_IMPORTED_MODULE_0__[\"default\"].silent) {\n      console.warn(`[baosight-map tip]: ${msg}`);\n    }\n  };\n  log = (...args) => {\n    if (!_config__WEBPACK_IMPORTED_MODULE_0__[\"default\"].silent) {\n      console.log(...args);\n    }\n  };\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdXRpbC9kZWJ1Zy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYmFvc2lnaHQtbWFwLy4vc3JjL3V0aWwvZGVidWcuanM/MGI4YiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY29uZmlnIGZyb20gJy4uL2NvbmZpZydcclxuXHJcbmV4cG9ydCBsZXQgd2FybiA9ICgpID0+IHt9XHJcbmV4cG9ydCBsZXQgdGlwID0gKCkgPT4ge31cclxuZXhwb3J0IGxldCBsb2cgPSAoKSA9PiB7fVxyXG5cclxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcclxuICB3YXJuID0gbXNnID0+IHtcclxuICAgIGlmICghY29uZmlnLnNpbGVudCkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKGBbYmFvc2lnaHQtbWFwIHdhcm5dOiAke21zZ31gKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgdGlwID0gbXNnID0+IHtcclxuICAgIGlmICghY29uZmlnLnNpbGVudCkge1xyXG4gICAgICBjb25zb2xlLndhcm4oYFtiYW9zaWdodC1tYXAgdGlwXTogJHttc2d9YClcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGxvZyA9ICguLi5hcmdzKSA9PiB7XHJcbiAgICBpZiAoIWNvbmZpZy5zaWxlbnQpIHtcclxuICAgICAgY29uc29sZS5sb2coLi4uYXJncylcclxuICAgIH1cclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/util/debug.js\n");

/***/ }),

/***/ "./src/util/dom.js":
/*!*************************!*\
  !*** ./src/util/dom.js ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createCanvas: () => (/* binding */ createCanvas),\n/* harmony export */   createTooltip: () => (/* binding */ createTooltip),\n/* harmony export */   getElement: () => (/* binding */ getElement)\n/* harmony export */ });\n/* harmony import */ var _ui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../ui */ \"./src/ui/index.js\");\n/* harmony import */ var _core_wheel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/wheel */ \"./src/core/wheel.js\");\n\n\nconst getElement = el => {\n  return typeof el === 'string' ? document.querySelector(el) : el;\n};\nconst createCanvas = (bm, options = {}) => {\n  const canvas = document.createElement('canvas');\n  canvas.width = bm.width;\n  canvas.height = bm.height;\n  if (!options.id) {\n    options.id = '';\n  }\n  const {\n    id = '',\n    ...restOpts\n  } = options;\n  options = Object.assign({}, {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    bottom: 0,\n    right: 0,\n    zIndex: bm.count++\n  }, restOpts);\n  id && (canvas.id = id);\n  Object.keys(options).map(key => {\n    canvas.style[key] = options[key];\n  });\n  bm.$el.appendChild(canvas);\n  return canvas;\n};\nconst createTooltip = bm => {\n  if (bm.tooltip.show) {\n    const tt = document.createElement('div');\n    tt.id = 'bmap-tooltip';\n    tt.className = 'bmap-tooltip';\n    let companyStr;\n    if (bm.tooltip.type === 'normal') {\n      tt.innerHTML = '<div class=\"bmap-tooltip-item\">' + '<label id=\"toolMarkerLabel\" class=\"bmap-tooltip-label\">标记</label>' + '<ul id=\"toolMarkerUl\" class=\"bmap-tooltip-ul\">' +\n      // '<li id=\"toolMarkerSelect\">点选</li>' +\n      '<li id=\"toolMarkerCheck\">查看</li>' + '</ul>' + '</div>';\n    } else if (bm.tooltip.type === 'allCompany') {\n      if (bm.companyList.length > 0) {\n        companyStr = '';\n        bm.companyList.map(c => {\n          companyStr += `<li id='${c.id}'>${c.name}</li>`;\n        });\n        tt.innerHTML = '<div class=\"bmap-tooltip-item\">' + '<label id=\"toolMarkerLabel\" class=\"bmap-tooltip-label\">标记</label>' + '<ul id=\"toolMarkerUl\" class=\"bmap-tooltip-ul\">' +\n        // '<li id=\"toolMarkerSelect\">点选</li>' +\n        '<li id=\"toolMarkerCheck\">查看</li>' + '</ul>' + '</div>' + '<div class=\"bmap-tooltip-item\">' + '<label id=\"toolCompanyLabel\" class=\"bmap-tooltip-label\">查看分厂</label>' + '<ul id=\"toolCompanyUl\" class=\"bmap-tooltip-ul\">' + companyStr + '</ul>' + '</div>';\n      } else {\n        tt.innerHTML = '<div class=\"bmap-tooltip-item\">' + '<label id=\"toolMarkerLabel\" class=\"bmap-tooltip-label\">标记</label>' + '<ul id=\"toolMarkerUl\" class=\"bmap-tooltip-ul\">' +\n        // '<li id=\"toolMarkerSelect\">点选</li>' +\n        '<li id=\"toolMarkerCheck\">查看</li>' + '</ul>' + '</div>';\n      }\n    }\n\n    // 添加事件\n    tt.addEventListener('click', e => {\n      const target = e.target;\n      // 子菜单显示隐藏\n      toggleTooltipSubmenu(target, bm);\n      bm._batchMarkerFlag();\n      if (target.nodeName.toLowerCase() === 'li') {\n        // 其他子菜单关闭\n        const sibs = getSiblings(target);\n        for (let i = 0; i < sibs.length; i++) {\n          removeClass(sibs[i]);\n        }\n      }\n      if (target.parentNode && target.parentNode.id === 'toolCompanyUl') {\n        if (hasClass(target)) {\n          removeClass(target);\n        } else {\n          addClass(target);\n          let targetId = target.id;\n          let chosedCompany = {};\n          bm.companyList.map(c => {\n            if (c.id == targetId) {\n              chosedCompany = {\n                ...c\n              };\n            }\n          });\n          bm._onChangeCompany && bm._onChangeCompany(chosedCompany);\n          bm.zoom = chosedCompany.zoom;\n          bm.center = chosedCompany.center;\n          bm._drawAll();\n        }\n      } else {\n        switch (target.id) {\n          case 'toolMarkerAdd':\n            // 添加标记\n            bm._onAddMarker && bm._onAddMarker();\n            break;\n          case 'toolMarkerMove':\n            if (hasClass(target)) {\n              removeClass(target);\n              bm._moveMarker(false);\n            } else {\n              addClass(target);\n              bm._moveMarker();\n            }\n            break;\n          case 'toolMarkerCheck':\n            if (hasClass(target)) {\n              removeClass(target);\n              bm._checkMarker(false);\n            } else {\n              addClass(target);\n              bm._checkMarker();\n            }\n            break;\n          case 'toolMarkerSelect':\n            if (hasClass(target)) {\n              removeClass(target);\n              bm._selectMarker(false);\n            } else {\n              addClass(target);\n              bm._selectMarker();\n            }\n            break;\n          case 'toolMarkerBoxSelect':\n            if (hasClass(target)) {\n              removeClass(target);\n              bm._boxSelectMarker(false);\n            } else {\n              addClass(target);\n              bm._boxSelectMarker();\n            }\n            break;\n        }\n      }\n\n      // switch (target.id) {\n      //   case 'toolMarkerAdd':\n      //     // 添加标记\n      //     bm._onAddMarker && bm._onAddMarker()\n      //     break\n\n      //   case 'toolMarkerMove':\n      //     if (hasClass(target)) {\n      //       removeClass(target)\n      //       bm._moveMarker(false)\n      //     } else {\n      //       addClass(target)\n      //       bm._moveMarker()\n      //     }\n      //     break\n\n      //   case 'toolMarkerSelect':\n      //     if (hasClass(target)) {\n      //       removeClass(target)\n      //       bm._selectMarker(false)\n      //     } else {\n      //       addClass(target)\n      //       bm._selectMarker()\n      //     }\n      //     break\n\n      //   case 'toolMarkerBoxSelect':\n      //     if (hasClass(target)) {\n      //       removeClass(target)\n      //       bm._boxSelectMarker(false)\n      //     } else {\n      //       addClass(target)\n      //       bm._boxSelectMarker()\n      //     }\n      //     break\n      // }\n    });\n\n    // 注入css\n    tt.appendChild((0,_ui__WEBPACK_IMPORTED_MODULE_0__.createTooltipCSSDOM)());\n    bm.$el.appendChild(tt);\n  }\n  if (bm.zoomBox.show) {\n    const zoom = document.createElement('div');\n    zoom.id = 'bmap-zoom';\n    zoom.className = 'bmap-zoom-container';\n    zoom.innerHTML = '<div class=\"bmap-zoom-inner\">' + '<div id=\"bmapZoomIn\" class=\"bmap-zoom zoomin\"></div>' + '<div id=\"bmapZoomOut\" class=\"bmap-zoom zoomout\"></div>' + '</div>';\n\n    // 添加事件\n    zoom.addEventListener('click', e => {\n      const id = e.target.id;\n      if (id === 'bmapZoomIn') {\n        (0,_core_wheel__WEBPACK_IMPORTED_MODULE_1__.zoomInOut)(e, 1, bm);\n      } else if (id === 'bmapZoomOut') {\n        (0,_core_wheel__WEBPACK_IMPORTED_MODULE_1__.zoomInOut)(e, -1, bm);\n      }\n    });\n\n    // 注入css\n    zoom.appendChild((0,_ui__WEBPACK_IMPORTED_MODULE_0__.createZoomCSSDOM)());\n    bm.$el.appendChild(zoom);\n  }\n};\n\n/* 添加class */\nfunction addClass(el, className = 'active') {\n  const oldClassName = el.className.trim();\n  const arr = oldClassName.split(' ');\n  const cleanArr = arr.filter(v => !!v);\n  cleanArr.push(className);\n  el.className = cleanArr.join(' ');\n  return el;\n}\n\n/* 删除class */\nfunction removeClass(el, className = 'active') {\n  const str = el.className.trim();\n  const arr = str.split(' ');\n  const newArr = [];\n  arr.map(cls => {\n    if (cls && cls !== className) {\n      newArr.push(cls);\n    }\n  });\n  el.className = newArr.join(' ');\n  return el;\n}\n\n/* 判断是否存在class */\nfunction hasClass(el, className = 'active') {\n  let has = false;\n  const str = el.className.trim();\n  const arr = str.split(' ');\n  arr.some(c => {\n    if (c === className) {\n      has = true;\n      return true;\n    }\n  });\n  return has;\n}\n\n// 显示隐藏工具栏子菜单\nfunction toggleTooltipSubmenu(target) {\n  const className = target.className;\n  if (!~className.indexOf('bmap-tooltip-label')) return;\n  const allUl = document.querySelectorAll('.bmap-tooltip-ul');\n  const allLi = document.querySelectorAll('.bmap-tooltip-ul li');\n  const allLabel = document.querySelectorAll('.bmap-tooltip-label');\n\n  // 隐藏所有子菜单\n  for (let i = 0; i < allUl.length; i++) {\n    removeClass(allUl[i]);\n  }\n\n  // 去掉子菜单active\n  for (let i = 0; i < allLi.length; i++) {\n    removeClass(allLi[i]);\n  }\n\n  // 判断是否已激活\n  if (hasClass(target)) {\n    // 当前已显示菜单，只需隐藏即可\n    removeClass(target);\n  } else {\n    // 删除label active\n    for (let i = 0; i < allLabel.length; i++) {\n      removeClass(allLabel[i]);\n    }\n    addClass(target);\n\n    // 显示隐藏子菜单\n    let ele = target;\n    while (ele = ele.nextSibling) {\n      if (ele.nodeType === 1) {\n        addClass(ele);\n      }\n    }\n  }\n}\n\n// 获取相邻兄弟节点\nfunction getSiblings(target) {\n  let ele = target;\n  const doms = [];\n  while (ele = ele.previousSibling) {\n    if (ele.nodeType === 1) {\n      doms.unshift(ele);\n    }\n  }\n  ele = target;\n  while (ele = ele.nextSibling) {\n    if (ele.nodeType === 1) {\n      doms.push(ele);\n    }\n  }\n  return doms;\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdXRpbC9kb20uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFJQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBU0E7QUFDQTtBQUlBO0FBQ0E7QUFHQTtBQUNBOztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFNQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9iYW9zaWdodC1tYXAvLi9zcmMvdXRpbC9kb20uanM/ZGEzMCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVab29tQ1NTRE9NLCBjcmVhdGVUb29sdGlwQ1NTRE9NIH0gZnJvbSAnLi4vdWknXHJcbmltcG9ydCB7IHpvb21Jbk91dCB9IGZyb20gJy4uL2NvcmUvd2hlZWwnXHJcblxyXG5leHBvcnQgY29uc3QgZ2V0RWxlbWVudCA9IGVsID0+IHtcclxuICByZXR1cm4gdHlwZW9mIGVsID09PSAnc3RyaW5nJyA/IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZWwpIDogZWxcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGNyZWF0ZUNhbnZhcyA9IChibSwgb3B0aW9ucyA9IHt9KSA9PiB7XHJcbiAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJylcclxuXHJcbiAgY2FudmFzLndpZHRoID0gYm0ud2lkdGhcclxuICBjYW52YXMuaGVpZ2h0ID0gYm0uaGVpZ2h0XHJcblxyXG4gIGlmICghb3B0aW9ucy5pZCkge1xyXG4gICAgb3B0aW9ucy5pZCA9ICcnXHJcbiAgfVxyXG5cclxuICBjb25zdCB7IGlkID0gJycsIC4uLnJlc3RPcHRzIH0gPSBvcHRpb25zXHJcblxyXG4gIG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKFxyXG4gICAge30sXHJcbiAgICB7XHJcbiAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxyXG4gICAgICB0b3A6IDAsXHJcbiAgICAgIGxlZnQ6IDAsXHJcbiAgICAgIGJvdHRvbTogMCxcclxuICAgICAgcmlnaHQ6IDAsXHJcbiAgICAgIHpJbmRleDogYm0uY291bnQrK1xyXG4gICAgfSxcclxuICAgIHJlc3RPcHRzXHJcbiAgKVxyXG5cclxuICBpZCAmJiAoY2FudmFzLmlkID0gaWQpXHJcblxyXG4gIE9iamVjdC5rZXlzKG9wdGlvbnMpLm1hcChrZXkgPT4ge1xyXG4gICAgY2FudmFzLnN0eWxlW2tleV0gPSBvcHRpb25zW2tleV1cclxuICB9KVxyXG5cclxuICBibS4kZWwuYXBwZW5kQ2hpbGQoY2FudmFzKVxyXG5cclxuICByZXR1cm4gY2FudmFzXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBjcmVhdGVUb29sdGlwID0gYm0gPT4ge1xyXG4gIGlmIChibS50b29sdGlwLnNob3cpIHtcclxuICAgIGNvbnN0IHR0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcclxuICAgIHR0LmlkID0gJ2JtYXAtdG9vbHRpcCdcclxuICAgIHR0LmNsYXNzTmFtZSA9ICdibWFwLXRvb2x0aXAnXHJcblxyXG4gICAgbGV0IGNvbXBhbnlTdHI7XHJcblxyXG4gICAgaWYoYm0udG9vbHRpcC50eXBlID09PSdub3JtYWwnKSB7XHJcbiAgICAgIHR0LmlubmVySFRNTCA9XHJcbiAgICAgICAgJzxkaXYgY2xhc3M9XCJibWFwLXRvb2x0aXAtaXRlbVwiPicgK1xyXG4gICAgICAgICc8bGFiZWwgaWQ9XCJ0b29sTWFya2VyTGFiZWxcIiBjbGFzcz1cImJtYXAtdG9vbHRpcC1sYWJlbFwiPuagh+iusDwvbGFiZWw+JyArXHJcbiAgICAgICAgJzx1bCBpZD1cInRvb2xNYXJrZXJVbFwiIGNsYXNzPVwiYm1hcC10b29sdGlwLXVsXCI+JyArXHJcbiAgICAgICAgLy8gJzxsaSBpZD1cInRvb2xNYXJrZXJTZWxlY3RcIj7ngrnpgIk8L2xpPicgK1xyXG4gICAgICAgICc8bGkgaWQ9XCJ0b29sTWFya2VyQ2hlY2tcIj7mn6XnnIs8L2xpPicgK1xyXG4gICAgICAgICc8L3VsPicgK1xyXG4gICAgICAgICc8L2Rpdj4nIDtcclxuICAgIH1lbHNlIGlmKGJtLnRvb2x0aXAudHlwZSA9PT0gJ2FsbENvbXBhbnknKXtcclxuICAgICAgaWYoYm0uY29tcGFueUxpc3QubGVuZ3RoID4gMCl7XHJcbiAgICAgICAgY29tcGFueVN0ciA9ICcnXHJcbiAgICAgICAgYm0uY29tcGFueUxpc3QubWFwKChjKSA9PiB7XHJcbiAgICAgICAgICBjb21wYW55U3RyICs9IGA8bGkgaWQ9JyR7Yy5pZH0nPiR7Yy5uYW1lfTwvbGk+YFxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgdHQuaW5uZXJIVE1MID1cclxuICAgICAgICAnPGRpdiBjbGFzcz1cImJtYXAtdG9vbHRpcC1pdGVtXCI+JyArXHJcbiAgICAgICAgJzxsYWJlbCBpZD1cInRvb2xNYXJrZXJMYWJlbFwiIGNsYXNzPVwiYm1hcC10b29sdGlwLWxhYmVsXCI+5qCH6K6wPC9sYWJlbD4nICtcclxuICAgICAgICAnPHVsIGlkPVwidG9vbE1hcmtlclVsXCIgY2xhc3M9XCJibWFwLXRvb2x0aXAtdWxcIj4nICtcclxuICAgICAgICAvLyAnPGxpIGlkPVwidG9vbE1hcmtlclNlbGVjdFwiPueCuemAiTwvbGk+JyArXHJcbiAgICAgICAgJzxsaSBpZD1cInRvb2xNYXJrZXJDaGVja1wiPuafpeecizwvbGk+JyArXHJcbiAgICAgICAgJzwvdWw+JyArXHJcbiAgICAgICAgJzwvZGl2PicgK1xyXG4gICAgICAgICc8ZGl2IGNsYXNzPVwiYm1hcC10b29sdGlwLWl0ZW1cIj4nICtcclxuICAgICAgICAnPGxhYmVsIGlkPVwidG9vbENvbXBhbnlMYWJlbFwiIGNsYXNzPVwiYm1hcC10b29sdGlwLWxhYmVsXCI+5p+l55yL5YiG5Y6CPC9sYWJlbD4nICtcclxuICAgICAgICAnPHVsIGlkPVwidG9vbENvbXBhbnlVbFwiIGNsYXNzPVwiYm1hcC10b29sdGlwLXVsXCI+JyArXHJcbiAgICAgICAgY29tcGFueVN0ciArXHJcbiAgICAgICAgJzwvdWw+JyArXHJcbiAgICAgICAgJzwvZGl2Pic7XHJcbiAgICAgIH1lbHNle1xyXG4gICAgICAgIHR0LmlubmVySFRNTCA9XHJcbiAgICAgICAgJzxkaXYgY2xhc3M9XCJibWFwLXRvb2x0aXAtaXRlbVwiPicgK1xyXG4gICAgICAgICc8bGFiZWwgaWQ9XCJ0b29sTWFya2VyTGFiZWxcIiBjbGFzcz1cImJtYXAtdG9vbHRpcC1sYWJlbFwiPuagh+iusDwvbGFiZWw+JyArXHJcbiAgICAgICAgJzx1bCBpZD1cInRvb2xNYXJrZXJVbFwiIGNsYXNzPVwiYm1hcC10b29sdGlwLXVsXCI+JyArXHJcbiAgICAgICAgLy8gJzxsaSBpZD1cInRvb2xNYXJrZXJTZWxlY3RcIj7ngrnpgIk8L2xpPicgK1xyXG4gICAgICAgICc8bGkgaWQ9XCJ0b29sTWFya2VyQ2hlY2tcIj7mn6XnnIs8L2xpPicgK1xyXG4gICAgICAgICc8L3VsPicgK1xyXG4gICAgICAgICc8L2Rpdj4nXHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgLy8g5re75Yqg5LqL5Lu2XHJcbiAgICB0dC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xyXG4gICAgICBjb25zdCB0YXJnZXQgPSBlLnRhcmdldFxyXG4gICAgICAvLyDlrZDoj5zljZXmmL7npLrpmpDol49cclxuICAgICAgdG9nZ2xlVG9vbHRpcFN1Ym1lbnUodGFyZ2V0LCBibSlcclxuICAgICAgYm0uX2JhdGNoTWFya2VyRmxhZygpXHJcblxyXG4gICAgICBpZiAodGFyZ2V0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdsaScpIHtcclxuICAgICAgICAvLyDlhbbku5blrZDoj5zljZXlhbPpl61cclxuICAgICAgICBjb25zdCBzaWJzID0gZ2V0U2libGluZ3ModGFyZ2V0KVxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2licy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgcmVtb3ZlQ2xhc3Moc2lic1tpXSlcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmKHRhcmdldC5wYXJlbnROb2RlICYmIHRhcmdldC5wYXJlbnROb2RlLmlkID09PSAndG9vbENvbXBhbnlVbCcpe1xyXG4gICAgICAgIGlmKGhhc0NsYXNzKHRhcmdldCkpe1xyXG4gICAgICAgICAgcmVtb3ZlQ2xhc3ModGFyZ2V0KVxyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgYWRkQ2xhc3ModGFyZ2V0KVxyXG4gICAgICAgICAgbGV0IHRhcmdldElkID0gdGFyZ2V0LmlkXHJcbiAgICAgICAgICBsZXQgY2hvc2VkQ29tcGFueSA9IHt9XHJcbiAgICAgICAgICBibS5jb21wYW55TGlzdC5tYXAoYyA9PiB7XHJcbiAgICAgICAgICAgIGlmKGMuaWQgPT0gdGFyZ2V0SWQpe1xyXG4gICAgICAgICAgICAgIGNob3NlZENvbXBhbnkgPSB7XHJcbiAgICAgICAgICAgICAgICAuLi5jXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgYm0uX29uQ2hhbmdlQ29tcGFueSAmJiBibS5fb25DaGFuZ2VDb21wYW55KGNob3NlZENvbXBhbnkpXHJcbiAgICAgICAgICBibS56b29tID0gY2hvc2VkQ29tcGFueS56b29tXHJcbiAgICAgICAgICBibS5jZW50ZXIgPSBjaG9zZWRDb21wYW55LmNlbnRlclxyXG4gICAgICAgICAgYm0uX2RyYXdBbGwoKVxyXG4gICAgICAgIH1cclxuICAgICAgfWVsc2V7XHJcbiAgICAgICAgc3dpdGNoICh0YXJnZXQuaWQpIHtcclxuICAgICAgICAgIGNhc2UgJ3Rvb2xNYXJrZXJBZGQnOlxyXG4gICAgICAgICAgICAvLyDmt7vliqDmoIforrBcclxuICAgICAgICAgICAgYm0uX29uQWRkTWFya2VyICYmIGJtLl9vbkFkZE1hcmtlcigpXHJcbiAgICAgICAgICAgIGJyZWFrXHJcblxyXG4gICAgICAgICAgY2FzZSAndG9vbE1hcmtlck1vdmUnOlxyXG4gICAgICAgICAgICBpZiAoaGFzQ2xhc3ModGFyZ2V0KSkge1xyXG4gICAgICAgICAgICAgIHJlbW92ZUNsYXNzKHRhcmdldClcclxuICAgICAgICAgICAgICBibS5fbW92ZU1hcmtlcihmYWxzZSlcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBhZGRDbGFzcyh0YXJnZXQpXHJcbiAgICAgICAgICAgICAgYm0uX21vdmVNYXJrZXIoKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJyZWFrXHJcblxyXG4gICAgICAgICAgY2FzZSAndG9vbE1hcmtlckNoZWNrJzpcclxuICAgICAgICAgICAgaWYgKGhhc0NsYXNzKHRhcmdldCkpIHtcclxuICAgICAgICAgICAgICByZW1vdmVDbGFzcyh0YXJnZXQpXHJcbiAgICAgICAgICAgICAgYm0uX2NoZWNrTWFya2VyKGZhbHNlKVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIGFkZENsYXNzKHRhcmdldClcclxuICAgICAgICAgICAgICBibS5fY2hlY2tNYXJrZXIoKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJyZWFrXHJcblxyXG4gICAgICAgICAgY2FzZSAndG9vbE1hcmtlclNlbGVjdCc6XHJcbiAgICAgICAgICAgIGlmIChoYXNDbGFzcyh0YXJnZXQpKSB7XHJcbiAgICAgICAgICAgICAgcmVtb3ZlQ2xhc3ModGFyZ2V0KVxyXG4gICAgICAgICAgICAgIGJtLl9zZWxlY3RNYXJrZXIoZmFsc2UpXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgYWRkQ2xhc3ModGFyZ2V0KVxyXG4gICAgICAgICAgICAgIGJtLl9zZWxlY3RNYXJrZXIoKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJyZWFrXHJcblxyXG4gICAgICAgICAgY2FzZSAndG9vbE1hcmtlckJveFNlbGVjdCc6XHJcbiAgICAgICAgICAgIGlmIChoYXNDbGFzcyh0YXJnZXQpKSB7XHJcbiAgICAgICAgICAgICAgcmVtb3ZlQ2xhc3ModGFyZ2V0KVxyXG4gICAgICAgICAgICAgIGJtLl9ib3hTZWxlY3RNYXJrZXIoZmFsc2UpXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgYWRkQ2xhc3ModGFyZ2V0KVxyXG4gICAgICAgICAgICAgIGJtLl9ib3hTZWxlY3RNYXJrZXIoKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBzd2l0Y2ggKHRhcmdldC5pZCkge1xyXG4gICAgICAvLyAgIGNhc2UgJ3Rvb2xNYXJrZXJBZGQnOlxyXG4gICAgICAvLyAgICAgLy8g5re75Yqg5qCH6K6wXHJcbiAgICAgIC8vICAgICBibS5fb25BZGRNYXJrZXIgJiYgYm0uX29uQWRkTWFya2VyKClcclxuICAgICAgLy8gICAgIGJyZWFrXHJcblxyXG4gICAgICAvLyAgIGNhc2UgJ3Rvb2xNYXJrZXJNb3ZlJzpcclxuICAgICAgLy8gICAgIGlmIChoYXNDbGFzcyh0YXJnZXQpKSB7XHJcbiAgICAgIC8vICAgICAgIHJlbW92ZUNsYXNzKHRhcmdldClcclxuICAgICAgLy8gICAgICAgYm0uX21vdmVNYXJrZXIoZmFsc2UpXHJcbiAgICAgIC8vICAgICB9IGVsc2Uge1xyXG4gICAgICAvLyAgICAgICBhZGRDbGFzcyh0YXJnZXQpXHJcbiAgICAgIC8vICAgICAgIGJtLl9tb3ZlTWFya2VyKClcclxuICAgICAgLy8gICAgIH1cclxuICAgICAgLy8gICAgIGJyZWFrXHJcblxyXG4gICAgICAvLyAgIGNhc2UgJ3Rvb2xNYXJrZXJTZWxlY3QnOlxyXG4gICAgICAvLyAgICAgaWYgKGhhc0NsYXNzKHRhcmdldCkpIHtcclxuICAgICAgLy8gICAgICAgcmVtb3ZlQ2xhc3ModGFyZ2V0KVxyXG4gICAgICAvLyAgICAgICBibS5fc2VsZWN0TWFya2VyKGZhbHNlKVxyXG4gICAgICAvLyAgICAgfSBlbHNlIHtcclxuICAgICAgLy8gICAgICAgYWRkQ2xhc3ModGFyZ2V0KVxyXG4gICAgICAvLyAgICAgICBibS5fc2VsZWN0TWFya2VyKClcclxuICAgICAgLy8gICAgIH1cclxuICAgICAgLy8gICAgIGJyZWFrXHJcblxyXG4gICAgICAvLyAgIGNhc2UgJ3Rvb2xNYXJrZXJCb3hTZWxlY3QnOlxyXG4gICAgICAvLyAgICAgaWYgKGhhc0NsYXNzKHRhcmdldCkpIHtcclxuICAgICAgLy8gICAgICAgcmVtb3ZlQ2xhc3ModGFyZ2V0KVxyXG4gICAgICAvLyAgICAgICBibS5fYm94U2VsZWN0TWFya2VyKGZhbHNlKVxyXG4gICAgICAvLyAgICAgfSBlbHNlIHtcclxuICAgICAgLy8gICAgICAgYWRkQ2xhc3ModGFyZ2V0KVxyXG4gICAgICAvLyAgICAgICBibS5fYm94U2VsZWN0TWFya2VyKClcclxuICAgICAgLy8gICAgIH1cclxuICAgICAgLy8gICAgIGJyZWFrXHJcbiAgICAgIC8vIH1cclxuICAgIH0pXHJcblxyXG4gICAgLy8g5rOo5YWlY3NzXHJcbiAgICB0dC5hcHBlbmRDaGlsZChjcmVhdGVUb29sdGlwQ1NTRE9NKCkpXHJcblxyXG4gICAgYm0uJGVsLmFwcGVuZENoaWxkKHR0KVxyXG4gIH1cclxuXHJcbiAgaWYgKGJtLnpvb21Cb3guc2hvdykge1xyXG4gICAgY29uc3Qgem9vbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXHJcbiAgICB6b29tLmlkID0gJ2JtYXAtem9vbSdcclxuICAgIHpvb20uY2xhc3NOYW1lID0gJ2JtYXAtem9vbS1jb250YWluZXInXHJcblxyXG4gICAgem9vbS5pbm5lckhUTUwgPVxyXG4gICAgICAnPGRpdiBjbGFzcz1cImJtYXAtem9vbS1pbm5lclwiPicgK1xyXG4gICAgICAnPGRpdiBpZD1cImJtYXBab29tSW5cIiBjbGFzcz1cImJtYXAtem9vbSB6b29taW5cIj48L2Rpdj4nICtcclxuICAgICAgJzxkaXYgaWQ9XCJibWFwWm9vbU91dFwiIGNsYXNzPVwiYm1hcC16b29tIHpvb21vdXRcIj48L2Rpdj4nICtcclxuICAgICAgJzwvZGl2PidcclxuXHJcbiAgICAvLyDmt7vliqDkuovku7ZcclxuICAgIHpvb20uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcclxuICAgICAgY29uc3QgaWQgPSBlLnRhcmdldC5pZFxyXG5cclxuICAgICAgaWYgKGlkID09PSAnYm1hcFpvb21JbicpIHtcclxuICAgICAgICB6b29tSW5PdXQoZSwgMSwgYm0pXHJcbiAgICAgIH0gZWxzZSBpZiAoaWQgPT09ICdibWFwWm9vbU91dCcpIHtcclxuICAgICAgICB6b29tSW5PdXQoZSwgLTEsIGJtKVxyXG4gICAgICB9XHJcbiAgICB9KVxyXG5cclxuICAgIC8vIOazqOWFpWNzc1xyXG4gICAgem9vbS5hcHBlbmRDaGlsZChjcmVhdGVab29tQ1NTRE9NKCkpXHJcbiAgICBibS4kZWwuYXBwZW5kQ2hpbGQoem9vbSlcclxuICB9XHJcbn1cclxuXHJcbi8qIOa3u+WKoGNsYXNzICovXHJcbmZ1bmN0aW9uIGFkZENsYXNzKGVsLCBjbGFzc05hbWUgPSAnYWN0aXZlJykge1xyXG4gIGNvbnN0IG9sZENsYXNzTmFtZSA9IGVsLmNsYXNzTmFtZS50cmltKClcclxuICBjb25zdCBhcnIgPSBvbGRDbGFzc05hbWUuc3BsaXQoJyAnKVxyXG5cclxuICBjb25zdCBjbGVhbkFyciA9IGFyci5maWx0ZXIodiA9PiAhIXYpXHJcblxyXG4gIGNsZWFuQXJyLnB1c2goY2xhc3NOYW1lKVxyXG5cclxuICBlbC5jbGFzc05hbWUgPSBjbGVhbkFyci5qb2luKCcgJylcclxuXHJcbiAgcmV0dXJuIGVsXHJcbn1cclxuXHJcbi8qIOWIoOmZpGNsYXNzICovXHJcbmZ1bmN0aW9uIHJlbW92ZUNsYXNzKGVsLCBjbGFzc05hbWUgPSAnYWN0aXZlJykge1xyXG4gIGNvbnN0IHN0ciA9IGVsLmNsYXNzTmFtZS50cmltKClcclxuICBjb25zdCBhcnIgPSBzdHIuc3BsaXQoJyAnKVxyXG4gIGNvbnN0IG5ld0FyciA9IFtdXHJcblxyXG4gIGFyci5tYXAoY2xzID0+IHtcclxuICAgIGlmIChjbHMgJiYgY2xzICE9PSBjbGFzc05hbWUpIHtcclxuICAgICAgbmV3QXJyLnB1c2goY2xzKVxyXG4gICAgfVxyXG4gIH0pXHJcblxyXG4gIGVsLmNsYXNzTmFtZSA9IG5ld0Fyci5qb2luKCcgJylcclxuXHJcbiAgcmV0dXJuIGVsXHJcbn1cclxuXHJcbi8qIOWIpOaWreaYr+WQpuWtmOWcqGNsYXNzICovXHJcbmZ1bmN0aW9uIGhhc0NsYXNzKGVsLCBjbGFzc05hbWUgPSAnYWN0aXZlJykge1xyXG4gIGxldCBoYXMgPSBmYWxzZVxyXG5cclxuICBjb25zdCBzdHIgPSBlbC5jbGFzc05hbWUudHJpbSgpXHJcbiAgY29uc3QgYXJyID0gc3RyLnNwbGl0KCcgJylcclxuXHJcbiAgYXJyLnNvbWUoYyA9PiB7XHJcbiAgICBpZiAoYyA9PT0gY2xhc3NOYW1lKSB7XHJcbiAgICAgIGhhcyA9IHRydWVcclxuICAgICAgcmV0dXJuIHRydWVcclxuICAgIH1cclxuICB9KVxyXG5cclxuICByZXR1cm4gaGFzXHJcbn1cclxuXHJcbi8vIOaYvuekuumakOiXj+W3peWFt+agj+WtkOiPnOWNlVxyXG5mdW5jdGlvbiB0b2dnbGVUb29sdGlwU3VibWVudSh0YXJnZXQpIHtcclxuICBjb25zdCBjbGFzc05hbWUgPSB0YXJnZXQuY2xhc3NOYW1lXHJcblxyXG4gIGlmICghfmNsYXNzTmFtZS5pbmRleE9mKCdibWFwLXRvb2x0aXAtbGFiZWwnKSkgcmV0dXJuXHJcblxyXG4gIGNvbnN0IGFsbFVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmJtYXAtdG9vbHRpcC11bCcpXHJcbiAgY29uc3QgYWxsTGkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYm1hcC10b29sdGlwLXVsIGxpJylcclxuICBjb25zdCBhbGxMYWJlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5ibWFwLXRvb2x0aXAtbGFiZWwnKVxyXG5cclxuICAvLyDpmpDol4/miYDmnInlrZDoj5zljZVcclxuICBmb3IgKGxldCBpID0gMDsgaSA8IGFsbFVsLmxlbmd0aDsgaSsrKSB7XHJcbiAgICByZW1vdmVDbGFzcyhhbGxVbFtpXSlcclxuICB9XHJcblxyXG4gIC8vIOWOu+aOieWtkOiPnOWNlWFjdGl2ZVxyXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgYWxsTGkubGVuZ3RoOyBpKyspIHtcclxuICAgIHJlbW92ZUNsYXNzKGFsbExpW2ldKVxyXG4gIH1cclxuXHJcbiAgLy8g5Yik5pat5piv5ZCm5bey5r+A5rS7XHJcbiAgaWYgKGhhc0NsYXNzKHRhcmdldCkpIHtcclxuICAgIC8vIOW9k+WJjeW3suaYvuekuuiPnOWNle+8jOWPqumcgOmakOiXj+WNs+WPr1xyXG4gICAgcmVtb3ZlQ2xhc3ModGFyZ2V0KVxyXG4gIH0gZWxzZSB7XHJcbiAgICAvLyDliKDpmaRsYWJlbCBhY3RpdmVcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYWxsTGFiZWwubGVuZ3RoOyBpKyspIHtcclxuICAgICAgcmVtb3ZlQ2xhc3MoYWxsTGFiZWxbaV0pXHJcbiAgICB9XHJcblxyXG4gICAgYWRkQ2xhc3ModGFyZ2V0KVxyXG5cclxuICAgIC8vIOaYvuekuumakOiXj+WtkOiPnOWNlVxyXG4gICAgbGV0IGVsZSA9IHRhcmdldFxyXG4gICAgd2hpbGUgKChlbGUgPSBlbGUubmV4dFNpYmxpbmcpKSB7XHJcbiAgICAgIGlmIChlbGUubm9kZVR5cGUgPT09IDEpIHtcclxuICAgICAgICBhZGRDbGFzcyhlbGUpXHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbi8vIOiOt+WPluebuOmCu+WFhOW8n+iKgueCuVxyXG5mdW5jdGlvbiBnZXRTaWJsaW5ncyh0YXJnZXQpIHtcclxuICBsZXQgZWxlID0gdGFyZ2V0XHJcbiAgY29uc3QgZG9tcyA9IFtdXHJcblxyXG4gIHdoaWxlICgoZWxlID0gZWxlLnByZXZpb3VzU2libGluZykpIHtcclxuICAgIGlmIChlbGUubm9kZVR5cGUgPT09IDEpIHtcclxuICAgICAgZG9tcy51bnNoaWZ0KGVsZSlcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGVsZSA9IHRhcmdldFxyXG5cclxuICB3aGlsZSAoKGVsZSA9IGVsZS5uZXh0U2libGluZykpIHtcclxuICAgIGlmIChlbGUubm9kZVR5cGUgPT09IDEpIHtcclxuICAgICAgZG9tcy5wdXNoKGVsZSlcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJldHVybiBkb21zXHJcbn1cclxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/util/dom.js\n");

/***/ }),

/***/ "./src/util/index.js":
/*!***************************!*\
  !*** ./src/util/index.js ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createCanvas: () => (/* reexport safe */ _dom__WEBPACK_IMPORTED_MODULE_1__.createCanvas),\n/* harmony export */   createTooltip: () => (/* reexport safe */ _dom__WEBPACK_IMPORTED_MODULE_1__.createTooltip),\n/* harmony export */   debounce: () => (/* reexport safe */ _util__WEBPACK_IMPORTED_MODULE_2__.debounce),\n/* harmony export */   getElement: () => (/* reexport safe */ _dom__WEBPACK_IMPORTED_MODULE_1__.getElement),\n/* harmony export */   getRandom: () => (/* reexport safe */ _util__WEBPACK_IMPORTED_MODULE_2__.getRandom),\n/* harmony export */   getTileIndex: () => (/* reexport safe */ _tile__WEBPACK_IMPORTED_MODULE_3__.getTileIndex),\n/* harmony export */   initTileMap: () => (/* reexport safe */ _tile__WEBPACK_IMPORTED_MODULE_3__.initTileMap),\n/* harmony export */   isNumeric: () => (/* reexport safe */ _util__WEBPACK_IMPORTED_MODULE_2__.isNumeric),\n/* harmony export */   joinPath: () => (/* reexport safe */ _util__WEBPACK_IMPORTED_MODULE_2__.joinPath),\n/* harmony export */   log: () => (/* reexport safe */ _debug__WEBPACK_IMPORTED_MODULE_0__.log),\n/* harmony export */   millimeter2percent: () => (/* reexport safe */ _util__WEBPACK_IMPORTED_MODULE_2__.millimeter2percent),\n/* harmony export */   millimeter2pixel: () => (/* reexport safe */ _util__WEBPACK_IMPORTED_MODULE_2__.millimeter2pixel),\n/* harmony export */   pixel2millimeter: () => (/* reexport safe */ _util__WEBPACK_IMPORTED_MODULE_2__.pixel2millimeter),\n/* harmony export */   tip: () => (/* reexport safe */ _debug__WEBPACK_IMPORTED_MODULE_0__.tip),\n/* harmony export */   warn: () => (/* reexport safe */ _debug__WEBPACK_IMPORTED_MODULE_0__.warn),\n/* harmony export */   windows2canvas: () => (/* reexport safe */ _util__WEBPACK_IMPORTED_MODULE_2__.windows2canvas)\n/* harmony export */ });\n/* harmony import */ var _debug__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./debug */ \"./src/util/debug.js\");\n/* harmony import */ var _dom__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./dom */ \"./src/util/dom.js\");\n/* harmony import */ var _util__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./util */ \"./src/util/util.js\");\n/* harmony import */ var _tile__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./tile */ \"./src/util/tile.js\");\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdXRpbC9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2Jhb3NpZ2h0LW1hcC8uL3NyYy91dGlsL2luZGV4LmpzPzQyNjAiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0ICogZnJvbSAnLi9kZWJ1ZydcclxuZXhwb3J0ICogZnJvbSAnLi9kb20nXHJcbmV4cG9ydCAqIGZyb20gJy4vdXRpbCdcclxuZXhwb3J0ICogZnJvbSAnLi90aWxlJ1xyXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/util/index.js\n");

/***/ }),

/***/ "./src/util/tile.js":
/*!**************************!*\
  !*** ./src/util/tile.js ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getTileIndex: () => (/* binding */ getTileIndex),\n/* harmony export */   initTileMap: () => (/* binding */ initTileMap)\n/* harmony export */ });\n/* harmony import */ var _debug__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./debug */ \"./src/util/debug.js\");\n/* harmony import */ var _util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./util */ \"./src/util/util.js\");\n\n\nconst ph = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEAAQMAAABmvDolAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAANQTFRFAAAAp3o92gAAAAF0Uk5TAEDm2GYAAAAfSURBVHic7cEBDQAAAMKg909tDjegAAAAAAAAAAC+DSEAAAHxZyHuAAAAAElFTkSuQmCC';\n\n// 初始化\nconst initTileMap = (bm, opts) => {\n  const {\n    size,\n    url: baseUrl,\n    tile,\n    center = [-1, -1],\n    zoom = bm.zoom,\n    ext = 'png',\n    placeholder = ph\n  } = opts;\n  const {\n    url,\n    level,\n    row,\n    column\n  } = tile;\n  if (!Array.isArray(size) || size.length !== 2) {\n    (0,_debug__WEBPACK_IMPORTED_MODULE_0__.warn)('地图大小未传或格式不正确。');\n    return;\n  }\n\n  // 设置中心点\n  if (!center) {\n    center[0] = Math.round(size[0] / 2);\n    center[1] = Math.round(size[1] / 2);\n  }\n  const tileList = [];\n  const promises = [];\n  url.map((v, idx) => {\n    const u = (0,_util__WEBPACK_IMPORTED_MODULE_1__.joinPath)(baseUrl, v);\n    const l = level[idx];\n    const rowCount = row[idx];\n    const columnCount = column[idx];\n    const list = [];\n    for (let j = 1; j <= rowCount; j++) {\n      for (let k = 1; k <= columnCount; k++) {\n        const filename = u + `${j}_${k}.${ext}`;\n        list.push({\n          row: j,\n          column: k,\n          filename,\n          width: 0,\n          height: 0,\n          img: null\n        });\n        if (j === rowCount && k === columnCount) {\n          // 最后一张图\n          const p = new Promise(resolve => {\n            const img = new Image();\n            img.src = filename;\n            img.onload = () => {\n              const i = idx;\n              bm.tileLastMapSize[i] = {\n                w: img.naturalWidth,\n                h: img.naturalHeight\n              };\n              resolve();\n            };\n          });\n          promises.push(p);\n        }\n      }\n    }\n    tileList.push({\n      url: u,\n      level: l,\n      row: rowCount,\n      column: columnCount,\n      rect: null,\n      list\n    });\n  });\n  bm.isTile = true;\n  bm.mapWidth = size[0];\n  bm.mapHeight = size[1];\n  bm.tileList = tileList;\n  bm.zoom = zoom;\n  bm.center = center;\n  bm.tileExt = ext.startsWith('.') ? ext.substring(1) : ext;\n  bm.tilePlaceholder = placeholder;\n  return promises;\n};\n\n/* 根据当前层级获取tile index */\nconst getTileIndex = bm => {\n  const zoom = bm.zoom;\n  let idx;\n  bm.tileList.some((v, i) => {\n    const arr = v.level.split('-');\n    const min = parseInt(arr[0]);\n    const max = parseInt(arr[1]);\n    if (zoom >= min && zoom <= max) {\n      idx = i;\n      return true;\n    }\n  });\n  return idx;\n};\nconst bak = (bm, params) => {\n  const {\n    url,\n    width,\n    height,\n    row,\n    column,\n    type\n  } = params;\n  const mapRowCount = row;\n  const mapColumnCount = column;\n  bm.isTile = true;\n  bm.tileBase = url.endsWith('/') ? url : url + '/';\n  bm.mapWidth = width;\n  bm.mapHeight = height;\n  const list = [];\n  for (let j = 1; j <= mapRowCount; j++) {\n    for (let k = 1; k <= mapColumnCount; k++) {\n      list.push({\n        row: j,\n        column: k,\n        filename: `${j}_${k}.${type}`,\n        width: 0,\n        height: 0,\n        img: null\n      });\n    }\n  }\n  bm.tileList = list;\n  const lastImg = list[list.length - 1];\n  const lastMap = new Image();\n  lastMap.src = bm.tileBase + lastImg.filename;\n  lastMap.onload = () => {\n    lastImg.width = lastMap.naturalWidth;\n    lastImg.height = lastMap.naturalHeight;\n    lastImg.img = lastMap;\n    bm._initMapRect((mapColumnCount - 1) * 256 + lastMap.naturalWidth, (mapRowCount - 1) * 256 + lastMap.naturalHeight);\n    bm._drawMap(bm);\n  };\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdXRpbC90aWxlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTtBQUNBO0FBRUE7O0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYmFvc2lnaHQtbWFwLy4vc3JjL3V0aWwvdGlsZS5qcz9hYjI5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHdhcm4gfSBmcm9tICcuL2RlYnVnJ1xyXG5pbXBvcnQgeyBqb2luUGF0aCB9IGZyb20gJy4vdXRpbCdcclxuXHJcbmNvbnN0IHBoID1cclxuICAnZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFRQUFBQUVBQVFNQUFBQm12RG9sQUFBQUFYTlNSMElCMmNrc2Z3QUFBQWx3U0ZsekFBQUxFd0FBQ3hNQkFKcWNHQUFBQUFOUVRGUkZBQUFBcDNvOTJnQUFBQUYwVWs1VEFFRG0yR1lBQUFBZlNVUkJWSGljN2NFQkRRQUFBTUtnOTA5dERqZWdBQUFBQUFBQUFBQytEU0VBQUFIeFp5SHVBQUFBQUVsRlRrU3VRbUNDJ1xyXG5cclxuLy8g5Yid5aeL5YyWXHJcbmV4cG9ydCBjb25zdCBpbml0VGlsZU1hcCA9IChibSwgb3B0cykgPT4ge1xyXG4gIGNvbnN0IHsgc2l6ZSwgdXJsOiBiYXNlVXJsLCB0aWxlLCBjZW50ZXI9Wy0xLCAtMV0sIHpvb20gPSBibS56b29tLCBleHQgPSAncG5nJywgcGxhY2Vob2xkZXIgPSBwaCB9ID0gb3B0c1xyXG4gIGNvbnN0IHsgdXJsLCBsZXZlbCwgcm93LCBjb2x1bW4gfSA9IHRpbGVcclxuXHJcbiAgaWYgKCFBcnJheS5pc0FycmF5KHNpemUpIHx8IHNpemUubGVuZ3RoICE9PSAyKSB7XHJcbiAgICB3YXJuKCflnLDlm77lpKflsI/mnKrkvKDmiJbmoLzlvI/kuI3mraPnoa7jgIInKVxyXG4gICAgcmV0dXJuXHJcbiAgfVxyXG5cclxuICAvLyDorr7nva7kuK3lv4PngrlcclxuICBpZiAoIWNlbnRlcikge1xyXG4gICAgY2VudGVyWzBdID0gTWF0aC5yb3VuZChzaXplWzBdIC8gMilcclxuICAgIGNlbnRlclsxXSA9IE1hdGgucm91bmQoc2l6ZVsxXSAvIDIpXHJcbiAgfVxyXG5cclxuICBjb25zdCB0aWxlTGlzdCA9IFtdXHJcbiAgY29uc3QgcHJvbWlzZXMgPSBbXVxyXG5cclxuICB1cmwubWFwKCh2LCBpZHgpID0+IHtcclxuICAgIGNvbnN0IHUgPSBqb2luUGF0aChiYXNlVXJsLCB2KVxyXG4gICAgY29uc3QgbCA9IGxldmVsW2lkeF1cclxuICAgIGNvbnN0IHJvd0NvdW50ID0gcm93W2lkeF1cclxuICAgIGNvbnN0IGNvbHVtbkNvdW50ID0gY29sdW1uW2lkeF1cclxuICAgIGNvbnN0IGxpc3QgPSBbXVxyXG5cclxuICAgIGZvciAobGV0IGogPSAxOyBqIDw9IHJvd0NvdW50OyBqKyspIHtcclxuICAgICAgZm9yIChsZXQgayA9IDE7IGsgPD0gY29sdW1uQ291bnQ7IGsrKykge1xyXG4gICAgICAgIGNvbnN0IGZpbGVuYW1lID0gdSArIGAke2p9XyR7a30uJHtleHR9YFxyXG4gICAgICAgIGxpc3QucHVzaCh7XHJcbiAgICAgICAgICByb3c6IGosXHJcbiAgICAgICAgICBjb2x1bW46IGssXHJcbiAgICAgICAgICBmaWxlbmFtZSxcclxuICAgICAgICAgIHdpZHRoOiAwLFxyXG4gICAgICAgICAgaGVpZ2h0OiAwLFxyXG4gICAgICAgICAgaW1nOiBudWxsXHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgaWYgKGogPT09IHJvd0NvdW50ICYmIGsgPT09IGNvbHVtbkNvdW50KSB7XHJcbiAgICAgICAgICAvLyDmnIDlkI7kuIDlvKDlm75cclxuICAgICAgICAgIGNvbnN0IHAgPSBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcclxuICAgICAgICAgICAgY29uc3QgaW1nID0gbmV3IEltYWdlKClcclxuICAgICAgICAgICAgaW1nLnNyYyA9IGZpbGVuYW1lXHJcbiAgICAgICAgICAgIGltZy5vbmxvYWQgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgY29uc3QgaSA9IGlkeFxyXG4gICAgICAgICAgICAgIGJtLnRpbGVMYXN0TWFwU2l6ZVtpXSA9IHsgdzogaW1nLm5hdHVyYWxXaWR0aCwgaDogaW1nLm5hdHVyYWxIZWlnaHQgfVxyXG4gICAgICAgICAgICAgIHJlc29sdmUoKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KVxyXG5cclxuICAgICAgICAgIHByb21pc2VzLnB1c2gocClcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB0aWxlTGlzdC5wdXNoKHtcclxuICAgICAgdXJsOiB1LFxyXG4gICAgICBsZXZlbDogbCxcclxuICAgICAgcm93OiByb3dDb3VudCxcclxuICAgICAgY29sdW1uOiBjb2x1bW5Db3VudCxcclxuICAgICAgcmVjdDogbnVsbCxcclxuICAgICAgbGlzdFxyXG4gICAgfSlcclxuICB9KVxyXG5cclxuICBibS5pc1RpbGUgPSB0cnVlXHJcbiAgYm0ubWFwV2lkdGggPSBzaXplWzBdXHJcbiAgYm0ubWFwSGVpZ2h0ID0gc2l6ZVsxXVxyXG4gIGJtLnRpbGVMaXN0ID0gdGlsZUxpc3RcclxuICBibS56b29tID0gem9vbVxyXG4gIGJtLmNlbnRlciA9IGNlbnRlclxyXG4gIGJtLnRpbGVFeHQgPSBleHQuc3RhcnRzV2l0aCgnLicpID8gZXh0LnN1YnN0cmluZygxKSA6IGV4dFxyXG4gIGJtLnRpbGVQbGFjZWhvbGRlciA9IHBsYWNlaG9sZGVyXHJcblxyXG4gIHJldHVybiBwcm9taXNlc1xyXG59XHJcblxyXG4vKiDmoLnmja7lvZPliY3lsYLnuqfojrflj5Z0aWxlIGluZGV4ICovXHJcbmV4cG9ydCBjb25zdCBnZXRUaWxlSW5kZXggPSBibSA9PiB7XHJcbiAgY29uc3Qgem9vbSA9IGJtLnpvb21cclxuICBsZXQgaWR4XHJcblxyXG4gIGJtLnRpbGVMaXN0LnNvbWUoKHYsIGkpID0+IHtcclxuICAgIGNvbnN0IGFyciA9IHYubGV2ZWwuc3BsaXQoJy0nKVxyXG4gICAgY29uc3QgbWluID0gcGFyc2VJbnQoYXJyWzBdKVxyXG4gICAgY29uc3QgbWF4ID0gcGFyc2VJbnQoYXJyWzFdKVxyXG5cclxuICAgIGlmICh6b29tID49IG1pbiAmJiB6b29tIDw9IG1heCkge1xyXG4gICAgICBpZHggPSBpXHJcbiAgICAgIHJldHVybiB0cnVlXHJcbiAgICB9XHJcbiAgfSlcclxuXHJcbiAgcmV0dXJuIGlkeFxyXG59XHJcblxyXG5jb25zdCBiYWsgPSAoYm0sIHBhcmFtcykgPT4ge1xyXG4gIGNvbnN0IHsgdXJsLCB3aWR0aCwgaGVpZ2h0LCByb3csIGNvbHVtbiwgdHlwZSB9ID0gcGFyYW1zXHJcblxyXG4gIGNvbnN0IG1hcFJvd0NvdW50ID0gcm93XHJcbiAgY29uc3QgbWFwQ29sdW1uQ291bnQgPSBjb2x1bW5cclxuXHJcbiAgYm0uaXNUaWxlID0gdHJ1ZVxyXG4gIGJtLnRpbGVCYXNlID0gdXJsLmVuZHNXaXRoKCcvJykgPyB1cmwgOiB1cmwgKyAnLydcclxuXHJcbiAgYm0ubWFwV2lkdGggPSB3aWR0aFxyXG4gIGJtLm1hcEhlaWdodCA9IGhlaWdodFxyXG5cclxuICBjb25zdCBsaXN0ID0gW11cclxuICBmb3IgKGxldCBqID0gMTsgaiA8PSBtYXBSb3dDb3VudDsgaisrKSB7XHJcbiAgICBmb3IgKGxldCBrID0gMTsgayA8PSBtYXBDb2x1bW5Db3VudDsgaysrKSB7XHJcbiAgICAgIGxpc3QucHVzaCh7XHJcbiAgICAgICAgcm93OiBqLFxyXG4gICAgICAgIGNvbHVtbjogayxcclxuICAgICAgICBmaWxlbmFtZTogYCR7an1fJHtrfS4ke3R5cGV9YCxcclxuICAgICAgICB3aWR0aDogMCxcclxuICAgICAgICBoZWlnaHQ6IDAsXHJcbiAgICAgICAgaW1nOiBudWxsXHJcbiAgICAgIH0pXHJcbiAgICB9XHJcbiAgfVxyXG4gIGJtLnRpbGVMaXN0ID0gbGlzdFxyXG4gIGNvbnN0IGxhc3RJbWcgPSBsaXN0W2xpc3QubGVuZ3RoIC0gMV1cclxuXHJcbiAgY29uc3QgbGFzdE1hcCA9IG5ldyBJbWFnZSgpXHJcbiAgbGFzdE1hcC5zcmMgPSBibS50aWxlQmFzZSArIGxhc3RJbWcuZmlsZW5hbWVcclxuXHJcbiAgbGFzdE1hcC5vbmxvYWQgPSAoKSA9PiB7XHJcbiAgICBsYXN0SW1nLndpZHRoID0gbGFzdE1hcC5uYXR1cmFsV2lkdGhcclxuICAgIGxhc3RJbWcuaGVpZ2h0ID0gbGFzdE1hcC5uYXR1cmFsSGVpZ2h0XHJcbiAgICBsYXN0SW1nLmltZyA9IGxhc3RNYXBcclxuICAgIGJtLl9pbml0TWFwUmVjdChcclxuICAgICAgKG1hcENvbHVtbkNvdW50IC0gMSkgKiAyNTYgKyBsYXN0TWFwLm5hdHVyYWxXaWR0aCxcclxuICAgICAgKG1hcFJvd0NvdW50IC0gMSkgKiAyNTYgKyBsYXN0TWFwLm5hdHVyYWxIZWlnaHRcclxuICAgIClcclxuICAgIGJtLl9kcmF3TWFwKGJtKVxyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/util/tile.js\n");

/***/ }),

/***/ "./src/util/util.js":
/*!**************************!*\
  !*** ./src/util/util.js ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   debounce: () => (/* binding */ debounce),\n/* harmony export */   getRandom: () => (/* binding */ getRandom),\n/* harmony export */   isNumeric: () => (/* binding */ isNumeric),\n/* harmony export */   joinPath: () => (/* binding */ joinPath),\n/* harmony export */   millimeter2percent: () => (/* binding */ millimeter2percent),\n/* harmony export */   millimeter2pixel: () => (/* binding */ millimeter2pixel),\n/* harmony export */   pixel2millimeter: () => (/* binding */ pixel2millimeter),\n/* harmony export */   windows2canvas: () => (/* binding */ windows2canvas)\n/* harmony export */ });\n/*  */\nfunction windows2canvas(eX, eY, canvas) {\n  const box = canvas.getBoundingClientRect();\n  return {\n    x: eX - box.left - (box.width - canvas.width) / 2,\n    y: eY - box.top - (box.height - canvas.height) / 2\n  };\n}\n\n/* 坐标转换：毫米转换像素 */\nfunction millimeter2pixel(mm, isHeight, bm) {\n  mm = parseInt(mm);\n  if (!mm) {\n    return '';\n  }\n  if (!isHeight) {\n    return Math.round(mm / bm.mapWidth * bm.rect.width);\n  } else {\n    return Math.round(mm / bm.mapHeight * bm.rect.height);\n  }\n}\n\n/* 坐标转换：像素转换毫米 */\nfunction pixel2millimeter(pixel, isHeight, bm) {\n  pixel = parseFloat(pixel);\n  if (!pixel) {\n    return '';\n  }\n  if (!isHeight) {\n    return Math.round(pixel / bm.rect.width * bm.mapWidth);\n  } else {\n    return Math.round(pixel / bm.rect.height * bm.mapHeight);\n  }\n}\n\n/* 坐标转换：毫米转换百分比 */\nfunction millimeter2percent(x, y, bm) {\n  x = parseInt(x);\n  y = parseInt(y);\n  return {\n    x: x / bm.mapWidth,\n    y: y / bm.mapHeight\n  };\n}\n\n/* 随机数 */\nfunction getRandom(len = 14, pre = 'id') {\n  return pre + Math.random().toString().substring(2, len);\n}\n\n/* 防抖函数 */\nfunction debounce(func, wait, immediate) {\n  let timeout, args, context, timestamp, result;\n  wait = wait || 100;\n  const later = function () {\n    const last = Date.now() - timestamp;\n    if (last < wait && last >= 0) {\n      timeout = setTimeout(later, wait - last);\n    } else {\n      timeout = null;\n      if (!immediate) {\n        result = func.apply(context, args);\n        if (!timeout) context = args = null;\n      }\n    }\n  };\n  return function () {\n    context = this;\n    args = arguments;\n    timestamp = Date.now();\n    const callNow = immediate && !timeout;\n    if (!timeout) timeout = setTimeout(later, wait);\n    if (callNow) {\n      result = func.apply(context, args);\n      context = args = null;\n    }\n    return result;\n  };\n}\n\n/* 判断是否是数字 */\nfunction isNumeric(value) {\n  return !isNaN(parseFloat(value)) && isFinite(value);\n}\n\n/* 路径拼接 */\nfunction joinPath(path, subPath) {\n  if (!path) return subPath;\n  let m = '/';\n  if (path.endsWith('/')) {\n    m = '';\n  }\n  if (subPath.startsWith('.')) {\n    subPath = subPath.substring(1);\n  }\n  if (subPath.startsWith('/')) {\n    subPath = subPath.substring(1);\n  }\n  if (!subPath.endsWith('/')) {\n    subPath += '/';\n  }\n  return path + m + subPath;\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdXRpbC91dGlsLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2Jhb3NpZ2h0LW1hcC8uL3NyYy91dGlsL3V0aWwuanM/MGUwYiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiAgKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHdpbmRvd3MyY2FudmFzKGVYLCBlWSwgY2FudmFzKSB7XHJcbiAgY29uc3QgYm94ID0gY2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXHJcbiAgcmV0dXJuIHtcclxuICAgIHg6IGVYIC0gYm94LmxlZnQgLSAoYm94LndpZHRoIC0gY2FudmFzLndpZHRoKSAvIDIsXHJcbiAgICB5OiBlWSAtIGJveC50b3AgLSAoYm94LmhlaWdodCAtIGNhbnZhcy5oZWlnaHQpIC8gMlxyXG4gIH1cclxufVxyXG5cclxuLyog5Z2Q5qCH6L2s5o2i77ya5q+r57Gz6L2s5o2i5YOP57SgICovXHJcbmV4cG9ydCBmdW5jdGlvbiBtaWxsaW1ldGVyMnBpeGVsKG1tLCBpc0hlaWdodCwgYm0pIHtcclxuICBtbSA9IHBhcnNlSW50KG1tKVxyXG4gIGlmICghbW0pIHtcclxuICAgIHJldHVybiAnJ1xyXG4gIH1cclxuICBpZiAoIWlzSGVpZ2h0KSB7XHJcbiAgICByZXR1cm4gTWF0aC5yb3VuZCgobW0gLyBibS5tYXBXaWR0aCkgKiBibS5yZWN0LndpZHRoKVxyXG4gIH0gZWxzZSB7XHJcbiAgICByZXR1cm4gTWF0aC5yb3VuZCgobW0gLyBibS5tYXBIZWlnaHQpICogYm0ucmVjdC5oZWlnaHQpXHJcbiAgfVxyXG59XHJcblxyXG4vKiDlnZDmoIfovazmjaLvvJrlg4/ntKDovazmjaLmr6vnsbMgKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHBpeGVsMm1pbGxpbWV0ZXIocGl4ZWwsIGlzSGVpZ2h0LCBibSkge1xyXG4gIHBpeGVsID0gcGFyc2VGbG9hdChwaXhlbClcclxuICBpZiAoIXBpeGVsKSB7XHJcbiAgICByZXR1cm4gJydcclxuICB9XHJcblxyXG4gIGlmICghaXNIZWlnaHQpIHtcclxuICAgIHJldHVybiBNYXRoLnJvdW5kKChwaXhlbCAvIGJtLnJlY3Qud2lkdGgpICogYm0ubWFwV2lkdGgpXHJcbiAgfSBlbHNlIHtcclxuICAgIHJldHVybiBNYXRoLnJvdW5kKChwaXhlbCAvIGJtLnJlY3QuaGVpZ2h0KSAqIGJtLm1hcEhlaWdodClcclxuICB9XHJcbn1cclxuXHJcbi8qIOWdkOagh+i9rOaNou+8muavq+exs+i9rOaNoueZvuWIhuavlCAqL1xyXG5leHBvcnQgZnVuY3Rpb24gbWlsbGltZXRlcjJwZXJjZW50KHgsIHksIGJtKSB7XHJcbiAgeCA9IHBhcnNlSW50KHgpXHJcbiAgeSA9IHBhcnNlSW50KHkpXHJcbiAgcmV0dXJuIHtcclxuICAgIHg6IHggLyBibS5tYXBXaWR0aCxcclxuICAgIHk6IHkgLyBibS5tYXBIZWlnaHRcclxuICB9XHJcbn1cclxuXHJcbi8qIOmaj+acuuaVsCAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0UmFuZG9tKGxlbiA9IDE0LCBwcmUgPSAnaWQnKSB7XHJcbiAgcmV0dXJuIHByZSArIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoKS5zdWJzdHJpbmcoMiwgbGVuKVxyXG59XHJcblxyXG4vKiDpmLLmipblh73mlbAgKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGRlYm91bmNlKGZ1bmMsIHdhaXQsIGltbWVkaWF0ZSkge1xyXG4gIGxldCB0aW1lb3V0LCBhcmdzLCBjb250ZXh0LCB0aW1lc3RhbXAsIHJlc3VsdFxyXG4gIHdhaXQgPSB3YWl0IHx8IDEwMFxyXG5cclxuICBjb25zdCBsYXRlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgIGNvbnN0IGxhc3QgPSBEYXRlLm5vdygpIC0gdGltZXN0YW1wXHJcblxyXG4gICAgaWYgKGxhc3QgPCB3YWl0ICYmIGxhc3QgPj0gMCkge1xyXG4gICAgICB0aW1lb3V0ID0gc2V0VGltZW91dChsYXRlciwgd2FpdCAtIGxhc3QpXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aW1lb3V0ID0gbnVsbFxyXG4gICAgICBpZiAoIWltbWVkaWF0ZSkge1xyXG4gICAgICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncylcclxuICAgICAgICBpZiAoIXRpbWVvdXQpIGNvbnRleHQgPSBhcmdzID0gbnVsbFxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZXR1cm4gZnVuY3Rpb24gKCkge1xyXG4gICAgY29udGV4dCA9IHRoaXNcclxuICAgIGFyZ3MgPSBhcmd1bWVudHNcclxuICAgIHRpbWVzdGFtcCA9IERhdGUubm93KClcclxuICAgIGNvbnN0IGNhbGxOb3cgPSBpbW1lZGlhdGUgJiYgIXRpbWVvdXRcclxuXHJcbiAgICBpZiAoIXRpbWVvdXQpIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGxhdGVyLCB3YWl0KVxyXG4gICAgaWYgKGNhbGxOb3cpIHtcclxuICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKVxyXG4gICAgICBjb250ZXh0ID0gYXJncyA9IG51bGxcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gcmVzdWx0XHJcbiAgfVxyXG59XHJcblxyXG4vKiDliKTmlq3mmK/lkKbmmK/mlbDlrZcgKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGlzTnVtZXJpYyh2YWx1ZSkge1xyXG4gIHJldHVybiAhaXNOYU4ocGFyc2VGbG9hdCh2YWx1ZSkpICYmIGlzRmluaXRlKHZhbHVlKVxyXG59XHJcblxyXG4vKiDot6/lvoTmi7zmjqUgKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGpvaW5QYXRoKHBhdGgsIHN1YlBhdGgpIHtcclxuICBpZiAoIXBhdGgpIHJldHVybiBzdWJQYXRoXHJcblxyXG4gIGxldCBtID0gJy8nXHJcbiAgaWYgKHBhdGguZW5kc1dpdGgoJy8nKSkge1xyXG4gICAgbSA9ICcnXHJcbiAgfVxyXG5cclxuICBpZiAoc3ViUGF0aC5zdGFydHNXaXRoKCcuJykpIHtcclxuICAgIHN1YlBhdGggPSBzdWJQYXRoLnN1YnN0cmluZygxKVxyXG4gIH1cclxuICBpZiAoc3ViUGF0aC5zdGFydHNXaXRoKCcvJykpIHtcclxuICAgIHN1YlBhdGggPSBzdWJQYXRoLnN1YnN0cmluZygxKVxyXG4gIH1cclxuXHJcbiAgaWYgKCFzdWJQYXRoLmVuZHNXaXRoKCcvJykpIHtcclxuICAgIHN1YlBhdGggKz0gJy8nXHJcbiAgfVxyXG5cclxuICByZXR1cm4gcGF0aCArIG0gKyBzdWJQYXRoXHJcbn0iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/util/util.js\n");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval-source-map devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./src/index.js");
/******/ 	
/******/ })()
;